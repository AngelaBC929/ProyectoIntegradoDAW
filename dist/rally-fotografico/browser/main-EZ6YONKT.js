import{a as me,b as qe,c as mo,d as po,e as uo,f as fo,g as go,h as ho,i as _o,j as bo,k as yo}from"./chunk-2ET7OYAK.js";import{a as Te}from"./chunk-7L3QPRQ3.js";import{a as Fe}from"./chunk-KAMHYRVC.js";import{a as oo,b as ve,c as L,d as Ce,e as Ve,f as on,g as Xe,h as Be,i as _t,j as bt,k as yt,l as vt,m as Ct,n as rn,o as ro,p as ao,q as so,r as lo,s as co,t as Je,u as $,v as et}from"./chunk-NIRNFEWH.js";import{$ as p,$a as no,A as x,Aa as Xt,B as w,Ba as Jt,Ca as G,D as Wt,Da as ft,E as Vi,Ea as te,F as It,Fa as Wn,Ga as Yi,H as Dt,I as $n,J as Bi,K as qi,Ka as zt,L as kt,M as Oe,Ma as Ne,N as Yt,Na as K,O as d,Oa as j,P as ji,Pa as en,Q as Gi,Qa as tn,Ra as de,S as v,Sa as U,T as k,Ta as Zi,Ua as Xi,Va as gt,Wa as Ji,X as h,Xa as eo,Ya as nn,Z as Zt,Za as to,_ as Rt,_a as Ze,a as q,aa as Ut,ab as I,b as Se,ba as Z,bb as ht,c as Ri,ca as ge,cb as io,da as s,db as Le,ea as a,eb as Pe,f as Ui,fa as P,fb as xt,g as We,ga as he,ha as _e,ia as V,ja as Ki,ka as _,la as g,ma as Hi,na as Qi,oa as $i,pa as Wi,q as N,qa as ie,ra as c,s as ae,sa as A,ta as R,u as zi,ua as ut,v as W,va as se,w as Ye,wa as le,x as Ni,xa as ce,y as Li,za as De}from"./chunk-Q43MG4T7.js";var an=class i{constructor(t,e,n){this.router=t;this.userService=e;this.authenticationService=n}userName="Invitado";subscription;ngOnInit(){if(this.subscription=this.authenticationService.username$.subscribe(t=>{this.userName=t||"Invitado"}),!this.authenticationService.getUsername()){let t=+localStorage.getItem("userId");t&&this.userService.getUserById(t).subscribe(e=>{this.authenticationService.setUsername(e.name),localStorage.setItem("user_name",e.name)})}}ngOnDestroy(){this.subscription.unsubscribe()}logout(){localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("user_name"),this.authenticationService.setRole(null),this.authenticationService.setUsername(null),this.router.navigate(["/home"])}static \u0275fac=function(e){return new(e||i)(v(I),v(xt),v(me))};static \u0275cmp=k({type:i,selectors:[["app-navbar"]],decls:16,vars:1,consts:[[1,"urban-navbar","container-fluid","py-3"],[1,"row","w-100","align-items-center"],[1,"col-12","col-md-6","text-center","text-md-start","urban-navbar-left","mb-3","mb-md-0","d-flex","align-items-center","gap-3"],["src","/images/logo5.png","alt","Logo ExpressCaptureVz",1,"urban-navbar-logo"],[1,"urban-brand-group"],[1,"urban-navbar-brand"],[2,"font-size","0.6em","vertical-align","super"],[1,"urban-navbar-subtitle"],[1,"col-12","col-md-6","d-flex","justify-content-center","justify-content-md-end","align-items-center","flex-wrap","gap-2","urban-navbar-right"],[1,"user-name"],[1,"urban-btn",3,"click"]],template:function(e,n){e&1&&(s(0,"header",0)(1,"div",1)(2,"div",2),P(3,"img",3),s(4,"div",4)(5,"div",5),c(6,"ExpressCaptureVz"),s(7,"span",6),c(8,"\xAE"),a()(),s(9,"div",7),c(10,"Rally Fotogr\xE1fico"),a()()(),s(11,"div",8)(12,"span",9),c(13),a(),s(14,"button",10),_("click",function(){return n.logout()}),c(15,"Cerrar sesi\xF3n"),a()()()()),e&2&&(d(13),A(n.userName))},dependencies:[U,$],styles:[".urban-navbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background-color:#5c2c10;color:#fdf3e7;padding:1rem 2rem;border-bottom:2px solid #8d3c1f;font-family:Segoe UI,sans-serif;position:sticky;top:0;z-index:100;flex-wrap:wrap}.urban-navbar-left[_ngcontent-%COMP%]{font-size:3rem;font-weight:400;color:#fef5e4;text-shadow:1px 1px 4px #3d1c0f}.urban-brand-group[_ngcontent-%COMP%]{line-height:1.1}.urban-navbar-brand[_ngcontent-%COMP%]{font-family:Rye,cursive;font-size:2.6rem;margin-bottom:.2rem;color:#fef5e4}.urban-navbar-subtitle[_ngcontent-%COMP%]{font-size:1.1rem;text-transform:uppercase;letter-spacing:.5px;color:#f4d6b5}.urban-navbar-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex-wrap:wrap;justify-content:center}.user-name[_ngcontent-%COMP%]{font-weight:700;font-size:1.3rem;color:#fff0e0;background-color:#5a280a66;padding:.4rem .8rem;border-radius:8px}.urban-navbar-logo[_ngcontent-%COMP%]{height:8rem;width:auto;object-fit:contain;-webkit-user-select:none;user-select:none}.urban-btn[_ngcontent-%COMP%]{background-color:#8d3c1f;color:#fff2e0;border:none;padding:.5rem 1.3rem;font-size:1.3rem;font-weight:700;border-radius:6px;transition:background-color .3s ease;cursor:pointer}.urban-btn[_ngcontent-%COMP%]:hover{background-color:#a54825}@media (max-width: 768px){.urban-navbar[_ngcontent-%COMP%]{flex-direction:column;align-items:center;padding:1rem;text-align:center}.urban-navbar-left[_ngcontent-%COMP%]{font-size:2.2rem;margin-bottom:.3rem}.urban-navbar-brand[_ngcontent-%COMP%]{font-size:1.8rem}.urban-navbar-subtitle[_ngcontent-%COMP%]{font-size:.95rem}.urban-navbar-right[_ngcontent-%COMP%]{flex-direction:column;gap:.6rem;margin-top:.8rem}.user-name[_ngcontent-%COMP%]{font-size:1.1rem;padding:.3rem .7rem}.urban-btn[_ngcontent-%COMP%]{font-size:1.1rem;padding:.6rem 1.2rem;width:100%;max-width:200px}.urban-navbar-logo[_ngcontent-%COMP%]{height:40px}}"]})};function Or(i,t){i&1&&P(0,"app-navbar")}function Tr(i,t){if(i&1){let e=V();s(0,"div",5)(1,"div",6)(2,"div",7)(3,"h5",8),c(4,"Sesi\xF3n expirada"),a(),s(5,"div",9)(6,"p"),c(7,"Tu sesi\xF3n ha caducado por inactividad. Por favor, inicia sesi\xF3n nuevamente."),a()(),s(8,"div",10)(9,"button",11),_("click",function(){x(e);let o=g();return w(o.handleLogin())}),c(10,"Iniciar sesi\xF3n"),a(),s(11,"button",12),_("click",function(){x(e);let o=g();return w(o.handleCancel())}),c(12,"Cancelar"),a()()()()()}}function Fr(i,t){i&1&&P(0,"div",13)}var sn=class i{constructor(t,e){this.authService=t;this.router=e}title="rallyFotografico";role=null;showModal=!1;isLoggedIn=!1;ngOnInit(){this.authService.role$.subscribe(t=>{this.role=t}),this.authService.sessionExpired$.subscribe(()=>{this.showSessionExpiredModal()}),this.isLoggedIn=this.authService.isAuthenticated(),this.isLoggedIn||this.router.navigate(["/home"])}onUserActivity(){this.authService.resetTimeout()}showSessionExpiredModal(){this.showModal=!0}handleLogin(){this.showModal=!1,this.authService.logout(),this.authService.setLoginAfterSessionExpired(!0),this.router.navigate(["/login"])}handleCancel(){this.authService.logout(),this.showModal=!1,this.router.navigate(["/home"])}static \u0275fac=function(e){return new(e||i)(v(me),v(I))};static \u0275cmp=k({type:i,selectors:[["app-root"]],hostBindings:function(e,n){e&1&&_("mousemove",function(r){return n.onUserActivity(r)},!1,Yt)("keydown",function(r){return n.onUserActivity(r)},!1,Yt)("click",function(r){return n.onUserActivity(r)},!1,Yt)},decls:8,vars:3,consts:[[4,"ngIf"],["class","modal fade show session-expired-modal","tabindex","-1","role","dialog","style","display: block;",4,"ngIf"],["class","modal-backdrop fade show",4,"ngIf"],[1,"main-container"],[1,"urban-footer"],["tabindex","-1","role","dialog",1,"modal","fade","show","session-expired-modal",2,"display","block"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"session-expired-title"],[1,"session-expired-content"],[1,"session-expired-actions"],[1,"btn","btn-session-login",3,"click"],[1,"btn","btn-session-cancel",3,"click"],[1,"modal-backdrop","fade","show"]],template:function(e,n){e&1&&(h(0,Or,1,0,"app-navbar",0)(1,Tr,13,0,"div",1)(2,Fr,1,0,"div",2),s(3,"main",3),P(4,"router-outlet"),a(),s(5,"footer",4)(6,"p"),c(7,"\xA9 2025 ExpressCaptureVz - Rally Fotogr\xE1fico. Todos los derechos reservados. Contacto: expresscapturesvz.admin@gmail.com "),a()()),e&2&&(p("ngIf",n.role),d(),p("ngIf",n.showModal),d(),p("ngIf",n.showModal))},dependencies:[no,U,j,$,an],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;width:100%;margin:0;padding:0}body[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100vh}app-root[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}main.main-container[_ngcontent-%COMP%]{flex:1}.urban-footer[_ngcontent-%COMP%]{background-color:#2b160a;color:#d5c4aa;text-align:center;padding:.8rem;font-size:.7rem;border-top:.6px solid #5b3c26;margin-top:auto}.modal-backdrop.show[_ngcontent-%COMP%]{background:#0009;-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px);z-index:1040}.modal.session-expired-modal[_ngcontent-%COMP%]{display:flex!important;align-items:center;justify-content:center;background:linear-gradient(135deg,#6d3b1e,#2a1507);-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px);overflow:hidden;z-index:1050}.session-expired-modal[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{width:90%;max-width:420px;animation:_ngcontent-%COMP%_fadeIn .3s ease}.session-expired-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background:linear-gradient(145deg,#4e2b12,#3a1d0b);border-radius:14px;padding:2rem;border:1px solid #c97b4d;box-shadow:0 0 25px #c8783c66;color:#fdf3e7;text-align:center}.session-expired-title[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;margin-bottom:1rem;color:#fc9;text-shadow:1px 1px 3px #000}.session-expired-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#ffd9b3;margin-bottom:1.5rem}.session-expired-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1rem;flex-wrap:wrap;margin-top:1.5rem}.btn-session-login[_ngcontent-%COMP%], .btn-session-cancel[_ngcontent-%COMP%]{padding:.6rem 1.6rem;font-size:1.1rem;border-radius:50px;font-weight:700;transition:.3s ease;border:none;cursor:pointer}.btn-session-login[_ngcontent-%COMP%]{background-color:#f4a261;color:#2b160a}.btn-session-login[_ngcontent-%COMP%]:hover{background-color:#ffa366}.btn-session-cancel[_ngcontent-%COMP%]{background-color:#5c3b28;color:#fbe9d0}.btn-session-cancel[_ngcontent-%COMP%]:hover{background-color:#7a4a30}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:scale(.96)}to{opacity:1;transform:scale(1)}}@media (max-width: 500px){.session-expired-modal[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{padding:1.2rem 1.5rem;width:95%}.session-expired-actions[_ngcontent-%COMP%]{flex-direction:column;gap:.8rem}.btn-session-login[_ngcontent-%COMP%], .btn-session-cancel[_ngcontent-%COMP%]{width:100%}}"]})};var Ar=i=>({"is-invalid":i});function Ir(i,t){i&1&&(s(0,"div",23),c(1," El usuario es requerido. "),a())}function Dr(i,t){i&1&&(s(0,"div",23),c(1," La contrase\xF1a debe tener entre 8 y 12 caracteres, incluir may\xFAsculas, min\xFAsculas y un car\xE1cter especial. "),a())}function kr(i,t){i&1&&(s(0,"div",23),c(1," La contrase\xF1a es requerida. "),a())}function Rr(i,t){if(i&1&&(s(0,"div",24),c(1),a()),i&2){let e=g();d(),R(" ",e.errorMessage," ")}}var Mt=class i{constructor(t,e){this.authService=t;this.router=e}cerrar=new Vi;username="";password="";submitted=!1;passwordVisible=!1;errorMessage="";passwordRegex=/^(?=.*[a-z])(?=.*[A-Z])(?=.*[\W_]).{8,12}$/;passwordValid(){return this.passwordRegex.test(this.password)}togglePasswordVisibility(){this.passwordVisible=!this.passwordVisible}onSubmit(){this.submitted=!0,this.passwordValid()&&this.authService.login(this.username,this.password).subscribe({next:t=>{t.token&&t.role&&t.username&&t.id&&(localStorage.setItem("authToken",t.token),localStorage.setItem("userRole",t.role),localStorage.setItem("username",t.username),localStorage.setItem("userId",t.id.toString()),t.role==="admin"?this.router.navigate(["/admin"]):this.router.navigate(["/user/dashboard"]),this.cerrar.emit())},error:t=>{console.log("Error de login:",t),t.status===404?this.errorMessage=t.error.error||"Este usuario no est\xE1 registrado. \xBFDeseas registrarte?":t.status===401?this.errorMessage=t.error.error||"Contrase\xF1a incorrecta. Intenta de nuevo.":this.errorMessage="Hubo un problema al intentar iniciar sesi\xF3n. Por favor, intenta de nuevo m\xE1s tarde."}})}goHome(){this.authService.getLoginAfterSessionExpired()?(this.authService.setLoginAfterSessionExpired(!1),this.router.navigate(["/home"])):this.cerrar.emit()}static \u0275fac=function(e){return new(e||i)(v(me),v(I))};static \u0275cmp=k({type:i,selectors:[["app-login"]],outputs:{cerrar:"cerrar"},decls:31,vars:12,consts:[["loginForm","ngForm"],["usernameField","ngModel"],["passwordField","ngModel"],[1,"login-modal"],[1,"login-modal-dialog"],[1,"login-modal-content"],["novalidate","",1,"login-form",3,"ngSubmit"],[1,"login-modal-header"],[1,"login-modal-title"],[1,"login-modal-body"],[1,"login-form-group"],["for","username",1,"login-form-label"],["type","text","id","username","name","username","autocomplete","username","required","","placeholder","Ingresa tu usuario",1,"login-form-control",3,"ngModelChange","ngModel"],["class","login-invalid-feedback",4,"ngIf"],["for","password",1,"login-form-label"],[1,"input-wrapper"],["id","password","name","password","autocomplete","current-password","required","","placeholder","Ingresa tu contrase\xF1a",1,"login-form-control",3,"ngModelChange","type","ngModel","ngClass"],[1,"login-password-toggle",3,"click"],[1,"fa",3,"ngClass"],["class","login-error-message",4,"ngIf"],[1,"login-modal-footer"],["type","submit",1,"login-btn-login",3,"disabled"],["type","button",1,"login-btn-cancel",3,"click"],[1,"login-invalid-feedback"],[1,"login-error-message"]],template:function(e,n){if(e&1){let o=V();s(0,"div",3)(1,"div",4)(2,"div",5)(3,"form",6,0),_("ngSubmit",function(){return x(o),w(n.onSubmit())}),s(5,"div",7)(6,"h5",8),c(7,"Iniciar sesi\xF3n"),a()(),s(8,"div",9)(9,"div",10)(10,"label",11),c(11,"Usuario"),a(),s(12,"input",12,1),ce("ngModelChange",function(l){return x(o),le(n.username,l)||(n.username=l),w(l)}),a(),h(14,Ir,2,0,"div",13),a(),s(15,"div",10)(16,"label",14),c(17,"Contrase\xF1a"),a(),s(18,"div",15)(19,"input",16,2),ce("ngModelChange",function(l){return x(o),le(n.password,l)||(n.password=l),w(l)}),a(),s(21,"span",17),_("click",function(){return x(o),w(n.togglePasswordVisibility())}),P(22,"i",18),a()(),h(23,Dr,2,0,"div",13)(24,kr,2,0,"div",13),a(),h(25,Rr,2,1,"div",19),a(),s(26,"div",20)(27,"button",21),c(28," Iniciar sesi\xF3n "),a(),s(29,"button",22),_("click",function(){return x(o),w(n.goHome())}),c(30," Cancelar "),a()()()()()()}if(e&2){let o=ie(4),r=ie(13),l=ie(20);d(12),se("ngModel",n.username),d(2),p("ngIf",n.submitted&&r.invalid),d(5),p("type",n.passwordVisible?"text":"password"),se("ngModel",n.password),p("ngClass",Xt(10,Ar,n.submitted&&l.invalid||n.password&&!n.passwordValid())),d(3),p("ngClass",n.passwordVisible?"fa-eye":"fa-eye-slash"),d(),p("ngIf",n.password&&!n.passwordValid()),d(),p("ngIf",n.submitted&&l.invalid),d(),p("ngIf",n.errorMessage),d(2),p("disabled",!o.form.valid)}},dependencies:[U,Ne,j,$,Be,ve,Ce,Ve,rn,Xe,on],styles:["[_nghost-%COMP%]{display:block}.login-modal[_ngcontent-%COMP%]{background-color:#0009;z-index:1050}.login-modal-dialog[_ngcontent-%COMP%]{max-width:600px;margin:auto}.login-modal-content[_ngcontent-%COMP%]{background:linear-gradient(145deg,#4e2b12,#3a1d0b);color:#fdf3e7;border-radius:15px;border:1px solid #c97b4d;box-shadow:0 0 30px #c8783c4d}.login-modal-header[_ngcontent-%COMP%], .login-modal-footer[_ngcontent-%COMP%]{border:none;background:transparent;padding:1rem 2rem}.login-modal-title[_ngcontent-%COMP%]{font-size:2.2rem;font-weight:700;color:#fc9;text-shadow:1px 1px 4px #000;text-align:center;width:100%}.login-btn-close[_ngcontent-%COMP%]{background:none;border:none;color:#fff;font-size:1.5rem;margin-left:auto}.login-modal-body[_ngcontent-%COMP%]{padding:2rem 2.5rem}.login-form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center;position:relative;margin-bottom:1.5rem}.login-form-label[_ngcontent-%COMP%]{display:inline-block;width:100%;max-width:300px;margin-bottom:.4rem;color:#ffcc80;font-weight:500;text-align:center}.input-wrapper[_ngcontent-%COMP%]{position:relative;width:100%;max-width:300px}.login-form-control[_ngcontent-%COMP%]{width:100%;max-width:300px;padding:.8rem 2.5rem .8rem .8rem;background-color:#2e1a0f;border:1px solid #6a3a21;color:#fff6e5;border-radius:8px;font-size:1.2rem}.login-form-control[_ngcontent-%COMP%]::placeholder{color:#cba98b;font-style:italic}.login-form-control[_ngcontent-%COMP%]:focus{border-color:#ffa366;box-shadow:0 0 10px #ff996680}.login-password-toggle[_ngcontent-%COMP%]{position:absolute;top:50%;right:.8rem;transform:translateY(-50%);cursor:pointer;z-index:10;color:#ffddb3;font-size:1.5rem;transition:color .3s ease}.login-password-toggle[_ngcontent-%COMP%]:hover{color:#ffb366}.login-invalid-feedback[_ngcontent-%COMP%]{font-size:.9rem;color:#ff5e5e;margin-top:.4rem;max-width:300px;word-wrap:break-word;text-align:center}.login-error-message[_ngcontent-%COMP%]{border:1px solid #ff4d4d;background-color:#ff4d4d1a;color:#faa;font-weight:700;margin-top:1rem;padding:.6rem 1rem;border-radius:6px}.login-modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1rem;flex-wrap:wrap}@media (max-width: 576px){.login-modal-footer[_ngcontent-%COMP%]{flex-direction:column;align-items:center}}.login-btn-login[_ngcontent-%COMP%], .login-btn-cancel[_ngcontent-%COMP%]{padding:.8rem 2.2rem;font-size:1.2rem;border-radius:50px;font-weight:700;transition:.3s ease;border:none}.login-btn-login[_ngcontent-%COMP%]{background-color:#f4a261;color:#2b160a}.login-btn-login[_ngcontent-%COMP%]:hover{background-color:#ffa366}.login-btn-cancel[_ngcontent-%COMP%]{background-color:#5c3b28;color:#fbe9d0}.login-btn-cancel[_ngcontent-%COMP%]:hover{background-color:#7a4a30}"]})};function Ur(i,t){if(i&1){let e=V();s(0,"div",21)(1,"div",22)(2,"h2"),c(3),a(),s(4,"button",23),_("click",function(){x(e);let o=g();return w(o.closeSuccessMessage())}),c(5,"Cerrar"),a()()()}if(i&2){let e=g();d(3),A(e.successMessage)}}function zr(i,t){if(i&1&&(s(0,"div",24),P(1,"img",25),a()),i&2){let e=t.$implicit;d(),p("src",e.photo_url,Oe)("alt",e.title||"Foto subida")}}function Nr(i,t){if(i&1){let e=V();s(0,"div",26)(1,"app-login",27),_("cerrar",function(){x(e);let o=g();return w(o.cerrarLogin())}),a()()}}var ln=class i{constructor(t,e,n,o){this.router=t;this.route=e;this.http=n;this.photoService=o}showLoginModal=!1;successMessage=null;isLoginVisible=!1;recentPhotos=[];ngOnInit(){let t=history.state;t?.message&&(this.successMessage=t.message),this.loadRecentPhotos()}loadRecentPhotos(){this.photoService.getFotosAprobadasPaginated(1,6).subscribe({next:t=>{let e=t.photos||[];e.forEach(n=>{n.photo_url=`${Pe.apiUrl}/${n.photo_url}`}),this.recentPhotos=e.slice(0,4)},error:t=>{console.error("Error al cargar las fotos recientes",t)}})}closeSuccessMessage(){this.successMessage=null}mostrarLogin(){this.isLoginVisible=!0}cerrarLogin(){this.isLoginVisible=!1}goToGallery(){this.router.navigate(["/gallery"])}goToRegister(){this.router.navigate(["/register"])}static \u0275fac=function(e){return new(e||i)(v(I),v(Ze),v(gt),v(qe))};static \u0275cmp=k({type:i,selectors:[["app-home"]],decls:31,vars:3,consts:[[1,"urban-hero","container-fluid","position-relative","py-5"],[1,"urban-buttons-top","d-flex","justify-content-end","gap-2","px-4","position-absolute","top-0","end-0","mt-4","z-3"],[1,"urban-btn","urban-login",3,"click"],[1,"urban-btn","urban-register",3,"click"],[1,"urban-hero-text-wrapper"],[1,"urban-hero-text","mx-auto","px-3"],[1,"urban-brand-text"],[1,"urban-brand-title","mt-4"],[2,"font-size","0.6em","vertical-align","super"],[1,"urban-title"],[1,"urban-subtitle"],[1,"urban-instructions-container","py-5"],[1,"container","text-center"],[1,"urban-instructions-text"],["class","urban-success-overlay",4,"ngIf"],[1,"urban-gallery","py-4"],[1,"urban-section-title"],[1,"urban-gallery-grid"],["class","urban-gallery-item",4,"ngFor","ngForOf"],[1,"urban-btn","gallery-btn","mt-3",3,"click"],["class","urban-login-overlay",4,"ngIf"],[1,"urban-success-overlay"],[1,"urban-success-box"],[1,"urban-btn","close-btn",3,"click"],[1,"urban-gallery-item"],[3,"src","alt"],[1,"urban-login-overlay"],[3,"cerrar"]],template:function(e,n){e&1&&(s(0,"section",0)(1,"div",1)(2,"button",2),_("click",function(){return n.mostrarLogin()}),c(3,"Iniciar sesi\xF3n"),a(),s(4,"button",3),_("click",function(){return n.goToRegister()}),c(5,"Registrarse"),a()(),s(6,"div",4)(7,"div",5)(8,"div",6)(9,"h1",7),c(10,"ExpressCaptureVz"),s(11,"span",8),c(12,"\xAE"),a()(),s(13,"h2",9),c(14,"Rally Fotogr\xE1fico"),a()(),s(15,"p",10),c(16,' "Captura lo extraordinario en lo cotidiano. Comparte tu visi\xF3n \xFAnica con el mundo." '),a()()()(),s(17,"section",11)(18,"div",12)(19,"p",13),c(20," Para unirte al Rally Fotogr\xE1fico debes registrarte como participante y completar tu perfil. Una vez dentro, podr\xE1s acceder a los rallies activos y subir tus fotos dentro del plazo. Cada imagen ser\xE1 revisada antes de publicarse en la galer\xEDa. \xA1No olvides votar tus favoritas! "),a()()(),h(21,Ur,6,1,"div",14),s(22,"section",15)(23,"div",12)(24,"h2",16),c(25,"Galer\xEDa destacada"),a(),s(26,"div",17),h(27,zr,2,2,"div",18),a(),s(28,"button",19),_("click",function(){return n.goToGallery()}),c(29,"Ver m\xE1s"),a()()(),h(30,Nr,2,0,"div",20)),e&2&&(d(21),p("ngIf",n.successMessage),d(6),p("ngForOf",n.recentPhotos),d(3),p("ngIf",n.isLoginVisible))},dependencies:[U,K,j,Le,nn,Mt],styles:["[_nghost-%COMP%]{display:block}body[_ngcontent-%COMP%]{font-family:Segoe UI,sans-serif;background-color:#5c2c10;color:#fdf3e7;margin:0}img[_ngcontent-%COMP%]{max-width:100%;display:block}.urban-hero[_ngcontent-%COMP%]{background:url(/images/portada2.png) no-repeat center top;background-size:cover;min-height:100vh;display:flex;justify-content:center;align-items:flex-start;position:relative;text-align:center;color:#fef5e4;padding:2rem 1rem}.urban-buttons-top[_ngcontent-%COMP%]{position:absolute;top:2rem;right:2rem;display:flex;gap:1rem;z-index:10;flex-wrap:wrap}.urban-hero-text[_ngcontent-%COMP%]{max-width:800px;padding:1rem;margin:0 auto;text-align:center}.urban-brand-title[_ngcontent-%COMP%]{font-family:Rye,cursive;font-size:4rem;color:#fef5e4;margin:0;line-height:1;margin-bottom:2rem}.urban-title[_ngcontent-%COMP%]{font-size:1.8rem;color:#fef5e4;margin-bottom:2rem;font-weight:500;text-transform:uppercase;text-shadow:2px 2px 5px #3d1c0f;line-height:1.1}.urban-subtitle[_ngcontent-%COMP%]{font-size:1.6rem;color:#fbe9d0;font-style:italic;margin-bottom:1.5rem}.urban-instructions-container[_ngcontent-%COMP%]{background-color:#8d3c1f;color:#fef5e4;padding:2rem 1rem;text-align:center}.urban-instructions-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;max-width:900px;margin:0 auto;line-height:1.6}.urban-btn[_ngcontent-%COMP%]{background-color:#8d3c1f;color:#fff2e0;border:none;padding:.7rem 1.8rem;font-size:1.1rem;font-weight:700;border-radius:6px;transition:.3s ease;cursor:pointer}.urban-btn[_ngcontent-%COMP%]:hover{background-color:#a54825}.urban-register[_ngcontent-%COMP%], .urban-login[_ngcontent-%COMP%]{background-color:#9e4d24;color:#fff6eb}.urban-register[_ngcontent-%COMP%]{margin-right:.5rem}.urban-login[_ngcontent-%COMP%]:hover, .urban-register[_ngcontent-%COMP%]:hover{background-color:#b55b30}.urban-section-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;text-shadow:#3d1c0f 1px 1px 3px;margin:1.8rem 0 1rem;color:#a54825;text-align:center}.urban-gallery-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:16px;margin:0 auto 3rem;padding:0 1rem;max-width:1200px}.urban-gallery-item[_ngcontent-%COMP%]{border-radius:10px;overflow:hidden;box-shadow:0 2px 8px #0000001a;height:200px;transition:transform .3s}.urban-gallery-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.urban-gallery-item[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.gallery-btn[_ngcontent-%COMP%]{background-color:#a54103;color:#fff;font-size:.9rem;padding:.5rem 1.2rem}.gallery-btn[_ngcontent-%COMP%]:hover{background-color:#572201}.urban-login-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000c;display:flex;justify-content:center;align-items:center;z-index:1000}.urban-success-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000000e6;display:flex;justify-content:center;align-items:center}.urban-success-box[_ngcontent-%COMP%]{background-color:#f8e4c4;padding:2.5rem 3rem;border-radius:12px;text-align:center;box-shadow:0 0 15px #000000b3}.close-btn[_ngcontent-%COMP%]{margin-top:1.5rem;background-color:#6b3d1c;color:#fff0d9}@media (max-width: 768px){.urban-hero[_ngcontent-%COMP%]{padding-top:1rem;padding-bottom:2rem;align-items:center;background-position:center 60%}.urban-buttons-top[_ngcontent-%COMP%]{flex-direction:column;gap:.8rem;align-items:flex-end}.urban-buttons-top[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:140px;font-size:1.1rem;padding:.9rem 1.2rem}.urban-hero-text[_ngcontent-%COMP%]{padding:.1rem;position:relative;top:-5rem}.urban-brand-title[_ngcontent-%COMP%]{font-size:2.6rem;margin-bottom:.5rem}.urban-title[_ngcontent-%COMP%]{font-size:1.4rem;margin-bottom:.5rem}.urban-subtitle[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:.8rem}.urban-instructions-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;padding:0 .5rem}.urban-gallery-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.gallery-btn[_ngcontent-%COMP%]{font-size:.85rem;padding:.4rem 1rem}.urban-buttons-top[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0}}@media (max-width: 480px){.urban-hero-text[_ngcontent-%COMP%]{padding:.5rem;position:relative;top:-5rem;background-position:center 60%}.urban-brand-title[_ngcontent-%COMP%]{margin-top:2rem;font-size:2.2rem}.urban-title[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:.4rem}.urban-subtitle[_ngcontent-%COMP%]{font-size:.95rem;margin-bottom:.6rem}.urban-instructions-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem}.urban-btn[_ngcontent-%COMP%]{font-size:1rem;padding:.6rem 1.2rem}.urban-buttons-top[_ngcontent-%COMP%]{align-items:center;top:1.5rem;left:0;right:0;margin:0 auto;flex-direction:column;gap:1rem}.urban-buttons-top[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:80%;max-width:250px;font-size:1.2rem;padding:1rem 1.4rem}}"]})};function Lr(i,t){if(i&1&&(s(0,"li"),c(1),a()),i&2){let e=t.$implicit;d(),A(e)}}function Vr(i,t){if(i&1&&(s(0,"div",35)(1,"ul"),h(2,Lr,2,1,"li",36),a()()),i&2){let e=g();d(2),p("ngForOf",e.errorMessages)}}function Br(i,t){i&1&&(s(0,"div",37),c(1," El nombre debe tener al menos 3 caracteres. "),a())}function qr(i,t){i&1&&(s(0,"div",37),c(1," Los apellidos deben tener al menos 3 caracteres. "),a())}function jr(i,t){if(i&1&&(s(0,"div",37),c(1),a()),i&2){let e=g();d(),R(" ",e.backendFieldErrors.email," ")}}function Gr(i,t){i&1&&(s(0,"div",37),c(1," Ingresa un correo v\xE1lido. "),a())}function Kr(i,t){i&1&&(s(0,"div",37),c(1," La fecha de nacimiento es obligatoria. "),a())}function Hr(i,t){i&1&&(s(0,"div",37),c(1," Debes tener al menos 18 a\xF1os para registrarte. "),a())}function Qr(i,t){if(i&1&&(s(0,"div",37),c(1),a()),i&2){let e=g();d(),R(" ",e.backendFieldErrors.username," ")}}function $r(i,t){i&1&&(s(0,"div",37),c(1," El nombre de usuario debe tener al menos 4 caracteres. "),a())}function Wr(i,t){i&1&&(s(0,"div"),c(1,"La contrase\xF1a es requerida."),a())}function Yr(i,t){i&1&&(s(0,"div"),c(1,"La contrase\xF1a debe tener al menos 8 caracteres."),a())}function Zr(i,t){i&1&&(s(0,"div"),c(1,"La contrase\xF1a no puede tener m\xE1s de 12 caracteres."),a())}function Xr(i,t){i&1&&(s(0,"div"),c(1," La contrase\xF1a debe tener entre 8 y 12 caracteres, incluir may\xFAsculas, min\xFAsculas, un n\xFAmero y uno de los siguientes caracteres especiales: !@#$%&* . "),a())}function Jr(i,t){if(i&1&&(s(0,"div",37),h(1,Wr,2,0,"div",38)(2,Yr,2,0,"div",38)(3,Zr,2,0,"div",38)(4,Xr,2,0,"div",38),a()),i&2){g();let e=ie(44);d(),p("ngIf",e.errors==null?null:e.errors.required),d(),p("ngIf",e.errors==null?null:e.errors.minlength),d(),p("ngIf",e.errors==null?null:e.errors.maxlength),d(),p("ngIf",e.errors==null?null:e.errors.pattern)}}function ea(i,t){i&1&&(s(0,"div",37),c(1," Las contrase\xF1as no coinciden. "),a())}function ta(i,t){i&1&&(s(0,"div",37),c(1," Debes aceptar los t\xE9rminos y condiciones para registrarte. "),a())}var dn=class i{constructor(t,e){this.router=t;this.authenticationService=e}username="";password="";confirmPassword="";email="";name="";lastName="";birthdate="";errorMessages=[];userAge=0;backendFieldErrors={};acceptTerms=!1;formSubmitted=!1;passwordVisible=!1;confirmPasswordVisible=!1;isSubmitting=!1;passwordRegex=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%&*]).{8,12}$/;validatePasswords(){this.errorMessages=[],this.password!==this.confirmPassword&&this.errorMessages.push("Las contrase\xF1as no coinciden."),this.passwordRegex.test(this.password)||this.errorMessages.push("La contrase\xF1a debe tener entre 8 y 12 caracteres, incluir may\xFAsculas, min\xFAsculas, un n\xFAmero y uno de los siguientes caracteres especiales: !@#$%^&*.")}onBirthdateChange(){let t=new Date(this.birthdate),e=new Date;this.userAge=e.getFullYear()-t.getFullYear();let n=e.getMonth()-t.getMonth();(n<0||n===0&&e.getDate()<t.getDate())&&this.userAge--,this.userAge<18&&this.errorMessages.push("Debes tener al menos 18 a\xF1os para registrarte.")}togglePasswordVisibility(){this.passwordVisible=!this.passwordVisible}toggleConfirmPasswordVisibility(){this.confirmPasswordVisible=!this.confirmPasswordVisible}get isFormValid(){return this.password===this.confirmPassword&&this.password.length>=8&&this.username.length>=3&&this.name.length>=2&&this.lastName.length>=2&&this.userAge>=18&&this.acceptTerms}cancel(){this.router.navigate(["/home"])}onSubmit(t){if(this.isSubmitting=!0,this.formSubmitted=!0,this.errorMessages=[],this.backendFieldErrors={},!t.valid||!this.acceptTerms){this.isSubmitting=!1;return}if(this.validatePasswords(),this.errorMessages.length>0){this.isSubmitting=!1;return}this.authenticationService.register(this.email,this.username,this.password,this.name,this.lastName,this.birthdate).subscribe(e=>{if(this.isSubmitting=!1,console.log("Respuesta del backend:",e),typeof e?.error=="string"){e.error.includes("correo")?this.backendFieldErrors.email=e.error:e.error.includes("usuario")?this.backendFieldErrors.username=e.error:this.errorMessages.push(e.error);return}e.message==="Usuario creado correctamente"&&this.router.navigate(["/"],{state:{message:"Usuario registrado con \xE9xito. Puedes iniciar sesi\xF3n cuando quieras."}})},e=>{this.isSubmitting=!1,this.errorMessages.push("Ocurri\xF3 un error al registrar el usuario. Int\xE9ntalo m\xE1s tarde."),console.error(e)})}static \u0275fac=function(e){return new(e||i)(v(I),v(me))};static \u0275cmp=k({type:i,selectors:[["app-register"]],decls:65,vars:25,consts:[["registerForm","ngForm"],["nameField","ngModel"],["lastNameField","ngModel"],["emailField","ngModel"],["birthdateField","ngModel"],["usernameField","ngModel"],["passwordField","ngModel"],["confirmPasswordField","ngModel"],[1,"register-container"],[3,"ngSubmit"],["class","error-summary",4,"ngIf"],[1,"form-group"],["for","name"],["type","text","id","name","name","name","required","","minlength","3",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["for","lastName"],["type","text","id","lastName","name","lastName","required","","minlength","3",3,"ngModelChange","ngModel"],["for","email"],["type","email","id","email","name","email","required","","email","",3,"ngModelChange","ngModel"],["for","birthdate"],["type","date","id","birthdate","name","birthdate","required","",3,"ngModelChange","change","ngModel"],["for","username"],["type","text","id","username","name","username","required","","minlength","4",3,"ngModelChange","ngModel"],[1,"form-group","password-group"],["for","password"],[1,"input-with-icon"],["id","password","name","password","required","","minlength","8","maxlength","12","pattern","^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[!@#$%^&*]).{8,12}$",3,"ngModelChange","type","ngModel"],[1,"fa",3,"click","ngClass"],["for","confirmPassword"],["id","confirmPassword","name","confirmPassword","required","",3,"ngModelChange","type","ngModel"],[1,"form-group","checkbox-group"],[1,"checkbox-label"],["type","checkbox","name","acceptTerms","required","",3,"ngModelChange","ngModel"],["type","submit",3,"disabled"],["type","button",1,"cancel-button",3,"click"],[1,"error-summary"],[4,"ngFor","ngForOf"],[1,"error-message"],[4,"ngIf"]],template:function(e,n){if(e&1){let o=V();s(0,"div",8)(1,"form",9,0),_("ngSubmit",function(){x(o);let l=ie(2);return w(n.onSubmit(l))}),s(3,"h2"),c(4,"Registro de Usuario"),a(),h(5,Vr,3,1,"div",10),s(6,"div",11)(7,"label",12),c(8,"Nombre"),a(),s(9,"input",13,1),ce("ngModelChange",function(l){return x(o),le(n.name,l)||(n.name=l),w(l)}),a(),h(11,Br,2,0,"div",14),a(),s(12,"div",11)(13,"label",15),c(14,"Apellidos"),a(),s(15,"input",16,2),ce("ngModelChange",function(l){return x(o),le(n.lastName,l)||(n.lastName=l),w(l)}),a(),h(17,qr,2,0,"div",14),a(),s(18,"div",11)(19,"label",17),c(20,"Correo electr\xF3nico"),a(),s(21,"input",18,3),ce("ngModelChange",function(l){return x(o),le(n.email,l)||(n.email=l),w(l)}),a(),h(23,jr,2,1,"div",14)(24,Gr,2,0,"div",14),a(),s(25,"div",11)(26,"label",19),c(27,"Fecha de nacimiento"),a(),s(28,"input",20,4),ce("ngModelChange",function(l){return x(o),le(n.birthdate,l)||(n.birthdate=l),w(l)}),_("change",function(){return x(o),w(n.onBirthdateChange())}),a(),h(30,Kr,2,0,"div",14)(31,Hr,2,0,"div",14),a(),s(32,"div",11)(33,"label",21),c(34,"Usuario"),a(),s(35,"input",22,5),ce("ngModelChange",function(l){return x(o),le(n.username,l)||(n.username=l),w(l)}),a(),h(37,Qr,2,1,"div",14)(38,$r,2,0,"div",14),a(),s(39,"div",23)(40,"label",24),c(41,"Contrase\xF1a"),a(),s(42,"div",25)(43,"input",26,6),ce("ngModelChange",function(l){return x(o),le(n.password,l)||(n.password=l),w(l)}),a(),s(45,"i",27),_("click",function(){return x(o),w(n.togglePasswordVisibility())}),a()(),h(46,Jr,5,4,"div",14),a(),s(47,"div",23)(48,"label",28),c(49,"Confirmar Contrase\xF1a"),a(),s(50,"div",25)(51,"input",29,7),ce("ngModelChange",function(l){return x(o),le(n.confirmPassword,l)||(n.confirmPassword=l),w(l)}),a(),s(53,"i",27),_("click",function(){return x(o),w(n.toggleConfirmPasswordVisibility())}),a()(),h(54,ea,2,0,"div",14),a(),s(55,"div",30)(56,"label",31)(57,"input",32),ce("ngModelChange",function(l){return x(o),le(n.acceptTerms,l)||(n.acceptTerms=l),w(l)}),a(),s(58,"span"),c(59," Acepto los t\xE9rminos y condiciones. "),a()(),h(60,ta,2,0,"div",14),a(),s(61,"button",33),c(62,"Registrar"),a(),s(63,"button",34),_("click",function(){return x(o),w(n.cancel())}),c(64,"Cancelar"),a()()()}if(e&2){let o=ie(10),r=ie(16),l=ie(22),m=ie(29),u=ie(36),f=ie(44),b=ie(52);d(5),p("ngIf",n.errorMessages.length),d(4),se("ngModel",n.name),d(2),p("ngIf",o.invalid&&o.touched),d(4),se("ngModel",n.lastName),d(2),p("ngIf",r.invalid&&r.touched),d(4),se("ngModel",n.email),d(2),p("ngIf",n.backendFieldErrors.email),d(),p("ngIf",l.invalid&&l.touched),d(4),se("ngModel",n.birthdate),d(2),p("ngIf",m.invalid&&m.touched),d(),p("ngIf",n.userAge>0&&n.userAge<18&&m.touched),d(4),se("ngModel",n.username),d(2),p("ngIf",n.backendFieldErrors.username),d(),p("ngIf",u.invalid&&u.touched),d(5),p("type",n.passwordVisible?"text":"password"),se("ngModel",n.password),d(2),p("ngClass",n.passwordVisible?"fa-eye":"fa-eye-slash"),d(),p("ngIf",f.touched&&f.invalid),d(5),p("type",n.confirmPasswordVisible?"text":"password"),se("ngModel",n.confirmPassword),d(2),p("ngClass",n.confirmPasswordVisible?"fa-eye":"fa-eye-slash"),d(),p("ngIf",b.touched&&n.confirmPassword!==n.password),d(3),se("ngModel",n.acceptTerms),d(3),p("ngIf",!n.acceptTerms&&n.formSubmitted),d(),p("disabled",!n.isFormValid)}},dependencies:[U,Ne,K,j,$,Be,ve,oo,Ce,Ve,rn,so,lo,co,ro,ao,Xe,on],styles:[`body{background-color:#ecd0a2!important;margin:0;padding:0}h2{color:#4e2b12;text-align:center;font-size:2rem;margin-bottom:1rem;text-shadow:1px 1px 3px #f4efef}.urban-login-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000c;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);display:flex;justify-content:center;align-items:center;z-index:1000}.register-modal-container{background:linear-gradient(145deg,#4e2b12,#3a1d0b);padding:2.5rem;border-radius:16px;width:90%;max-width:300px;color:#fff6e5;box-shadow:0 0 30px #0006}.register-modal-container{background:linear-gradient(145deg,#4e2b12,#3a1d0b);padding:2.5rem;border-radius:16px;width:90%;max-width:600px;color:#fff6e5;box-shadow:0 0 30px #0006}.register-container{max-width:480px;margin:2rem auto;padding:1.5rem 2rem;background-color:#3a1d0b;border-radius:15px;color:#fff6e5;box-shadow:0 0 20px #00000040;font-family:Segoe UI,sans-serif;font-size:.95rem}.register-title{text-align:center;color:#fc9;margin-bottom:rem;font-size:1.62rem;text-shadow:1px 1px 3px #000}.form-group{margin-bottom:1.5rem}label{display:block;font-weight:600;margin-bottom:.4rem;color:#ffe0bd}input{width:100%;padding:.6rem .8rem;border-radius:8px;border:1px solid #805333;background-color:#2e1a0f;color:#fff6e5;font-size:.95rem}input:focus{outline:none;border-color:#ffa366;box-shadow:0 0 8px #ffa36680}.input-with-icon{position:relative}.input-with-icon i{position:absolute;top:50%;right:12px;transform:translateY(-50%);color:#ffddb3;cursor:pointer}.input-with-icon i:hover{color:#ffa366}.error-message{color:#ff8a80;font-size:.85rem;margin-top:.3rem}.error-summary{background-color:#5c2c10;border-left:4px solid #ff5e5e;padding:1rem;margin-bottom:1.5rem;border-radius:8px;color:#faa;font-size:.9rem}.button-group{display:flex;flex-direction:column;gap:.8rem}.register-btn{background-color:#f4a261;color:#2b160a;border:none;border-radius:50px;padding:.9rem;font-size:1.1rem;font-weight:700;cursor:pointer;transition:background-color .3s ease}.register-btn:hover{background-color:#ffa366}button[type=submit]{background-color:#f4a261;color:#2b160a;border:none;border-radius:50px;padding:.9rem 1.6rem;font-size:1.1rem;font-weight:700;cursor:pointer;transition:background-color .3s ease,box-shadow .3s ease;box-shadow:0 4px 8px #f4a26166}button[type=submit]:hover:not(:disabled){background-color:#ffa366;box-shadow:0 6px 12px #ffa36699}button[type=submit]:disabled{background-color:#d4b28a;cursor:not-allowed;box-shadow:none;color:#6e4c2a}button.cancel-button{background-color:#5c3b28;color:#fff0e0;border:none;border-radius:50px;padding:.9rem 1.6rem;font-size:1.1rem;font-weight:700;cursor:pointer;transition:background-color .3s ease,box-shadow .3s ease;box-shadow:0 4px 8px #5c3b2866;margin-left:1rem}button.cancel-button:hover{background-color:#7a4a30;box-shadow:0 6px 12px #7a4a3099}.checkbox-group{margin:15px 0;font-size:.95rem}.checkbox-label{display:flex;align-items:center;gap:8px}.checkbox-label input[type=checkbox]{accent-color:brown;width:18px;height:18px}.checkbox-label a{color:#8b4513;text-decoration:underline}.checkbox-group .error-message{color:#b22222;font-size:.85rem;margin-top:4px}
`],encapsulation:2})};var na=i=>({"winner-photo":i});function ia(i,t){i&1&&(s(0,"div",17),P(1,"i",18),c(2," Ganadora "),a())}function oa(i,t){if(i&1){let e=V();s(0,"div",10)(1,"img",11),_("click",function(){let o=x(e).$implicit,r=g(2);return w(r.openImageModal(o.photo_url))}),a(),h(2,ia,3,0,"div",12),s(3,"div",13)(4,"p",14),c(5),a(),s(6,"p",15),c(7),a(),s(8,"button",16),_("click",function(){let o=x(e).$implicit,r=g(2);return w(r.vote(o.id))}),c(9),a()()()}if(i&2){let e=t.$implicit,n=g().$implicit,o=g();p("ngClass",Xt(7,na,o.isWinner(e,n))),d(),p("src",e.photo_url,Oe),d(),p("ngIf",o.isWinner(e,n)),d(3),R("\u{1F4F8} ",e.autor,""),d(2),R("\u2764\uFE0F ",e.votos||0," votos"),d(),p("disabled",o.hasVoted(e.id)||o.hasRallyEnded(n)),d(),R(" ",o.hasRallyEnded(n)?"Rally finalizado":o.hasVoted(e.id)?"Ya votaste":"Votar"," ")}}function ra(i,t){if(i&1&&(s(0,"div",6)(1,"h3"),c(2),a(),s(3,"p",7),c(4),G(5,"date"),G(6,"date"),a(),s(7,"div",8),h(8,oa,10,9,"div",9),a()()),i&2){let e=t.$implicit;d(2),A(e.title),d(2),ut(" \u{1F5D3}\uFE0F Del ",te(5,4,e.start_date,"dd/MM/yyyy")," al ",te(6,7,e.end_date,"dd/MM/yyyy")," "),d(4),p("ngForOf",e.photos)}}function aa(i,t){if(i&1){let e=V();s(0,"div",19),_("click",function(){x(e);let o=g();return w(o.closeImageModal())}),s(1,"span",20),c(2,"\xD7"),a(),P(3,"img",21),a()}if(i&2){let e=g();d(3),p("src",e.imagenModalUrl,Oe)}}var mn=class i{constructor(t,e,n,o){this.photoService=t;this.router=e;this.route=n;this.sweetAlert=o}rallies=[];votedPhotos=new Set;currentPage=1;limit=100;totalPhotos=0;imagenModalVisible=!1;imagenModalUrl=null;ngOnInit(){this.loadRallies()}loadRallies(){this.photoService.getFotosAprobadasPaginated(this.currentPage,this.limit).subscribe({next:t=>{console.log("Fotos aprobadas:",t),this.rallies=this.groupPhotosByRally(t.photos||[]),this.totalPhotos=t.totalPhotos||0,this.loadVotedPhotos(),this.setWinners()},error:t=>{console.error("Error al cargar fotos aprobadas:",t)}})}openImageModal(t){this.imagenModalUrl=t,this.imagenModalVisible=!0}closeImageModal(){this.imagenModalVisible=!1,this.imagenModalUrl=null}setWinners(){this.rallies.forEach(t=>{let e=0,n=[];t.photos.forEach(o=>{o.votos>e?(e=o.votos,n=[o]):o.votos===e&&n.push(o)}),e>0?t.winnerPhoto=n:t.winnerPhoto=[]})}isWinner(t,e){return e.winnerPhoto?.some(n=>n.id===t.id)??!1}hasRallyEnded(t){let e=new Date,n=new Date(t.end_date);return e>n}groupPhotosByRally(t){let e={};return t.forEach(n=>{n.photo_url=`${Pe.apiUrl}/${n.photo_url}`;let o=n.rally_id;e[o]||(e[o]={id:o,title:n.rally_title||"Rally sin nombre",start_date:n.rally_start_date,end_date:n.rally_end_date,photos:[]}),e[o].photos.push(n)}),Object.values(e)}loadVotedPhotos(){let t=localStorage.getItem("userId");if(t){let e=localStorage.getItem(`userVotedPhotos_${t}`);e&&(this.votedPhotos=new Set(JSON.parse(e)))}}hasVoted(t){return this.votedPhotos.has(t)}vote(t){let e=localStorage.getItem("userId"),n=parseInt(e||"",10);if(!e||isNaN(n)){this.sweetAlert.info("Debes iniciar sesi\xF3n para votar.");return}if(this.hasVoted(t)){this.sweetAlert.info("Ya has votado por esta foto.");return}this.photoService.vote(t,n).subscribe({next:o=>{console.log("Voto registrado correctamente:",o);let r=this.findPhotoById(t);r&&(r.votos=(r.votos||0)+1),this.votedPhotos.add(t),localStorage.setItem(`userVotedPhotos_${e}`,JSON.stringify(Array.from(this.votedPhotos))),this.sweetAlert.success("\xA1Voto registrado!","\xA1Gracias por participar!")},error:o=>{console.error("Error al votar:",o),this.sweetAlert.error("Error al votar: "+(o.error?.error||"Intenta m\xE1s tarde."))}})}findPhotoById(t){for(let e of this.rallies){let n=e.photos.find(o=>o.id===t);if(n)return n}return null}nextPage(){this.currentPage*this.limit<this.totalPhotos&&(this.currentPage++,this.loadRallies())}prevPage(){this.currentPage>1&&(this.currentPage--,this.loadRallies())}hasMorePhotos(){return this.currentPage*this.limit<this.totalPhotos}goBackToHome(){this.route.snapshot.queryParamMap.get("from")==="dashboard"?this.router.navigate(["/user/dashboard"]):this.router.navigate(["/home"])}static \u0275fac=function(e){return new(e||i)(v(qe),v(I),v(Ze),v(Te))};static \u0275cmp=k({type:i,selectors:[["app-gallery"]],decls:9,vars:2,consts:[[1,"app-gallery"],[1,"app-gallery-content"],["class","rally-card",4,"ngFor","ngForOf"],["class","image-modal",3,"click",4,"ngIf"],[1,"button-container"],[1,"back-button",3,"click"],[1,"rally-card"],[1,"rally-dates"],[1,"photos-grid"],["class","photo-card",3,"ngClass",4,"ngFor","ngForOf"],[1,"photo-card",3,"ngClass"],["alt","Foto del rally",2,"cursor","pointer",3,"click","src"],["class","ganadora-label",4,"ngIf"],[1,"photo-info"],[1,"author"],[1,"votos"],[1,"btn-vote",3,"click","disabled"],[1,"ganadora-label"],[1,"fas","fa-trophy",2,"color","goldenrod"],[1,"image-modal",3,"click"],[1,"close"],["alt","Imagen ampliada",1,"modal-content",3,"src"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"div",1)(2,"h2"),c(3,"Galer\xEDa del Rally"),a(),h(4,ra,9,10,"div",2),a(),h(5,aa,4,1,"div",3),s(6,"div",4)(7,"button",5),_("click",function(){return n.goBackToHome()}),c(8,"Volver"),a()()()),e&2&&(d(4),p("ngForOf",n.rallies),d(),p("ngIf",n.imagenModalVisible))},dependencies:[U,Ne,K,j,de],styles:['@font-face{font-family:Merriweather;font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v32/u-4D0qyriQwlOrhSvowK_l5UcA6zuSYEqOzpPe3HOZJ5eX1WtLaQwmYiScCmDxhtNOKl8yDr3icaGV31GvU.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Merriweather;font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v32/u-4D0qyriQwlOrhSvowK_l5UcA6zuSYEqOzpPe3HOZJ5eX1WtLaQwmYiScCmDxhtNOKl8yDr3icaEF31GvU.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Merriweather;font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v32/u-4D0qyriQwlOrhSvowK_l5UcA6zuSYEqOzpPe3HOZJ5eX1WtLaQwmYiScCmDxhtNOKl8yDr3icaG131GvU.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Merriweather;font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v32/u-4D0qyriQwlOrhSvowK_l5UcA6zuSYEqOzpPe3HOZJ5eX1WtLaQwmYiScCmDxhtNOKl8yDr3icaGl31GvU.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Merriweather;font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v32/u-4D0qyriQwlOrhSvowK_l5UcA6zuSYEqOzpPe3HOZJ5eX1WtLaQwmYiScCmDxhtNOKl8yDr3icaFF31.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}[_nghost-%COMP%]{font-family:Merriweather,serif;background-size:cover;min-height:80vh;color:#5c3a1e}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{margin:0;padding:0;height:100%}.app-gallery[_ngcontent-%COMP%]{background:url(/images/fondo3.jpg) no-repeat center center;background-size:cover;min-height:100vh;padding:2rem;color:#5c3a1e}.app-gallery-content[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto;background:#fdf7edcc;border-radius:10px;padding:1.5rem 2rem;margin-bottom:2rem;box-shadow:0 4px 12px #7b4f244d}.app-gallery[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:3rem;margin-bottom:1.5rem;color:#4a2c14;text-shadow:1px 1px 2px #d4a373}.rally-card[_ngcontent-%COMP%]{margin-bottom:2rem;border:1px solid #e0c9a6;border-radius:10px;padding:1rem 1.5rem;background:#f2d388;box-shadow:0 2px 8px #8b45131a}.rally-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .3rem;font-size:1.8rem;font-weight:700;color:#5c3a1e}.rally-dates[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:1rem;font-weight:600;color:#6e4b19}.photos-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:1rem;justify-items:center}.photo-card[_ngcontent-%COMP%]{background:#fffaf5;border-radius:10px;box-shadow:0 2px 8px #8b451326;overflow:hidden;width:220px;display:flex;flex-direction:column;transition:transform .3s ease;cursor:pointer}.photo-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 20px #8b45134d}.photo-card.winner-photo[_ngcontent-%COMP%]{border:5px solid rgb(245,23,23);box-shadow:0 6px 15px #dbe72e80;background:#fff8e1;transition:transform .3s ease,background-color .3s ease}.ganadora-label[_ngcontent-%COMP%]{font-weight:700;color:#daa520;margin-bottom:5px;display:flex;align-items:center;justify-content:center;gap:5px;font-size:1rem;text-transform:uppercase;-webkit-user-select:none;user-select:none}.photo-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;display:block;border-bottom:1px solid #d4a373}.photo-info[_ngcontent-%COMP%]{padding:.8rem 1rem;text-align:center;font-size:.9rem;color:#5c3a1e;flex-grow:1;display:flex;flex-direction:column;justify-content:space-between}.photo-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.3rem 0;font-weight:600}.btn-vote[_ngcontent-%COMP%]{margin-top:.5rem;background-color:sienna;border:none;color:#fff;padding:.5rem;border-radius:6px;font-weight:700;cursor:pointer;transition:background-color .3s ease}.btn-vote[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed;color:#666}.btn-vote[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#8b4513}.button-container[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.back-button[_ngcontent-%COMP%]{background-color:#8b4513;color:#fff;border:none;padding:.6rem 1.2rem;border-radius:6px;cursor:pointer;font-size:1rem;font-weight:700;transition:background-color .3s ease}.back-button[_ngcontent-%COMP%]:hover{background-color:sienna}.image-modal[_ngcontent-%COMP%]{position:fixed;z-index:9999;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:#000c;display:flex;justify-content:center;align-items:center;cursor:zoom-out}.image-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{max-width:90%;max-height:90vh;border-radius:10px;box-shadow:0 4px 20px #00000080;object-fit:contain;-webkit-user-select:none;user-select:none}.image-modal[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:fixed;top:20px;right:30px;color:#fff;font-size:3rem;font-weight:700;cursor:pointer;-webkit-user-select:none;user-select:none;transition:color .3s ease;z-index:10000}.image-modal[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover{color:#d4a373}@media (max-width: 600px){.app-gallery[_ngcontent-%COMP%]{padding:1rem}.app-gallery[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem}.rally-card[_ngcontent-%COMP%]{padding:1rem}.rally-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.4rem}.rally-dates[_ngcontent-%COMP%]{font-size:.9rem}.photos-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}.photo-card[_ngcontent-%COMP%]{width:100%}.photo-info[_ngcontent-%COMP%]{font-size:.85rem;padding:.6rem .8rem}.btn-vote[_ngcontent-%COMP%]{padding:.4rem;font-size:.9rem}.pagination-btn[_ngcontent-%COMP%]{padding:.4rem .8rem;font-size:.9rem}.back-button[_ngcontent-%COMP%]{width:100%}}@media (max-width: 600px){.image-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{max-width:95%;max-height:80vh}.image-modal[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{font-size:2.5rem;top:10px;right:15px}}@media (min-width: 601px) and (max-width: 900px){.photos-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.rally-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.6rem}.btn-vote[_ngcontent-%COMP%]{font-size:1rem}}@media (min-width: 901px){.photos-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}']})};function sa(i,t){if(i&1&&(s(0,"li",3)(1,"div",4),P(2,"i"),s(3,"div",5)(4,"h3"),c(5),a(),s(6,"p"),c(7),a(),s(8,"p"),c(9," Inicio: "),s(10,"span"),c(11),G(12,"date"),a(),c(13," - Fin: "),s(14,"span"),c(15),G(16,"date"),a()()()()()),i&2){let e=t.$implicit,n=g();d(2),ge(n.getIconClassByTheme(e.theme)+" icono-tema-preview"),d(3),A(e.title),d(2),A(e.description),d(4),A(te(12,6,e.start_date,"dd/MM/yyyy")),d(4),A(te(16,9,e.end_date,"dd/MM/yyyy"))}}var pn=class i{constructor(t,e){this.rallyService=t;this.router=e}ralliesProximos=[];ngOnInit(){this.rallyService.getAllRallies().subscribe(t=>{let e=new Date;this.ralliesProximos=t.filter(n=>new Date(n.start_date)>e),console.log("Rallies pr\xF3ximos:",this.ralliesProximos)})}getIconClassByTheme(t){if(!t)return"fa-solid fa-question";switch(t.trim().toLowerCase()){case"fotografia":return"fa-solid fa-camera-retro";case"naturaleza":return"fa-solid fa-tree";case"deporte":return"fa-solid fa-person-hiking";case"animales":return"fa-solid fa-paw";case"comida":return"fa-solid fa-utensils";case"mar y playa":return"fa-solid fa-umbrella-beach";case"paisaje urbano":return"fa-solid fa-city";default:return"fa-solid fa-question"}}volverAlPanelUsuario(){this.router.navigate(["user/dashboard"])}static \u0275fac=function(e){return new(e||i)(v(Fe),v(I))};static \u0275cmp=k({type:i,selectors:[["app-proximos-rallies"]],decls:6,vars:1,consts:[["class","card horizontal-card p-3 mb-3",4,"ngFor","ngForOf"],[1,"button-container"],[1,"btn",3,"click"],[1,"card","horizontal-card","p-3","mb-3"],[1,"d-flex","align-items-center"],[1,"flex-grow-1"]],template:function(e,n){e&1&&(s(0,"h2"),c(1,"Pr\xF3ximos Rallies"),a(),h(2,sa,17,12,"li",0),s(3,"div",1)(4,"button",2),_("click",function(){return n.volverAlPanelUsuario()}),c(5,"Volver"),a()()),e&2&&(d(2),p("ngForOf",n.ralliesProximos))},dependencies:[U,K,de,$],styles:[".horizontal-card[_ngcontent-%COMP%]{background:#f2d388;border-radius:12px;box-shadow:0 6px 14px #d2a04673;color:#4b2e05;transition:transform .3s ease;cursor:pointer;margin-left:2rem;margin-right:2rem;margin-top:2rem}h2[_ngcontent-%COMP%]{text-align:center;margin-top:1rem;color:#4b2e05;font-size:2rem;font-weight:700;text-shadow:1px 1px 1px #7b4f24}.horizontal-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 20px #d2a04699}.horizontal-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;font-weight:700;text-shadow:1px 1px 2px #7b4f24}p[_ngcontent-%COMP%]{font-size:1.2rem;color:#4b2e05}.horizontal-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;color:#7b4f24}i[_ngcontent-%COMP%], .material-symbols-outlined[_ngcontent-%COMP%]{font-size:3rem!important;margin-right:1rem;vertical-align:middle;color:#5c2c10!important}.btn[_ngcontent-%COMP%]{background-color:sienna;color:#fff;border:none;padding:.6rem 1.2rem;border-radius:5px;cursor:pointer;transition:background-color .3s ease;font-size:1rem;font-weight:700;text-align:center;display:block;margin:1rem auto}.btn[_ngcontent-%COMP%]:hover{background-color:#8b4513}.btn[_ngcontent-%COMP%]   back[_ngcontent-%COMP%]{background-color:#8b4513;color:#fff;border:none;padding:.6rem 1.2rem;border-radius:5px;cursor:pointer;transition:background-color .3s ease;font-size:1rem;font-weight:700;text-align:center}@media (max-width: 600px){.horizontal-card[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;margin:1rem;padding:1rem}i[_ngcontent-%COMP%], .material-symbols-outlined[_ngcontent-%COMP%]{font-size:2.5rem!important;margin-bottom:.5rem}.horizontal-card[_ngcontent-%COMP%] > div.flex-grow-1[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem}.horizontal-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem}.horizontal-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}.btn[_ngcontent-%COMP%], .cancelar-btn[_ngcontent-%COMP%], .apuntarme-btn[_ngcontent-%COMP%]{width:100%;min-width:unset;font-size:1.1rem;padding:.7rem 0}}@media (min-width: 601px) and (max-width: 900px){.horizontal-card[_ngcontent-%COMP%]{margin:1.5rem 1rem;padding:1rem 1.2rem}i[_ngcontent-%COMP%], .material-symbols-outlined[_ngcontent-%COMP%]{font-size:2.8rem!important}.horizontal-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.6rem}.horizontal-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem}.btn[_ngcontent-%COMP%], .cancelar-btn[_ngcontent-%COMP%], .apuntarme-btn[_ngcontent-%COMP%]{min-width:140px;font-size:1rem;padding:.6rem 1rem}}@media (min-width: 901px){.horizontal-card[_ngcontent-%COMP%]{margin:2rem;padding:1.2rem 1.5rem}i[_ngcontent-%COMP%], .material-symbols-outlined[_ngcontent-%COMP%]{font-size:3rem!important}.horizontal-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.8rem}.horizontal-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem}.btn[_ngcontent-%COMP%], .cancelar-btn[_ngcontent-%COMP%], .apuntarme-btn[_ngcontent-%COMP%]{min-width:130px}}"]})};function la(i,t){if(i&1){let e=V();he(0),s(1,"button",10),_("click",function(){x(e);let o=g().$implicit,r=g(2);return w(r.alternarInscripcion(o.id))}),c(2),a(),_e()}if(i&2){let e=g().$implicit,n=g(2);d(),p("disabled",n.haCompletadoRally(e.id)),d(),R(" ",n.haCompletadoRally(e.id)?"Inscripci\xF3n completada":"Anular Inscripci\xF3n"," ")}}function ca(i,t){if(i&1){let e=V();s(0,"button",11),_("click",function(){x(e);let o=g().$implicit,r=g(2);return w(r.alternarInscripcion(o.id))}),c(1),a()}if(i&2){let e=g().$implicit,n=g(2);p("disabled",n.haCompletadoRally(e.id)),d(),R(" ",n.haCompletadoRally(e.id)?"Inscripci\xF3n completada":"Inscribirse"," ")}}function da(i,t){if(i&1&&(s(0,"li",6)(1,"div",7),P(2,"i"),s(3,"div",8)(4,"h3"),c(5),a(),s(6,"p"),c(7),a(),s(8,"p"),c(9," Inicio: "),s(10,"span"),c(11),G(12,"date"),a(),c(13," - Fin: "),s(14,"span"),c(15),G(16,"date"),a()()()(),s(17,"div",9),h(18,la,3,2,"ng-container",2)(19,ca,2,2,"ng-template",null,1,Wn),a()()),i&2){let e=t.$implicit,n=ie(20),o=g(2);d(2),ge(o.getIconClassByTheme(e.theme)+" icono-tema-preview fs-2 text-primary"),d(3),A(e.title),d(2),A(e.description),d(4),A(te(12,8,e.start_date,"dd/MM/yyyy")),d(4),A(te(16,11,e.end_date,"dd/MM/yyyy")),d(3),p("ngIf",o.estaInscrito(e.id))("ngIfElse",n)}}function ma(i,t){if(i&1&&(s(0,"ul"),h(1,da,21,14,"li",5),a()),i&2){let e=g();d(),p("ngForOf",e.ralliesActuales)}}function pa(i,t){i&1&&(s(0,"p"),c(1,"No hay rallies actualmente."),a())}var un=class i{constructor(t,e,n,o){this.rallyService=t;this.router=e;this.cdRef=n;this.sweetAlert=o}ralliesActuales=[];userInscriptions=[];fotosCompletadas={};fotosAprobadas={};subscriptions=new Ui;ngOnInit(){let t=this.rallyService.getAllRallies().subscribe(e=>{let n=new Date;n.setHours(0,0,0,0),this.ralliesActuales=e.filter(r=>{let l=new Date(r.start_date),m=new Date(r.end_date);return l.setHours(0,0,0,0),m.setHours(0,0,0,0),l<=n&&m>=n});let o=parseInt(localStorage.getItem("userId")||"0",10);if(o){this.rallyService.loadUserInscriptions(o);let r=this.rallyService.userInscriptions$.subscribe(l=>{this.userInscriptions=l,this.fotosCompletadas={},l.forEach(m=>{this.fotosAprobadas[m]=!1;let u=this.rallyService.getFotosSubidas(m,o).subscribe(b=>{this.fotosCompletadas[m]=b,this.cdRef.detectChanges()});this.subscriptions.add(u);let f=this.rallyService.getFotosAprobadas(m,o).subscribe(b=>{this.fotosAprobadas[m]=b,this.cdRef.detectChanges()});this.subscriptions.add(f)}),this.cdRef.detectChanges()});this.subscriptions.add(r)}});this.subscriptions.add(t)}ngOnDestroy(){this.subscriptions.unsubscribe()}estaInscrito(t){return this.userInscriptions.includes(t)}alternarInscripcion(t){let e=parseInt(localStorage.getItem("userId")||"0",10);if(!e){console.error("Usuario no autenticado.");return}let n=this.estaInscrito(t);if(n){let o=this.fotosAprobadas[t];if(o===void 0){this.sweetAlert.warning("Espera un momento","Comprobando tus fotos aprobadas...");return}if(o){this.sweetAlert.warning("No puedes darte de baja","Ya tienes una foto aprobada en este rally.");return}}this.rallyService.toggleInscripcion(t,e,n).subscribe(o=>{o.success?(n?(this.userInscriptions=this.userInscriptions.filter(r=>r!==t),delete this.fotosCompletadas[t]):(this.userInscriptions.push(t),this.fotosCompletadas[t]=0),this.cdRef.detectChanges()):this.sweetAlert.error("Error",o.message||"Error al alternar inscripci\xF3n.")},o=>{this.sweetAlert.error("Error de conexi\xF3n",o.message||"Int\xE9ntalo m\xE1s tarde.")})}getIconClassByTheme(t){if(!t)return"fa-solid fa-question";switch(t.trim().toLowerCase()){case"fotografia":return"fa-solid fa-camera-retro";case"naturaleza":return"fa-solid fa-tree";case"deporte":return"fa-solid fa-person-hiking";case"animales":return"fa-solid fa-paw";case"comida":return"fa-solid fa-utensils";case"mar y playa":return"fa-solid fa-umbrella-beach";case"paisaje urbano":return"fa-solid fa-city";default:return"fa-solid fa-question"}}haCompletadoRally(t){return(this.fotosCompletadas[t]||0)>=3}volverAlPanelUsuario(){this.router.navigate(["user/dashboard"])}static \u0275fac=function(e){return new(e||i)(v(Fe),v(I),v(Yi),v(Te))};static \u0275cmp=k({type:i,selectors:[["app-rallies-actuales"]],decls:8,vars:2,consts:[["sinRallies",""],["noInscrito",""],[4,"ngIf","ngIfElse"],[1,"button-container","text-center","mt-4"],[1,"btn","btn-secondary","px-4","rounded-pill",3,"click"],["class","horizontal-card",4,"ngFor","ngForOf"],[1,"horizontal-card"],[1,"d-flex","flex-column","flex-md-row","align-items-start","align-items-md-center","gap-3"],[1,"flex-grow-1"],[1,"button-wrapper","mt-3","text-end"],[1,"btn","btn-outline-danger","px-4","rounded-pill",3,"click","disabled"],[1,"btn","btn-primary","px-4","rounded-pill",3,"click","disabled"]],template:function(e,n){if(e&1){let o=V();s(0,"h2"),c(1,"Rallies Actuales"),a(),h(2,ma,2,1,"ul",2)(3,pa,2,0,"ng-template",null,0,Wn),s(5,"div",3)(6,"button",4),_("click",function(){return x(o),w(n.volverAlPanelUsuario())}),c(7,"Volver"),a()()}if(e&2){let o=ie(4);d(2),p("ngIf",n.ralliesActuales.length>0)("ngIfElse",o)}},dependencies:[U,K,j,de,$],styles:['@font-face{font-family:Merriweather;font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v32/u-4D0qyriQwlOrhSvowK_l5UcA6zuSYEqOzpPe3HOZJ5eX1WtLaQwmYiScCmDxhtNOKl8yDr3icaGV31GvU.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Merriweather;font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v32/u-4D0qyriQwlOrhSvowK_l5UcA6zuSYEqOzpPe3HOZJ5eX1WtLaQwmYiScCmDxhtNOKl8yDr3icaEF31GvU.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Merriweather;font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v32/u-4D0qyriQwlOrhSvowK_l5UcA6zuSYEqOzpPe3HOZJ5eX1WtLaQwmYiScCmDxhtNOKl8yDr3icaG131GvU.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Merriweather;font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v32/u-4D0qyriQwlOrhSvowK_l5UcA6zuSYEqOzpPe3HOZJ5eX1WtLaQwmYiScCmDxhtNOKl8yDr3icaGl31GvU.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Merriweather;font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v32/u-4D0qyriQwlOrhSvowK_l5UcA6zuSYEqOzpPe3HOZJ5eX1WtLaQwmYiScCmDxhtNOKl8yDr3icaFF31.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}[_nghost-%COMP%]{font-family:Merriweather,serif;background-size:cover;min-height:80vh;padding:1rem;color:#4b2e05}h2[_ngcontent-%COMP%]{text-align:center;margin-top:1rem;color:#4b2e05;font-size:2rem;font-weight:700;text-shadow:1px 1px 1px #7b4f24}.text-brown[_ngcontent-%COMP%]{color:#6c4c3b}h4[_ngcontent-%COMP%]{text-align:center;margin-top:1rem;color:#4b2e05;font-size:1.5rem;font-weight:700;text-shadow:1px 1px 1px #7b4f24}.icono-tema-preview[_ngcontent-%COMP%]{font-size:2rem;color:#b08968}ul[_ngcontent-%COMP%]{padding-left:0;margin:0 auto;max-width:900px;list-style:none}.horizontal-card[_ngcontent-%COMP%]{background:#f2d388;border-radius:12px;box-shadow:0 6px 14px #d2a04673;color:#4b2e05;transition:transform .3s ease;cursor:pointer;margin:1.5rem 2rem;display:flex;align-items:center;gap:1rem;padding:1rem 1.5rem}.horizontal-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 20px #d2a04699}i[_ngcontent-%COMP%], .material-symbols-outlined[_ngcontent-%COMP%]{font-size:3rem!important;color:#5c2c10!important;flex-shrink:0}.horizontal-card[_ngcontent-%COMP%] > div.flex-grow-1[_ngcontent-%COMP%]{flex-grow:1}.horizontal-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;font-weight:700;text-shadow:1px 1px 2px #7b4f24;text-align:left;font-size:1.2rem;margin-bottom:.3rem}.horizontal-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;margin:.3rem 0}.horizontal-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;color:#7b4f24}.btn[_ngcontent-%COMP%], .cancelar-btn[_ngcontent-%COMP%], .apuntarme-btn[_ngcontent-%COMP%]{background-color:sienna;color:#fff;border:none;padding:.6rem 1.2rem;border-radius:5px;cursor:pointer;transition:background-color .3s ease;font-size:1rem;font-weight:700;text-align:center;min-width:130px;white-space:nowrap}.btn[_ngcontent-%COMP%]:hover, .cancelar-btn[_ngcontent-%COMP%]:hover, .apuntarme-btn[_ngcontent-%COMP%]:hover{background-color:#8b4513}.cancelar-btn[_ngcontent-%COMP%], .btn-outline-danger[_ngcontent-%COMP%]{background-color:#cc4b37;color:#fff;border:none}.cancelar-btn[_ngcontent-%COMP%]:hover, .btn-outline-danger[_ngcontent-%COMP%]:hover{background-color:#a43a29}.apuntarme-btn[_ngcontent-%COMP%], .btn-primary[_ngcontent-%COMP%]{background-color:#4b8b3b;color:#fff;border:none}.apuntarme-btn[_ngcontent-%COMP%]:hover, .btn-primary[_ngcontent-%COMP%]:hover{background-color:#3a6b2b}.button-container[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background-color:sienna;color:#fff;border:none}.button-container[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background-color:#8b4513}button[disabled][_ngcontent-%COMP%]{background-color:#d4b9a7!important;color:#6e4b33!important;border-color:#d4b9a7!important;cursor:not-allowed!important;opacity:1!important}.button-container[_ngcontent-%COMP%]{text-align:center;margin:2rem 0}@media (max-width: 600px){.horizontal-card[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;margin:1rem;padding:1rem}i[_ngcontent-%COMP%], .material-symbols-outlined[_ngcontent-%COMP%]{font-size:2.5rem!important;margin-bottom:.5rem}.horizontal-card[_ngcontent-%COMP%] > div.flex-grow-1[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem}.horizontal-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem}.horizontal-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}.btn[_ngcontent-%COMP%], .cancelar-btn[_ngcontent-%COMP%], .apuntarme-btn[_ngcontent-%COMP%]{width:100%;min-width:unset;font-size:1.1rem;padding:.7rem 0}}@media (min-width: 601px) and (max-width: 900px){.horizontal-card[_ngcontent-%COMP%]{margin:1.5rem 1rem;padding:1rem 1.2rem}i[_ngcontent-%COMP%], .material-symbols-outlined[_ngcontent-%COMP%]{font-size:2.8rem!important}.horizontal-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.6rem}.horizontal-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem}.btn[_ngcontent-%COMP%], .cancelar-btn[_ngcontent-%COMP%], .apuntarme-btn[_ngcontent-%COMP%]{min-width:140px;font-size:1rem;padding:.6rem 1rem}}@media (min-width: 901px){.horizontal-card[_ngcontent-%COMP%]{margin:2rem;padding:1.2rem 1.5rem}i[_ngcontent-%COMP%], .material-symbols-outlined[_ngcontent-%COMP%]{font-size:3rem!important}.horizontal-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.8rem}.horizontal-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem}.btn[_ngcontent-%COMP%], .cancelar-btn[_ngcontent-%COMP%], .apuntarme-btn[_ngcontent-%COMP%]{min-width:130px}}']})};function ua(i,t){if(i&1&&(s(0,"li",3)(1,"div",4),P(2,"i"),s(3,"div",5)(4,"h3"),c(5),a(),s(6,"p"),c(7),a(),s(8,"p"),c(9," Inicio: "),s(10,"span"),c(11),G(12,"date"),a(),c(13," - Fin: "),s(14,"span"),c(15),G(16,"date"),a()()()()()),i&2){let e=t.$implicit,n=g();d(2),ge(n.getIconClassByTheme(e.theme)+" icono-tema-preview"),d(3),A(e.title),d(2),A(e.description),d(4),A(te(12,6,e.start_date,"dd/MM/yyyy")),d(4),A(te(16,9,e.end_date,"dd/MM/yyyy"))}}var fn=class i{constructor(t,e){this.rallyService=t;this.router=e}ralliesPasados=[];rallies;ngOnInit(){this.rallyService.getAllRallies().subscribe(t=>{console.log("TODOS LOS RALLIES:",t);let e=new Date;e.setHours(0,0,0,0),this.ralliesPasados=t.filter(n=>{let o=new Date(n.end_date);o.setHours(0,0,0,0);let r=o<e;return console.log(`Rally: ${n.title} - Fin: ${o.toISOString()} - \xBFPasado?: ${r}`),r}),console.log("Rallies pasados:",this.ralliesPasados)})}getIconClassByTheme(t){if(!t)return"fa-solid fa-question";switch(t.trim().toLowerCase()){case"fotografia":return"fa-solid fa-camera-retro";case"naturaleza":return"fa-solid fa-tree";case"deporte":return"fa-solid fa-person-hiking";case"animales":return"fa-solid fa-paw";case"comida":return"fa-solid fa-utensils";case"mar y playa":return"fa-solid fa-umbrella-beach";case"paisaje urbano":return"fa-solid fa-city";default:return"fa-solid fa-question"}}volverAlPanelUsuario(){this.router.navigate(["user/dashboard"])}static \u0275fac=function(e){return new(e||i)(v(Fe),v(I))};static \u0275cmp=k({type:i,selectors:[["app-rallies-pasados"]],decls:6,vars:1,consts:[["class","card horizontal-card p-3 mb-3",4,"ngFor","ngForOf"],[1,"button-container"],[1,"btn",3,"click"],[1,"card","horizontal-card","p-3","mb-3"],[1,"d-flex","align-items-center"],[1,"flex-grow-1"]],template:function(e,n){e&1&&(s(0,"h2"),c(1,"Rallies Pasados"),a(),h(2,ua,17,12,"li",0),s(3,"div",1)(4,"button",2),_("click",function(){return n.volverAlPanelUsuario()}),c(5,"Volver"),a()()),e&2&&(d(2),p("ngForOf",n.ralliesPasados))},dependencies:[U,K,de,$],styles:['@font-face{font-family:Merriweather;font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v32/u-4D0qyriQwlOrhSvowK_l5UcA6zuSYEqOzpPe3HOZJ5eX1WtLaQwmYiScCmDxhtNOKl8yDr3icaGV31GvU.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Merriweather;font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v32/u-4D0qyriQwlOrhSvowK_l5UcA6zuSYEqOzpPe3HOZJ5eX1WtLaQwmYiScCmDxhtNOKl8yDr3icaEF31GvU.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Merriweather;font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v32/u-4D0qyriQwlOrhSvowK_l5UcA6zuSYEqOzpPe3HOZJ5eX1WtLaQwmYiScCmDxhtNOKl8yDr3icaG131GvU.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Merriweather;font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v32/u-4D0qyriQwlOrhSvowK_l5UcA6zuSYEqOzpPe3HOZJ5eX1WtLaQwmYiScCmDxhtNOKl8yDr3icaGl31GvU.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Merriweather;font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v32/u-4D0qyriQwlOrhSvowK_l5UcA6zuSYEqOzpPe3HOZJ5eX1WtLaQwmYiScCmDxhtNOKl8yDr3icaFF31.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}[_nghost-%COMP%]{font-family:Merriweather,serif;background-size:cover;min-height:80vh;padding:1rem;color:#4b2e05}.horizontal-card[_ngcontent-%COMP%]{background:#f2d388;border-radius:12px;box-shadow:0 6px 14px #d2a04673;color:#4b2e05;transition:transform .3s ease;cursor:pointer;margin-left:2rem;margin-right:2rem;margin-top:2rem;display:flex}h2[_ngcontent-%COMP%]{text-align:center;margin-top:1rem;color:#4b2e05;font-size:2rem;font-weight:700;text-shadow:1px 1px 1px #7b4f24}.horizontal-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 20px #d2a04699}.horizontal-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;font-weight:700;text-shadow:1px 1px 2px #7b4f24;text-align:left}p[_ngcontent-%COMP%]{font-size:1.2rem;color:#4b2e05}.horizontal-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;color:#7b4f24}i[_ngcontent-%COMP%], .material-symbols-outlined[_ngcontent-%COMP%]{font-size:3rem!important;margin-right:1rem;vertical-align:middle;color:#5c2c10!important}.btn[_ngcontent-%COMP%], .cancelar-btn[_ngcontent-%COMP%], .apuntarme-btn[_ngcontent-%COMP%]{background-color:sienna;color:#fff;border:none;padding:.6rem 1.2rem;border-radius:5px;cursor:pointer;transition:background-color .3s ease;font-size:1rem;font-weight:700;text-align:center}.btn[_ngcontent-%COMP%]:hover, .cancelar-btn[_ngcontent-%COMP%]:hover, .apuntarme-btn[_ngcontent-%COMP%]:hover{background-color:#8b4513}.cancelar-btn[_ngcontent-%COMP%]{background-color:#cc4b37}.cancelar-btn[_ngcontent-%COMP%]:hover{background-color:#a43a29}.apuntarme-btn[_ngcontent-%COMP%]{background-color:#4b8b3b}.apuntarme-btn[_ngcontent-%COMP%]:hover{background-color:#3a6b2b}.button-container[_ngcontent-%COMP%]{text-align:center;margin:2rem 0}@media (max-width: 600px){.horizontal-card[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;margin:1rem;padding:1rem}i[_ngcontent-%COMP%], .material-symbols-outlined[_ngcontent-%COMP%]{font-size:2.5rem!important;margin-bottom:.5rem}.horizontal-card[_ngcontent-%COMP%] > div.flex-grow-1[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem}.horizontal-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem}.horizontal-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}.btn[_ngcontent-%COMP%], .cancelar-btn[_ngcontent-%COMP%], .apuntarme-btn[_ngcontent-%COMP%]{width:100%;min-width:unset;font-size:1.1rem;padding:.7rem 0}}@media (min-width: 601px) and (max-width: 900px){.horizontal-card[_ngcontent-%COMP%]{margin:1.5rem 1rem;padding:1rem 1.2rem}i[_ngcontent-%COMP%], .material-symbols-outlined[_ngcontent-%COMP%]{font-size:2.8rem!important}.horizontal-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.6rem}.horizontal-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem}.btn[_ngcontent-%COMP%], .cancelar-btn[_ngcontent-%COMP%], .apuntarme-btn[_ngcontent-%COMP%]{min-width:140px;font-size:1rem;padding:.6rem 1rem}}@media (min-width: 901px){.horizontal-card[_ngcontent-%COMP%]{margin:2rem;padding:1.2rem 1.5rem}i[_ngcontent-%COMP%], .material-symbols-outlined[_ngcontent-%COMP%]{font-size:3rem!important}.horizontal-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.8rem}.horizontal-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem}.btn[_ngcontent-%COMP%], .cancelar-btn[_ngcontent-%COMP%], .apuntarme-btn[_ngcontent-%COMP%]{min-width:130px}}']})};var fa=()=>({responsive:!0});function ga(i,t){if(i&1&&(s(0,"li"),c(1),a()),i&2){let e=t.$implicit;d(),ut(" ",e.title," : ",e.inscritos," participantes ")}}function ha(i,t){i&1&&(s(0,"p"),c(1,"No hay rallies con inscritos todav\xEDa."),a())}function _a(i,t){if(i&1&&(he(0),s(1,"div",10),P(2,"canvas",11),a(),_e()),i&2){let e=g();d(2),p("data",e.barChartData)("type",e.barChartType)("options",De(3,fa))}}po.register(mo,uo,_o,bo,go,ho,fo);var gn=class i{constructor(t,e){this.router=t;this.http=e}topRallies=[];errorMessage="";barChartData={labels:[],datasets:[{data:[],label:"Inscritos",backgroundColor:"#7b4f24"}]};barChartType="bar";ngOnInit(){this.cargarTopRallies()}cargarTopRallies(){let t=`${Pe.apiUrl}/inscripciones.php?stats=top`;this.http.get(t).subscribe({next:e=>{e.success?(this.topRallies=e.topRallies,this.updateChartData()):this.errorMessage=e.message||"Error al cargar datos."},error:e=>{this.errorMessage="Error en la llamada a la API.",console.error("Error HTTP:",e)}})}updateChartData(){this.barChartData={labels:this.topRallies.map(t=>t.title),datasets:[{data:this.topRallies.map(t=>t.inscritos),label:"Inscritos",backgroundColor:"#7b4f24"}]}}goToRalliesManagement(){this.router.navigate(["/admin/gestion-rallies"])}goToUsersManagement(){this.router.navigate(["/admin/user-control"])}goToPhotosManagement(){this.router.navigate(["/admin/user-photos"])}static \u0275fac=function(e){return new(e||i)(v(I),v(gt))};static \u0275cmp=k({type:i,selectors:[["app-admin"]],decls:40,vars:3,consts:[[1,"dashboard","admin-panel"],[1,"dashboard-header"],[1,"card-container"],[1,"card",3,"click"],[1,"btn-guardar"],["href","/docs/manual_administrador.pdf","download","","target","_blank",1,"btn-descarga"],[1,"card","card-stats"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"card","card-graph"],[1,"chart-wrapper"],["baseChart","",3,"data","type","options"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"div",1)(2,"h1"),c(3,"Panel de Administraci\xF3n"),a()(),s(4,"div",2)(5,"div",3),_("click",function(){return n.goToRalliesManagement()}),s(6,"h2"),c(7,"Gesti\xF3n de Rallies"),a(),s(8,"p"),c(9,"Crear, editar o eliminar rallies existentes."),a(),s(10,"button",4),c(11,"Gestionar Rallies"),a()(),s(12,"div",3),_("click",function(){return n.goToUsersManagement()}),s(13,"h2"),c(14,"Gesti\xF3n de Usuarios"),a(),s(15,"p"),c(16,"Administrar usuarios registrados en el sistema."),a(),s(17,"button",4),c(18,"Gestionar Usuarios"),a()(),s(19,"div",3),_("click",function(){return n.goToPhotosManagement()}),s(20,"h2"),c(21,"Gesti\xF3n de Fotos"),a(),s(22,"p"),c(23,"Administrar el estado de las fotos de los usuarios."),a(),s(24,"button",4),c(25,"Gestionar Fotos"),a()()(),s(26,"p"),c(27,"Aqui puedes descargarte nuestro "),s(28,"a",5),c(29,"manual de administrador (PDF)"),a(),c(30,"."),a(),s(31,"div",2)(32,"div",6)(33,"h2"),c(34,"Rallies con m\xE1s participaci\xF3n"),a(),s(35,"ul"),h(36,ga,2,2,"li",7),a(),h(37,ha,2,0,"p",8),a(),s(38,"div",9),h(39,_a,3,4,"ng-container",8),a()()()),e&2&&(d(36),p("ngForOf",n.topRallies),d(),p("ngIf",n.topRallies.length===0),d(2),p("ngIf",n.barChartData))},dependencies:[U,K,j,yo],styles:[".admin-panel[_ngcontent-%COMP%]{background:url(/images/fondo3.jpg) no-repeat center center;background-size:cover;min-height:100vh;width:100%;overflow-x:hidden;display:flex;flex-direction:column;padding:1rem}h1[_ngcontent-%COMP%]{font-size:2.4rem;font-weight:700;color:#4b2e05;text-align:center;margin-bottom:2rem;text-shadow:1px 1px 2px #7b4f24}p[_ngcontent-%COMP%]{font-size:1.2rem;color:#4b2e05;font-weight:500;text-align:center;margin-bottom:1.5rem;line-height:1.6;max-width:800px;margin-left:auto;margin-right:auto}.card-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:2rem;margin-bottom:2rem;justify-content:center}.dashboard[_ngcontent-%COMP%] > .card-container[_ngcontent-%COMP%]:first-of-type{justify-content:space-between;flex-wrap:wrap;gap:2rem}.dashboard[_ngcontent-%COMP%] > .card-container[_ngcontent-%COMP%]:first-of-type   .card[_ngcontent-%COMP%]{flex:1 1 calc(33.333% - 1.5rem);max-width:100%;min-width:260px}.card[_ngcontent-%COMP%]{background:#f2d388;padding:1.8rem;border-radius:12px;box-shadow:0 6px 14px #d2a04673;color:#4b2e05;display:flex;flex-direction:column;justify-content:space-between;cursor:pointer;transition:transform .3s ease,box-shadow .3s ease}.card[_ngcontent-%COMP%]:hover{transform:translateY(-6px);box-shadow:0 10px 20px #d2a04699}.card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:700;font-size:1.6rem;margin-bottom:.6rem;text-shadow:1px 1px 2px #7b4f24;text-align:center}.card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;line-height:1.4;margin-bottom:1.8rem;text-align:center}.card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 auto;background-color:#7b4f24;color:#f9f4e6;border:none;padding:.6rem 1.4rem;font-size:1rem;font-weight:700;border-radius:8px;cursor:pointer;transition:background-color .3s ease}.card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#a06937}.card-container[_ngcontent-%COMP%]:last-of-type{display:flex;flex-wrap:wrap;gap:2rem;justify-content:center;margin-bottom:2rem}.card-stats[_ngcontent-%COMP%], .card-graph[_ngcontent-%COMP%]{flex:1 1 420px;max-width:500px;background-color:#f2d388;padding:1.25rem 1.5625rem;border-radius:12px;box-sizing:border-box;display:flex;flex-direction:column;justify-content:flex-start;box-shadow:0 6px 14px #d2a04673;min-height:250px}.card-stats[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .card-graph[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;margin-bottom:1rem;font-size:1.8rem;font-weight:700;color:#4b2e05;text-shadow:1px 1px 3px #7b4f24;text-align:center}.card-stats[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding-left:0;margin:0;flex-grow:1;overflow-y:auto}.card-stats[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:12px;font-weight:600;font-size:1.25rem;color:#3c3c3c;line-height:1.4;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.chart-wrapper[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center}.card-graph[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{width:100%!important;height:100%!important;max-height:300px;object-fit:contain}@media (max-width: 900px){.dashboard[_ngcontent-%COMP%] > .card-container[_ngcontent-%COMP%]:first-of-type{flex-direction:column;gap:1.5rem}.dashboard[_ngcontent-%COMP%] > .card-container[_ngcontent-%COMP%]:first-of-type   .card[_ngcontent-%COMP%]{flex:1 1 100%;max-width:100%}.card-container[_ngcontent-%COMP%]:last-of-type{flex-direction:column;align-items:center}.card-stats[_ngcontent-%COMP%], .card-graph[_ngcontent-%COMP%]{flex:1 1 100%;max-width:100%;min-height:200px}}"]})};function ba(i,t){i&1&&(s(0,"div",21)(1,"small"),c(2,"El nombre debe tener al menos 3 caracteres."),a()())}function ya(i,t){i&1&&(s(0,"div",21)(1,"small"),c(2,"Los apellidos deben tener al menos 3 caracteres."),a()())}function va(i,t){i&1&&(s(0,"div",21)(1,"small"),c(2,"Ingresa un correo v\xE1lido."),a()())}function Ca(i,t){i&1&&(s(0,"div",21)(1,"small"),c(2,"El rol es obligatorio."),a()())}function xa(i,t){i&1&&(s(0,"div",22),c(1," Por favor, complete todos los campos correctamente. "),a())}var hn=class i{constructor(t,e,n,o,r){this.activatedRoute=t;this.userService=e;this.formBuilder=n;this.router=o;this.sweetAlert=r}userId;userForm;user=null;passwordRegex=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%&*]).{8,12}$/;emailRegex=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;ngOnInit(){this.userId=Number(this.activatedRoute.snapshot.paramMap.get("id")),this.userForm=this.formBuilder.group({name:["",[L.required,L.minLength(3)]],lastName:["",[L.required,L.minLength(3)]],email:["",[L.required,L.email]],role:["",L.required]}),this.userService.getUserById(this.userId).subscribe({next:t=>{this.user=t,this.userForm.patchValue({name:t.name,lastName:t.lastName,email:t.email,role:t.role})},error:t=>{console.error("Error al obtener los datos del usuario",t)}})}saveUser(){if(this.userForm.valid&&this.user){let t=q(q({},this.user),this.userForm.value);if(this.userId===14&&t.role!==this.user?.role){this.sweetAlert.warning("No puedes cambiar el rol del admin principal");return}this.userService.updateUser(this.userId,t).subscribe({next:()=>{this.router.navigate(["/admin/user-control"])},error:e=>{console.error("Error al actualizar el usuario",e)}})}}cancel(){this.router.navigate(["/admin/user-control"])}static \u0275fac=function(e){return new(e||i)(v(Ze),v(xt),v(Je),v(I),v(Te))};static \u0275cmp=k({type:i,selectors:[["app-edit-user"]],decls:37,vars:7,consts:[[1,"container","mt-5","mb-5"],[1,"text-center","mb-4",2,"color","#4b2e2e","font-family","'Georgia', serif"],[3,"ngSubmit","formGroup"],[1,"row","g-3"],[1,"col-md-6"],["for","name",1,"form-label","fw-bold",2,"color","#3e2b2b"],["id","name","formControlName","name","type","text","placeholder","Nombre",1,"form-control","custom-input"],["class","text-danger small mt-1",4,"ngIf"],["for","lastName",1,"form-label","fw-bold",2,"color","#3e2b2b"],["id","lastName","formControlName","lastName","type","text","placeholder","Apellidos",1,"form-control","custom-input"],["for","email",1,"form-label","fw-bold",2,"color","#3e2b2b"],["id","email","formControlName","email","type","email","placeholder","Correo Electr\xF3nico",1,"form-control","custom-input"],["for","role",1,"form-label","fw-bold",2,"color","#3e2b2b"],["id","role","formControlName","role",1,"form-select","custom-input"],["value",""],["value","user"],["value","admin"],["class","text-danger mt-3",4,"ngIf"],[1,"mt-4","d-flex","gap-3"],["type","submit",1,"btn","btn-guardar","flex-grow-1",3,"disabled"],["type","button",1,"btn","btn-cancel","flex-grow-1",3,"click"],[1,"text-danger","small","mt-1"],[1,"text-danger","mt-3"]],template:function(e,n){if(e&1&&(s(0,"div",0)(1,"h2",1),c(2,"Editar Usuario"),a(),s(3,"form",2),_("ngSubmit",function(){return n.saveUser()}),s(4,"div",3)(5,"div",4)(6,"label",5),c(7,"Nombre"),a(),P(8,"input",6),h(9,ba,3,0,"div",7),a(),s(10,"div",4)(11,"label",8),c(12,"Apellidos"),a(),P(13,"input",9),h(14,ya,3,0,"div",7),a(),s(15,"div",4)(16,"label",10),c(17,"Correo Electr\xF3nico"),a(),P(18,"input",11),h(19,va,3,0,"div",7),a(),s(20,"div",4)(21,"label",12),c(22,"Rol"),a(),s(23,"select",13)(24,"option",14),c(25,"Selecciona un rol"),a(),s(26,"option",15),c(27,"Usuario"),a(),s(28,"option",16),c(29,"Administrador"),a()(),h(30,Ca,3,0,"div",7),a()(),h(31,xa,2,0,"div",17),s(32,"div",18)(33,"button",19),c(34,"Guardar Cambios"),a(),s(35,"button",20),_("click",function(){return n.cancel()}),c(36,"Cancelar"),a()()()()),e&2){let o,r,l,m;d(3),p("formGroup",n.userForm),d(6),p("ngIf",((o=n.userForm.get("name"))==null?null:o.invalid)&&((o=n.userForm.get("name"))==null?null:o.touched)),d(5),p("ngIf",((r=n.userForm.get("lastName"))==null?null:r.invalid)&&((r=n.userForm.get("lastName"))==null?null:r.touched)),d(5),p("ngIf",((l=n.userForm.get("email"))==null?null:l.invalid)&&((l=n.userForm.get("email"))==null?null:l.touched)),d(11),p("ngIf",((m=n.userForm.get("role"))==null?null:m.invalid)&&((m=n.userForm.get("role"))==null?null:m.touched)),d(),p("ngIf",n.userForm.invalid&&(n.userForm.dirty||n.userForm.touched)),d(2),p("disabled",n.userForm.invalid)}},dependencies:[U,j,et,Be,vt,Ct,ve,yt,Ce,Ve,_t,bt,Le],styles:[".container[_ngcontent-%COMP%]{background-color:#fdf4e3;border:2px solid #e2c799;border-radius:16px;padding:30px;box-shadow:0 6px 16px #a0693740;font-family:Georgia,serif;color:#4b2e05}h2[_ngcontent-%COMP%]{font-size:2.2rem;font-weight:700;color:#7b4f24;text-shadow:1px 1px 2px #cfa873}.form-label[_ngcontent-%COMP%]{font-weight:700;font-family:Georgia,serif;color:#4b2e05;margin-bottom:6px;display:inline-block}.custom-input[_ngcontent-%COMP%]{background-color:#fff8f0;border:1.5px solid #a06937;border-radius:14px;padding:12px 16px;font-size:16px;font-family:Georgia,serif;color:#4b2e05;transition:border-color .3s ease,box-shadow .3s ease;box-shadow:inset 0 1px 3px #a0693726}.custom-input[_ngcontent-%COMP%]:focus{border-color:#7b4f24;outline:none;box-shadow:0 0 8px #a06937}.text-danger[_ngcontent-%COMP%]   small[_ngcontent-%COMP%], .error-message[_ngcontent-%COMP%]{font-family:Georgia,serif;color:#a04a1b;font-weight:600}.btn-guardar[_ngcontent-%COMP%]{background-color:#7b4f24;color:#f9f4e6;border:none;padding:12px 26px;font-size:16px;border-radius:14px;cursor:pointer;transition:background-color .3s ease,box-shadow .3s ease;font-family:Georgia,serif;font-weight:700;box-shadow:0 4px 10px #7b4f2499;-webkit-user-select:none;user-select:none}.btn-guardar[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#a06937;box-shadow:0 6px 14px #a06937bf}.btn-guardar[_ngcontent-%COMP%]:disabled{background-color:#c4a378;cursor:not-allowed;box-shadow:none}.btn-cancel[_ngcontent-%COMP%]{background-color:#f2d388;color:#4b2e05;border:none;padding:12px 26px;font-size:16px;border-radius:14px;cursor:pointer;transition:background-color .3s ease,box-shadow .3s ease;font-family:Georgia,serif;font-weight:600;box-shadow:0 3px 8px #7b4f2466;-webkit-user-select:none;user-select:none}.btn-cancel[_ngcontent-%COMP%]:hover{background-color:#d4b66a;box-shadow:0 5px 12px #a0693780}"]})};function wa(i,t){if(i&1){let e=V();s(0,"tr")(1,"td"),c(2),a(),s(3,"td"),c(4),a(),s(5,"td"),c(6),a(),s(7,"td"),c(8),G(9,"date"),G(10,"date"),a(),s(11,"td",8)(12,"button",9),_("click",function(){let o=x(e).$implicit,r=g();return w(o.id!==void 0&&r.editRally(o.id))}),c(13,"Editar"),a(),s(14,"button",10),_("click",function(){let o=x(e).$implicit,r=g();return w(o.id!==void 0&&r.deleteRally(o.id))}),c(15,"Eliminar"),a()()()}if(i&2){let e=t.$implicit;d(2),A(e.title),d(2),A(e.theme),d(2),A(e.description),d(2),ut("",te(9,5,e.start_date,"dd/MM/yyyy")," - ",te(10,8,e.end_date,"dd/MM/yyyy"),"")}}var _n=class i{constructor(t,e,n){this.router=t;this.rallyService=e;this.sweetAlert=n}rallies=[];ngOnInit(){this.rallyService.rallies$.subscribe(t=>{console.log("Datos de rallies recibidos en la suscripci\xF3n:",t),this.rallies=t,console.log("Todos los rallies:",this.rallies)}),this.rallyService.getAllRallies().subscribe({next:()=>console.log("Rallies cargados correctamente"),error:t=>console.error("Error al cargar los rallies:",t)})}editRally(t){this.router.navigate([`/admin/edit-rallies/${t}`])}deleteRally(t){this.rallyService.getRallyById(t).subscribe(e=>{if(e){let n=e.title;this.sweetAlert.confirm(`\xBFEst\xE1s seguro de que deseas eliminar el rally: ${n}?`,"Esta acci\xF3n no se puede deshacer.").then(o=>{o&&this.rallyService.deleteRally(t).subscribe(()=>{this.sweetAlert.success("Rally eliminado")})})}else this.sweetAlert.warning("No se encontr\xF3 el rally.")})}goBackToAdminPanel(){this.router.navigate(["admin"])}static \u0275fac=function(e){return new(e||i)(v(I),v(Fe),v(Te))};static \u0275cmp=k({type:i,selectors:[["app-gestion-rallies"]],decls:25,vars:1,consts:[[1,"add-button-container"],[1,"btn-nuevo",3,"click"],[1,"table-container"],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],[1,"button-container"],[1,"back-button",3,"click"],[1,"actions"],[1,"action-btn","edit-btn",3,"click"],[1,"action-btn","delete-btn",3,"click"]],template:function(e,n){e&1&&(s(0,"h2"),c(1,"Gesti\xF3n de Rallies"),a(),s(2,"div",0)(3,"button",1),_("click",function(){return n.router.navigate(["/admin/create-rallies"])}),c(4,"A\xF1adir nuevo rally"),a()(),s(5,"div",2)(6,"div",3)(7,"table",4)(8,"thead")(9,"tr")(10,"th"),c(11,"T\xEDtulo"),a(),s(12,"th"),c(13,"Tema"),a(),s(14,"th"),c(15,"Descripci\xF3n"),a(),s(16,"th"),c(17,"Fechas"),a(),s(18,"th"),c(19,"Acciones"),a()()(),s(20,"tbody"),h(21,wa,16,11,"tr",5),a()()(),s(22,"div",6)(23,"button",7),_("click",function(){return n.goBackToAdminPanel()}),c(24,"Volver"),a()()()),e&2&&(d(21),p("ngForOf",n.rallies))},dependencies:[U,K,de,$],styles:[".table-container[_ngcontent-%COMP%]{max-width:900px;margin:40px auto;background-color:#f2d388;border:2px solid #7b4f24;border-radius:12px;padding:20px 30px;box-shadow:0 6px 14px #d2a04673;font-family:Georgia,serif;color:#4b2e05}h2[_ngcontent-%COMP%]{font-size:2.5rem;margin-top:1rem;margin-bottom:1rem;color:#7b4f24;text-align:center;text-shadow:1px 1px 2px #7b4f24}.table-responsive[_ngcontent-%COMP%]{overflow-x:auto}.table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0 12px;min-width:600px}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left;padding:12px 15px;font-size:1.1rem;border-bottom:2px solid #a06937;color:#4b2e05;text-shadow:1px 1px 2px #7b4f24}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background-color:#f9e3b0;transition:background-color .3s ease;border-radius:8px;box-shadow:0 2px 5px #d2a0464d}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ebcb80}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 15px;vertical-align:middle;font-size:1rem;color:#4b2e05}.table[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border:none!important;box-shadow:none!important}.actions[_ngcontent-%COMP%]{display:flex;gap:10px;flex-wrap:wrap}.action-btn[_ngcontent-%COMP%]{font-family:Georgia,serif;font-weight:700;padding:6px 14px;border-radius:8px;border:none;cursor:pointer;font-size:.95rem;transition:background-color .3s ease;color:#f9f4e6;min-width:70px;text-align:center;-webkit-user-select:none;user-select:none;box-shadow:0 2px 5px #7b4f2466;white-space:nowrap}.edit-btn[_ngcontent-%COMP%]{background-color:#7b4f24}.edit-btn[_ngcontent-%COMP%]:hover{background-color:#a06937;box-shadow:0 4px 10px #a0693799}.delete-btn[_ngcontent-%COMP%]{background-color:#c55e25;box-shadow:0 2px 5px #c55e2566}.delete-btn[_ngcontent-%COMP%]:hover{background-color:#a04a1b;box-shadow:0 4px 10px #a04a1b99}.button-container[_ngcontent-%COMP%]{margin-top:25px;text-align:center}.back-button[_ngcontent-%COMP%]{font-family:Georgia,serif;font-weight:700;background-color:#7b4f24;color:#f9f4e6;border:none;padding:10px 28px;border-radius:12px;cursor:pointer;font-size:1.1rem;box-shadow:0 4px 10px #7b4f2499;transition:background-color .3s ease}.back-button[_ngcontent-%COMP%]:hover{background-color:#a06937;color:#fff;box-shadow:0 6px 14px #a06937cc}.add-button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:1rem}.btn-nuevo[_ngcontent-%COMP%]{font-family:Georgia,serif;font-weight:700;background-color:#4b2e05;color:#f9f4e6;border:none;padding:10px 22px;border-radius:10px;cursor:pointer;font-size:1rem;box-shadow:0 4px 10px #4b2e0566;transition:background-color .3s ease,box-shadow .3s ease;white-space:nowrap;margin:0}.btn-nuevo[_ngcontent-%COMP%]:hover{background-color:#7b4f24;box-shadow:0 6px 14px #7b4f2499;color:#fff}@media (max-width: 768px){.table-container[_ngcontent-%COMP%]{padding:15px;margin:20px auto}.table[_ngcontent-%COMP%]{min-width:100%}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 12px;font-size:.9rem}.actions[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.action-btn[_ngcontent-%COMP%]{font-size:.85rem;padding:6px 10px;min-width:100%}.back-button[_ngcontent-%COMP%]{font-size:1rem;padding:10px 22px}.add-button-container[_ngcontent-%COMP%]{justify-content:center}.btn-nuevo[_ngcontent-%COMP%]{margin:0 auto}}@media (max-width: 480px){h2[_ngcontent-%COMP%]{font-size:2rem}.table-container[_ngcontent-%COMP%]{padding:12px}.action-btn[_ngcontent-%COMP%]{font-size:.8rem;padding:5px 8px}.btn-nuevo[_ngcontent-%COMP%]{font-size:.9rem;padding:8px 16px}.back-button[_ngcontent-%COMP%]{padding:8px 18px;font-size:1rem}}"]})};function Ma(i,t){i&1&&(s(0,"small"),c(1,"El t\xEDtulo es obligatorio."),a())}function Sa(i,t){i&1&&(s(0,"small"),c(1,"El t\xEDtulo debe tener al menos 5 caracteres."),a())}function Pa(i,t){i&1&&(s(0,"small"),c(1,"El t\xEDtulo no puede superar los 100 caracteres."),a())}function Ea(i,t){if(i&1&&(s(0,"div",32),h(1,Ma,2,0,"small",33)(2,Sa,2,0,"small",33)(3,Pa,2,0,"small",33),a()),i&2){let e,n,o,r=g();d(),p("ngIf",(e=r.rallyForm.get("title"))==null?null:e.hasError("required")),d(),p("ngIf",(n=r.rallyForm.get("title"))==null?null:n.hasError("minlength")),d(),p("ngIf",(o=r.rallyForm.get("title"))==null?null:o.hasError("maxlength"))}}function Oa(i,t){i&1&&(s(0,"small"),c(1,"La ubicaci\xF3n es obligatoria."),a())}function Ta(i,t){i&1&&(s(0,"small"),c(1,"La ubicaci\xF3n debe tener al menos 3 caracteres."),a())}function Fa(i,t){i&1&&(s(0,"small"),c(1,"La ubicaci\xF3n no puede superar los 100 caracteres."),a())}function Aa(i,t){if(i&1&&(s(0,"div",32),h(1,Oa,2,0,"small",33)(2,Ta,2,0,"small",33)(3,Fa,2,0,"small",33),a()),i&2){let e,n,o,r=g();d(),p("ngIf",(e=r.rallyForm.get("location"))==null?null:e.hasError("required")),d(),p("ngIf",(n=r.rallyForm.get("location"))==null?null:n.hasError("minlength")),d(),p("ngIf",(o=r.rallyForm.get("location"))==null?null:o.hasError("maxlength"))}}function Ia(i,t){i&1&&(s(0,"small"),c(1,"La descripci\xF3n es obligatoria."),a())}function Da(i,t){i&1&&(s(0,"small"),c(1,"La descripci\xF3n debe tener al menos 10 caracteres."),a())}function ka(i,t){i&1&&(s(0,"small"),c(1,"La descripci\xF3n no puede superar los 500 caracteres."),a())}function Ra(i,t){if(i&1&&(s(0,"div",32),h(1,Ia,2,0,"small",33)(2,Da,2,0,"small",33)(3,ka,2,0,"small",33),a()),i&2){let e,n,o,r=g();d(),p("ngIf",(e=r.rallyForm.get("description"))==null?null:e.hasError("required")),d(),p("ngIf",(n=r.rallyForm.get("description"))==null?null:n.hasError("minlength")),d(),p("ngIf",(o=r.rallyForm.get("description"))==null?null:o.hasError("maxlength"))}}function Ua(i,t){i&1&&(s(0,"small"),c(1,"La fecha de inicio es obligatoria."),a())}function za(i,t){if(i&1&&(s(0,"div",32),h(1,Ua,2,0,"small",33),a()),i&2){let e,n=g();d(),p("ngIf",(e=n.rallyForm.get("start_date"))==null?null:e.hasError("required"))}}function Na(i,t){i&1&&(s(0,"small"),c(1,"La fecha de finalizaci\xF3n es obligatoria."),a())}function La(i,t){if(i&1&&(s(0,"div",32),h(1,Na,2,0,"small",33),a()),i&2){let e,n=g();d(),p("ngIf",(e=n.rallyForm.get("end_date"))==null?null:e.hasError("required"))}}function Va(i,t){i&1&&(s(0,"div",32)(1,"small"),c(2,"La fecha de finalizaci\xF3n no puede ser anterior a la de inicio."),a()())}function Ba(i,t){i&1&&(s(0,"small"),c(1,"El tema es obligatorio."),a())}function qa(i,t){if(i&1&&(s(0,"div",32),h(1,Ba,2,0,"small",33),a()),i&2){let e,n=g();d(),p("ngIf",(e=n.rallyForm.get("theme"))==null?null:e.hasError("required"))}}function ja(i,t){i&1&&(s(0,"div",34),c(1," Por favor, completa todos los campos correctamente. "),a())}function Ga(i,t){if(i&1&&(s(0,"div",35)(1,"h5")(2,"strong"),c(3,"Inicio actual:"),a(),c(4),G(5,"date"),a(),s(6,"h5")(7,"strong"),c(8,"Fin actual:"),a(),c(9),G(10,"date"),a()()),i&2){let e,n,o=g();d(4),R(" ",ft(5,2,(e=o.rallyForm.get("start_date"))==null?null:e.value),""),d(5),R(" ",ft(10,4,(n=o.rallyForm.get("end_date"))==null?null:n.value),"")}}var bn=class i{constructor(t,e,n,o){this.route=t;this.router=e;this.rallyService=n;this.fb=o}rallyForm;rallyId;isLoading=!1;message="";ngOnInit(){this.rallyId=Number(this.route.snapshot.paramMap.get("id")),console.log("ID desde la URL:",this.rallyId),this.rallyForm=this.fb.group({title:["",[L.required,L.minLength(5),L.maxLength(100)]],description:["",[L.required,L.minLength(10),L.maxLength(500)]],start_date:["",L.required],end_date:["",L.required],location:["",[L.required,L.minLength(3),L.maxLength(100)]],theme:["",[L.required,L.minLength(3),L.maxLength(50)]]},{validators:this.dateValidator}),this.rallyService.getRallyById(this.rallyId).subscribe(t=>{console.log("Rally recibido:",t),t?this.rallyForm.patchValue({title:t.title,description:t.description,start_date:this.formatDate(t.start_date),end_date:this.formatDate(t.end_date),location:t.location,theme:t.theme}):this.message="No se encontr\xF3 el rally."})}formatDate(t){let e=new Date(t),n=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${n}-${o}-${r}`}dateValidator(t){let e=t.get("start_date")?.value,n=t.get("end_date")?.value;if(e&&n){let o=new Date(e);if(new Date(n)<o)return{dateMismatch:!0}}return null}onSubmit(){if(this.rallyForm.valid){this.isLoading=!0;let t=this.rallyForm.value;console.log("Formulario enviado:",t),this.rallyService.updateRally(this.rallyId,t).subscribe(e=>{this.isLoading=!1,this.message="Rally actualizado correctamente.",this.router.navigate(["/admin/gestion-rallies"])},e=>{this.isLoading=!1,this.message="Error al actualizar el rally.",console.error("Error al actualizar el rally:",e)})}else this.message="Por favor, completa todos los campos correctamente."}cancel(){this.router.navigate(["/admin/gestion-rallies"])}static \u0275fac=function(e){return new(e||i)(v(Ze),v(I),v(Fe),v(Je))};static \u0275cmp=k({type:i,selectors:[["app-edit-rallies"]],decls:59,vars:11,consts:[[1,"container","mt-5","mb-5"],[1,"text-center","mb-4",2,"color","#4b2e2e","font-family","'Georgia', serif"],[3,"ngSubmit","formGroup"],[1,"row","g-3"],[1,"col-md-6"],["for","title",1,"form-label","fw-bold",2,"color","#3e2b2b"],["id","title","formControlName","title","type","text","placeholder","T\xEDtulo del rally",1,"form-control","custom-input"],["class","text-danger small mt-1",4,"ngIf"],["for","location",1,"form-label","fw-bold",2,"color","#3e2b2b"],["id","location","formControlName","location","type","text","placeholder","Ubicaci\xF3n del rally",1,"form-control","custom-input"],[1,"col-12"],["for","description",1,"form-label","fw-bold",2,"color","#3e2b2b"],["id","description","formControlName","description","rows","4","placeholder","Descripci\xF3n del rally",1,"form-control","custom-input"],["for","start_date",1,"form-label","fw-bold",2,"color","#3e2b2b"],["id","start_date","type","date","formControlName","start_date",1,"form-control","custom-input"],["for","end_date",1,"form-label","fw-bold",2,"color","#3e2b2b"],["id","end_date","type","date","formControlName","end_date",1,"form-control","custom-input"],["for","theme",1,"form-label","fw-bold",2,"color","#3e2b2b"],["id","theme","formControlName","theme",1,"form-select","custom-input"],["value",""],["value","Fotografia"],["value","Naturaleza"],["value","Deporte"],["value","Animales"],["value","Comida"],["value","Mar y playa"],["value","Paisaje urbano"],["class","text-danger mt-3","style","font-family: 'Georgia', serif;",4,"ngIf"],[1,"mt-4","d-flex","gap-3"],["type","submit",1,"btn","btn-guardar","flex-grow-1",3,"disabled"],["type","button",1,"btn","btn-cancel","flex-grow-1",3,"click"],["class","mt-4","style","font-family: 'Georgia', serif; color: #4b2e05;",4,"ngIf"],[1,"text-danger","small","mt-1"],[4,"ngIf"],[1,"text-danger","mt-3",2,"font-family","'Georgia', serif"],[1,"mt-4",2,"font-family","'Georgia', serif","color","#4b2e05"]],template:function(e,n){if(e&1&&(s(0,"div",0)(1,"h2",1),c(2,"Editar Rally"),a(),s(3,"form",2),_("ngSubmit",function(){return n.onSubmit()}),s(4,"div",3)(5,"div",4)(6,"label",5),c(7,"T\xEDtulo"),a(),P(8,"input",6),h(9,Ea,4,3,"div",7),a(),s(10,"div",4)(11,"label",8),c(12,"Ubicaci\xF3n"),a(),P(13,"input",9),h(14,Aa,4,3,"div",7),a(),s(15,"div",10)(16,"label",11),c(17,"Descripci\xF3n"),a(),P(18,"textarea",12),h(19,Ra,4,3,"div",7),a(),s(20,"div",4)(21,"label",13),c(22,"Fecha de inicio"),a(),P(23,"input",14),h(24,za,2,1,"div",7),a(),s(25,"div",4)(26,"label",15),c(27,"Fecha de finalizaci\xF3n"),a(),P(28,"input",16),h(29,La,2,1,"div",7)(30,Va,3,0,"div",7),a(),s(31,"div",10)(32,"label",17),c(33,"Tema"),a(),s(34,"select",18)(35,"option",19),c(36,"Selecciona un tema"),a(),s(37,"option",20),c(38,"\u{1F4F8} Fotograf\xEDa general"),a(),s(39,"option",21),c(40,"\u{1F33F} Naturaleza"),a(),s(41,"option",22),c(42,"\u{1F3C3}\u200D\u2642\uFE0F Deporte"),a(),s(43,"option",23),c(44,"\u{1F43E} Animales"),a(),s(45,"option",24),c(46,"\u{1F37D}\uFE0F Comida"),a(),s(47,"option",25),c(48,"\u{1F3D6}\uFE0F Mar y Playa"),a(),s(49,"option",26),c(50,"\u{1F306} Paisaje Urbano"),a()(),h(51,qa,2,1,"div",7),a()(),h(52,ja,2,0,"div",27),s(53,"div",28)(54,"button",29),c(55,"Actualizar"),a(),s(56,"button",30),_("click",function(){return n.cancel()}),c(57,"Cancelar"),a()()(),h(58,Ga,11,6,"div",31),a()),e&2){let o,r,l,m,u,f,b,y;d(3),p("formGroup",n.rallyForm),d(6),p("ngIf",((o=n.rallyForm.get("title"))==null?null:o.touched)&&((o=n.rallyForm.get("title"))==null?null:o.invalid)),d(5),p("ngIf",((r=n.rallyForm.get("location"))==null?null:r.touched)&&((r=n.rallyForm.get("location"))==null?null:r.invalid)),d(5),p("ngIf",((l=n.rallyForm.get("description"))==null?null:l.touched)&&((l=n.rallyForm.get("description"))==null?null:l.invalid)),d(5),p("ngIf",((m=n.rallyForm.get("start_date"))==null?null:m.touched)&&((m=n.rallyForm.get("start_date"))==null?null:m.invalid)),d(5),p("ngIf",((u=n.rallyForm.get("end_date"))==null?null:u.touched)&&((u=n.rallyForm.get("end_date"))==null?null:u.invalid)),d(),p("ngIf",(n.rallyForm.errors==null?null:n.rallyForm.errors.dateMismatch)&&((f=n.rallyForm.get("end_date"))==null?null:f.touched)),d(21),p("ngIf",((b=n.rallyForm.get("theme"))==null?null:b.touched)&&((b=n.rallyForm.get("theme"))==null?null:b.invalid)),d(),p("ngIf",n.rallyForm.invalid&&n.rallyForm.touched),d(2),p("disabled",n.rallyForm.invalid||n.isLoading),d(4),p("ngIf",((y=n.rallyForm.get("start_date"))==null?null:y.value)||((y=n.rallyForm.get("end_date"))==null?null:y.value))}},dependencies:[U,j,de,et,Be,vt,Ct,ve,yt,Ce,Ve,_t,bt],styles:[".container[_ngcontent-%COMP%]{background-color:#fdf4e3;border:2px solid #e2c799;border-radius:16px;padding:30px;box-shadow:0 6px 16px #a0693740;font-family:Georgia,serif;color:#4b2e05}h2[_ngcontent-%COMP%]{font-size:2.2rem;font-weight:700;color:#7b4f24;text-shadow:1px 1px 2px #cfa873}.form-label[_ngcontent-%COMP%]{font-weight:700;font-family:Georgia,serif;color:#4b2e05;margin-bottom:6px;display:inline-block}.custom-input[_ngcontent-%COMP%]{background-color:#fff8f0;border:1.5px solid #a06937;border-radius:14px;padding:12px 16px;font-size:16px;font-family:Georgia,serif;color:#4b2e05;transition:border-color .3s ease,box-shadow .3s ease;box-shadow:inset 0 1px 3px #a0693726}.custom-input[_ngcontent-%COMP%]:focus{border-color:#7b4f24;outline:none;box-shadow:0 0 8px #a06937}.text-danger[_ngcontent-%COMP%]   small[_ngcontent-%COMP%], .error-message[_ngcontent-%COMP%]{font-family:Georgia,serif;color:#a04a1b;font-weight:600}.btn-guardar[_ngcontent-%COMP%]{background-color:#7b4f24;color:#f9f4e6;border:none;padding:12px 26px;font-size:16px;border-radius:14px;cursor:pointer;transition:background-color .3s ease,box-shadow .3s ease;font-family:Georgia,serif;font-weight:700;box-shadow:0 4px 10px #7b4f2499;-webkit-user-select:none;user-select:none}.btn-guardar[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#a06937;box-shadow:0 6px 14px #a06937bf}.btn-guardar[_ngcontent-%COMP%]:disabled{background-color:#c4a378;cursor:not-allowed;box-shadow:none}.btn-cancel[_ngcontent-%COMP%]{background-color:#f2d388;color:#4b2e05;border:none;padding:12px 26px;font-size:16px;border-radius:14px;cursor:pointer;transition:background-color .3s ease,box-shadow .3s ease;font-family:Georgia,serif;font-weight:600;box-shadow:0 3px 8px #7b4f2466;-webkit-user-select:none;user-select:none}.btn-cancel[_ngcontent-%COMP%]:hover{background-color:#d4b66a;box-shadow:0 5px 12px #a0693780}"]})};function Ka(i,t){if(i&1&&P(0,"input",26),i&2){let e=g(2).$implicit;p("id",e.id)("type",e.type)("formControlName",e.name)}}function Ha(i,t){if(i&1&&P(0,"textarea",27),i&2){let e=g(2).$implicit;p("id",e.id)("formControlName",e.name)}}function Qa(i,t){if(i&1&&(he(0),c(1),_e()),i&2){let e=g().$implicit;d(),R(" ",e.message," ")}}function $a(i,t){if(i&1&&(s(0,"small"),h(1,Qa,2,1,"ng-container",22),a()),i&2){let e,n=t.$implicit,o=g(3).$implicit,r=g();d(),p("ngIf",(e=r.rallyForm.get(o.name))==null?null:e.hasError(n.type))}}function Wa(i,t){if(i&1&&(s(0,"div",28),h(1,$a,2,1,"small",29),a()),i&2){let e=g(2).$implicit;d(),p("ngForOf",e.errors)}}function Ya(i,t){if(i&1&&(he(0),s(1,"label",23),c(2),a(),h(3,Ka,1,3,"input",24)(4,Ha,1,2,"textarea",25)(5,Wa,2,1,"div",15),_e()),i&2){let e,n=g().$implicit,o=g();d(),p("for",n.id),d(),A(n.label),d(),p("ngIf",n.type!=="textarea"),d(),p("ngIf",n.type==="textarea"),d(),p("ngIf",((e=o.rallyForm.get(n.name))==null?null:e.invalid)&&((e=o.rallyForm.get(n.name))==null?null:e.touched))}}function Za(i,t){if(i&1&&(s(0,"div",4),h(1,Ya,6,5,"ng-container",22),a()),i&2){let e=t.$implicit;d(),p("ngIf",e.name!=="theme")}}function Xa(i,t){i&1&&(s(0,"div",28)(1,"small"),c(2,"El tema es obligatorio."),a()())}function Ja(i,t){i&1&&P(0,"div",30)}function es(i,t){if(i&1&&(s(0,"div",28),c(1),a()),i&2){let e=g();d(),R(" ",e.dateRangeError," ")}}function ts(i,t){if(i&1&&(s(0,"div",31),c(1),a()),i&2){let e=g();d(),R(" ",e.message," ")}}function ns(i,t){if(i&1&&(s(0,"li")(1,"strong"),c(2),a(),P(3,"br"),c(4),G(5,"date"),P(6,"br"),c(7),G(8,"date"),P(9,"br"),c(10),P(11,"br"),c(12),a()),i&2){let e=t.$implicit;d(2),A(e.title),d(2),R(" Fecha de inicio: ",ft(5,5,e.start_date),""),d(3),R(" Fecha de finalizaci\xF3n: ",ft(8,7,e.end_date),""),d(3),R(" Ubicaci\xF3n: ",e.location,""),d(2),R(" Tema: ",e.theme," ")}}function is(i,t){if(i&1&&(s(0,"div",32)(1,"h3",33),c(2,"Rallies creados"),a(),s(3,"ul"),h(4,ns,13,9,"li",29),a()()),i&2){let e=g();d(4),p("ngForOf",e.rallies)}}var yn=class i{constructor(t,e,n){this.formBuilder=t;this.rallyService=e;this.router=n;this.rallyForm=this.formBuilder.group({title:["",[L.required,L.minLength(6)]],description:["",[L.required,L.minLength(10),L.maxLength(250)]],start_date:["",L.required],end_date:["",L.required],location:["",L.required],theme:["",L.required]})}rallyForm;isLoading=!1;message="";dateRangeError=null;titleDuplicationError=null;rallies=[];onSubmit(){if(this.dateRangeError=null,this.titleDuplicationError=null,this.rallyForm.valid){let t=new Date(this.rallyForm.value.start_date);if(new Date(this.rallyForm.value.end_date)<t){this.dateRangeError="La fecha de finalizaci\xF3n no puede ser anterior a la de inicio.";return}let n=Se(q({},this.rallyForm.value),{created_by:parseInt(localStorage.getItem("userId")||"0",10)});this.isLoading=!0,this.rallyService.createRally(n).subscribe(o=>{if(o?.error&&o.error==="Ya existe un rally con ese t\xEDtulo y fecha de inicio"){this.titleDuplicationError=o.error,this.isLoading=!1;return}this.message="Rally creado exitosamente!",this.isLoading=!1,this.rallyService.getAllRallies().subscribe(r=>{this.rallies=r}),this.router.navigate(["/admin/gestion-rallies"])},o=>{this.isLoading=!1,this.message=o?.error?.error||"Error al crear el rally. Int\xE9ntalo nuevamente."})}}fields=[{id:"title",name:"title",label:"T\xEDtulo",type:"text",errors:[{type:"required",message:"El t\xEDtulo es obligatorio."},{type:"minlength",message:"Debe tener al menos 6 caracteres."}]},{id:"description",name:"description",label:"Descripci\xF3n",type:"textarea",errors:[{type:"required",message:"La descripci\xF3n es obligatoria."},{type:"minlength",message:"Debe tener al menos 10 caracteres."},{type:"maxlength",message:"No puede tener m\xE1s de 250 caracteres."}]},{id:"start_date",name:"start_date",label:"Fecha de inicio",type:"date",errors:[{type:"required",message:"La fecha de inicio es obligatoria."}]},{id:"end_date",name:"end_date",label:"Fecha de finalizaci\xF3n",type:"date",errors:[{type:"required",message:"La fecha de finalizaci\xF3n es obligatoria."}]},{id:"location",name:"location",label:"Ubicaci\xF3n",type:"text",errors:[{type:"required",message:"La ubicaci\xF3n es obligatoria."}]},{id:"theme",name:"theme",label:"Tema",type:"text",errors:[{type:"required",message:"El tema es obligatorio."}]}];getIconClassByTheme(t=""){switch(t){case"fotografia":return"fa-solid fa-camera-retro";case"naturaleza":return"fa-solid fa-tree";case"deporte":return"fa-solid fa-person-hiking";case"animales":return"fa-solid fa-paw";case"comida":return"fa-solid fa-utensils";case"mar y playa":return"fa-solid fa-umbrella-beach";case"paisaje urbano":return"fa-solid fa-city";default:return"fa-solid fa-question"}}cancelCreation(){this.router.navigate(["admin/gestion-rallies"])}static \u0275fac=function(e){return new(e||i)(v(Je),v(Fe),v(I))};static \u0275cmp=k({type:i,selectors:[["app-create-rallies"]],decls:35,vars:8,consts:[[1,"form-container"],[1,"form-title"],[3,"ngSubmit","formGroup"],["class","form-group",4,"ngFor","ngForOf"],[1,"form-group"],["for","theme"],["id","theme","formControlName","theme",1,"form-control-custom"],["value",""],["value","fotografia"],["value","naturaleza"],["value","deporte"],["value","animales"],["value","comida"],["value","mar y playa"],["value","paisaje urbano"],["class","text-danger",4,"ngIf"],["class","icon-preview",4,"ngIf"],[1,"form-group","button-group"],["type","submit",1,"btn-submit",3,"disabled"],["type","button",1,"btn-cancel",3,"click"],["class","alert-info-custom",4,"ngIf"],["class","rally-list",4,"ngIf"],[4,"ngIf"],[3,"for"],["class","form-control-custom",3,"id","type","formControlName",4,"ngIf"],["class","form-control-custom",3,"id","formControlName",4,"ngIf"],[1,"form-control-custom",3,"id","type","formControlName"],[1,"form-control-custom",3,"id","formControlName"],[1,"text-danger"],[4,"ngFor","ngForOf"],[1,"icon-preview"],[1,"alert-info-custom"],[1,"rally-list"],[1,"list-title"]],template:function(e,n){if(e&1&&(s(0,"div",0)(1,"h2",1),c(2,"Crear Rally"),a(),s(3,"form",2),_("ngSubmit",function(){return n.onSubmit()}),h(4,Za,2,1,"div",3),s(5,"div",4)(6,"label",5),c(7,"Tema del Rally"),a(),s(8,"select",6)(9,"option",7),c(10,"Selecciona un tema"),a(),s(11,"option",8),c(12,"\u{1F4F8} Fotograf\xEDa general"),a(),s(13,"option",9),c(14,"\u{1F33F} Naturaleza"),a(),s(15,"option",10),c(16,"\u{1F3C3}\u200D\u2642\uFE0F Deporte"),a(),s(17,"option",11),c(18,"\u{1F43E} Animales"),a(),s(19,"option",12),c(20,"\u{1F37D}\uFE0F Comida"),a(),s(21,"option",13),c(22,"\u{1F3D6}\uFE0F Mar y Playa"),a(),s(23,"option",14),c(24,"\u{1F306} Paisaje Urbano"),a()(),h(25,Xa,3,0,"div",15)(26,Ja,1,0,"div",16),a(),h(27,es,2,1,"div",15),s(28,"div",17)(29,"button",18),c(30,"Crear Rally"),a(),s(31,"button",19),_("click",function(){return n.cancelCreation()}),c(32,"Cancelar"),a()(),h(33,ts,2,1,"div",20),a(),h(34,is,5,1,"div",21),a()),e&2){let o,r;d(3),p("formGroup",n.rallyForm),d(),p("ngForOf",n.fields),d(21),p("ngIf",((o=n.rallyForm.get("theme"))==null?null:o.invalid)&&((o=n.rallyForm.get("theme"))==null?null:o.touched)),d(),p("ngIf",(r=n.rallyForm.get("theme"))==null?null:r.value),d(),p("ngIf",n.dateRangeError),d(2),p("disabled",n.isLoading),d(4),p("ngIf",n.message),d(),p("ngIf",n.rallies.length>0)}},dependencies:[U,K,j,de,et,Be,vt,Ct,ve,yt,Ce,Ve,_t,bt],styles:[".form-container[_ngcontent-%COMP%]{max-width:700px;margin:40px auto;padding:32px 36px;background-color:#fff8f0;border-radius:18px;box-shadow:0 8px 22px #a0693726;font-family:Georgia,serif;color:#4b2e05}.form-title[_ngcontent-%COMP%]{text-align:center;font-size:30px;margin-bottom:28px;color:#7b4f24;font-weight:700;text-shadow:1px 1px 2px #a06937}.form-group[_ngcontent-%COMP%]{margin-bottom:24px}label[_ngcontent-%COMP%]{display:block;margin-bottom:10px;font-weight:700;color:#7b4f24;font-family:Georgia,serif}.form-control-custom[_ngcontent-%COMP%]{width:100%;padding:14px 16px;border:1.5px solid #a06937;border-radius:14px;background-color:#fff8f0;font-size:16px;font-family:Georgia,serif;color:#4b2e05;transition:border-color .3s ease,box-shadow .3s ease;box-shadow:inset 0 1px 3px #a0693726}.form-control-custom[_ngcontent-%COMP%]:focus{border-color:#7b4f24;outline:none;box-shadow:0 0 8px #a06937}.text-danger[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block;color:#a04a1b;margin-top:6px;font-family:Georgia,serif;font-weight:600}.btn-submit[_ngcontent-%COMP%]{background-color:#7b4f24;color:#f9f4e6;padding:14px 0;font-size:18px;border:none;border-radius:14px;width:100%;cursor:pointer;transition:background-color .3s ease,box-shadow .3s ease;font-family:Georgia,serif;font-weight:700;box-shadow:0 6px 14px #7b4f2499;-webkit-user-select:none;user-select:none}.btn-submit[_ngcontent-%COMP%]:hover{background-color:#a06937;box-shadow:0 8px 18px #a06937bf}.alert-info-custom[_ngcontent-%COMP%]{margin-top:24px;background-color:#f1e3d3;padding:14px 20px;border-radius:14px;color:#5a3e36;text-align:center;border-left:6px solid #a06937;font-family:Georgia,serif;font-weight:600}.rally-list[_ngcontent-%COMP%]{margin-top:48px;background-color:#fff8f0;border-radius:14px;padding:24px 28px;box-shadow:inset 0 0 14px #a069371f}.list-title[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;color:#7b4f24;font-family:Georgia,serif;font-weight:700}ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}li[_ngcontent-%COMP%]{background-color:#fdf7ef;padding:16px 20px;margin-bottom:14px;border-left:6px solid #a06937;border-radius:12px;font-family:Georgia,serif;color:#4b2e05;font-weight:600}.button-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:16px;margin-top:12px}.btn-cancel[_ngcontent-%COMP%]{background-color:#f2d388;color:#4b2e05;padding:14px 0;font-size:16px;border:none;border-radius:14px;width:100%;cursor:pointer;transition:background-color .3s ease,box-shadow .3s ease;font-family:Georgia,serif;font-weight:600;box-shadow:0 4px 10px #7b4f2480;-webkit-user-select:none;user-select:none}.btn-cancel[_ngcontent-%COMP%]:hover{background-color:#d4b66a;box-shadow:0 6px 12px #a0693799}.icono-tema-preview[_ngcontent-%COMP%]{font-size:2.2rem;margin-top:8px;display:inline-block;color:#7b4f24;text-shadow:1px 1px 2px #a06937}.icon-preview[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.6rem;color:#5a3e36;font-family:Georgia,serif}"]})};var oe=class i{constructor(t,e){this.authService=t;this.router=e}canActivate(){return this.authService.isAuthenticated()?!0:(this.router.navigate(["/login"]),!1)}static \u0275fac=function(e){return new(e||i)(W(me),W(I))};static \u0275prov=ae({token:i,factory:i.\u0275fac,providedIn:"root"})};var je=class i{constructor(t,e){this.authService=t;this.router=e}canActivate(){let t=this.authService.getUserRole(),e=this.authService.getUserId();return t==="admin"?!0:(this.router.navigate(["/user/dashboard"]),!1)}static \u0275fac=function(e){return new(e||i)(W(me),W(I))};static \u0275prov=ae({token:i,factory:i.\u0275fac,providedIn:"root"})};var Ge=class i{constructor(t,e){this.authService=t;this.router=e}canActivate(t,e){return this.authService.getRole()==="admin"?(this.router.navigate(["/admin"]),!1):!0}static \u0275fac=function(e){return new(e||i)(W(me),W(I))};static \u0275prov=ae({token:i,factory:i.\u0275fac,providedIn:"root"})};var vn=class i{constructor(t){this.http=t}apiInscripcionesUrl=`${Pe.apiUrl}/inscripciones.php`;obtenerInscripciones(t){return this.http.get(`${this.apiInscripcionesUrl}?userId=${t}`)}gestionarInscripcion(t,e){let n={rallyId:t,userId:e};return this.http.post(this.apiInscripcionesUrl,n)}static \u0275fac=function(e){return new(e||i)(W(gt))};static \u0275prov=ae({token:i,factory:i.\u0275fac,providedIn:"root"})};var rs=()=>["/mis-fotos"],as=()=>["/faqs"],ss=(i,t,e)=>({"estado-aprobada":i,"estado-pendiente":t,"estado-rechazada":e});function ls(i,t){i&1&&(s(0,"span"),c(1," Aprobada \u2705"),a())}function cs(i,t){i&1&&(s(0,"span"),c(1," Pendiente \u23F3"),a())}function ds(i,t){i&1&&(s(0,"span"),c(1," Rechazada \u274C"),a())}function ms(i,t){if(i&1){let e=V();s(0,"div",26)(1,"img",27),_("click",function(){let o=x(e).$implicit,r=g(4);return w(r.openImageModal(o.photo_url))}),a(),s(2,"p"),c(3),a(),s(4,"p")(5,"span",28),c(6,"Status:"),a(),s(7,"span",29),he(8,30),h(9,ls,2,0,"span",31)(10,cs,2,0,"span",31)(11,ds,2,0,"span",31),_e(),a()()()}if(i&2){let e=t.$implicit;d(),p("src",e.photo_url,Oe),d(2),A(e.title||"Sin t\xEDtulo"),d(4),p("ngClass",Jt(7,ss,e.status==="aprobada",e.status==="pendiente",e.status==="rechazada")),d(),p("ngSwitch",e.status),d(),p("ngSwitchCase","aprobada"),d(),p("ngSwitchCase","pendiente"),d(),p("ngSwitchCase","rechazada")}}function ps(i,t){if(i&1&&(s(0,"div",23)(1,"h6"),c(2,"Mis fotos subidas:"),a(),s(3,"div",24),h(4,ms,12,11,"div",25),a()()),i&2){let e=g().ngIf;d(4),p("ngForOf",e)}}function us(i,t){if(i&1&&(he(0),h(1,ps,5,1,"div",22),_e()),i&2){let e=t.ngIf;d(),p("ngIf",e.length>0)}}function fs(i,t){if(i&1){let e=V();s(0,"div",32),_("click",function(){x(e);let o=g(2);return w(o.closeImageModal())}),s(1,"span",33),c(2,"\xD7"),a(),P(3,"img",34),a()}if(i&2){let e=g(2);d(3),p("src",e.imagenModalUrl,Oe)}}function gs(i,t){if(i&1){let e=V();s(0,"div",12)(1,"div",13)(2,"div",14)(3,"div",15)(4,"h3"),c(5),a(),s(6,"h4",16),c(7," Inicio: "),s(8,"span",17),c(9),G(10,"date"),a(),c(11," - Fin: "),s(12,"span",17),c(13),G(14,"date"),a()()()(),h(15,us,2,1,"ng-container",18)(16,fs,4,1,"div",19),s(17,"div",20)(18,"button",21),_("click",function(){let o=x(e).$implicit,r=g();return w(r.openModal(o))}),c(19),a()()()()}if(i&2){let e=t.$implicit,n=g();d(5),A(e.title),d(4),A(te(10,7,e.start_date,"dd/MM/yyyy")),d(4),A(te(14,10,e.end_date,"dd/MM/yyyy")),d(2),p("ngIf",n.fotosPorRally&&n.fotosPorRally[e.id]),d(),p("ngIf",n.imagenModalVisible),d(2),p("disabled",n.isRallyFinished(e.end_date)),d(),R(" ",n.isRallyFinished(e.end_date)?"Rally finalizado":"Subir Foto"," ")}}function hs(i,t){if(i&1&&(s(0,"div"),P(1,"img",43),a()),i&2){let e=g(2);d(),p("src",e.imagePreview,Oe)}}function _s(i,t){if(i&1){let e=V();s(0,"div",35)(1,"div",36)(2,"h5"),c(3),a(),s(4,"label",37),c(5,"T\xEDtulo de la foto"),a(),P(6,"br"),s(7,"input",38),ce("ngModelChange",function(o){x(e);let r=g();return le(r.tituloFoto,o)||(r.tituloFoto=o),w(o)}),a(),s(8,"input",39),_("change",function(o){x(e);let r=g();return w(r.onFileSelected(o))}),a(),h(9,hs,2,1,"div",18),s(10,"div",40)(11,"button",41),_("click",function(){x(e);let o=g();return w(o.onSubmit())}),c(12,"Subir Foto"),a(),s(13,"button",42),_("click",function(){x(e);let o=g();return w(o.closeModal())}),c(14,"Cerrar"),a()()()()}if(i&2){let e=g();d(3),R("Subir foto para el rally: ",e.rallySeleccionado==null?null:e.rallySeleccionado.title,""),d(4),se("ngModel",e.tituloFoto),d(2),p("ngIf",e.imagePreview)}}function bs(i,t){if(i&1&&(s(0,"div",44),c(1),a()),i&2){let e=g();d(),R(" ",e.popupMensaje," ")}}var Cn=class i{constructor(t,e,n,o,r){this.inscripcionesService=t;this.router=e;this.userService=n;this.photoService=o;this.sweetAlert=r}tabActivo="misrallies";misRallies=[];rallySeleccionado=null;isModalOpen=!1;selectedFile=null;imagePreview=null;usuario=null;tituloFoto="";popupVisible=!1;popupMensaje="";imagenModalVisible=!1;imagenModalUrl=null;fotosPorRally={};ngOnInit(){let t=localStorage.getItem("userId");if(!t){console.error("Usuario no encontrado o no tiene un ID v\xE1lido.");return}this.userService.getUserById(Number(t)).subscribe(e=>{this.usuario=e,this.inscripcionesService.obtenerInscripciones(Number(t)).subscribe({next:n=>{if(n.success){this.misRallies=n.inscritos;for(let o of this.misRallies)this.loadFotosSubidas(o.id)}else console.error(n.message)},error:n=>console.error("Error al obtener mis rallies:",n)})})}seleccionarTab(t){this.tabActivo=t}openModal(t){if(this.rallySeleccionado=t,(this.fotosPorRally[t.id]?.length||0)>=3){this.sweetAlert.info("Ya has subido el n\xFAmero m\xE1ximo de fotos para este rally.","L\xEDmite alcanzado");return}this.isModalOpen=!0,this.usuario&&this.loadFotosSubidas(t.id)}closeModal(){this.isModalOpen=!1,this.selectedFile=null,this.imagePreview=null}onFileSelected(t){let e=t.target.files[0];if(e){this.selectedFile=e;let n=new FileReader;n.onload=()=>{this.imagePreview=n.result},n.readAsDataURL(e)}}loadFotosSubidas(t){this.photoService.getFotosPorRallyYUsuario(t,this.usuario.id).subscribe({next:e=>{console.log(e),this.fotosPorRally[t]=(e.photos||[]).map(n=>Se(q({},n),{photo_url:`${Pe.apiUrl}/${n.photo_url}`}))},error:e=>{console.error("Error al cargar fotos:",e),this.fotosPorRally[t]=[]}})}isRallyFinished(t){let e=new Date;return new Date(t)<e}onSubmit(){if(!this.selectedFile){this.sweetAlert.info("Por favor selecciona una foto.");return}if(this.selectedFile&&this.usuario){let t=this.usuario.id,e=this.rallySeleccionado?.id,n=this.tituloFoto||this.selectedFile.name||"Sin t\xEDtulo";e?this.photoService.uploadPhoto(this.selectedFile,t,e,n).subscribe({next:o=>{this.sweetAlert.success("Foto subida correctamente","\xA1Buen trabajo!"),this.loadFotosSubidas(e),this.selectedFile=null,this.imagePreview=null,this.tituloFoto="",this.closeModal()},error:o=>{console.error("Error al subir la foto:",o)}}):this.sweetAlert.warning("No se ha seleccionado un rally v\xE1lido!")}}openImageModal(t){this.imagenModalUrl=t,this.imagenModalVisible=!0}closeImageModal(){this.imagenModalVisible=!1,this.imagenModalUrl=null}mostrarPopup(t){this.popupMensaje=t,this.popupVisible=!0,setTimeout(()=>{this.popupVisible=!1},5e3)}volverADashboard(){this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigate(["/user/dashboard"])})}entrarGaleria(){this.router.navigate(["/gallery"],{queryParams:{from:"dashboard"}})}goBackToUserPanel(){this.router.navigate(["user/dashboard"])}static \u0275fac=function(e){return new(e||i)(v(vn),v(I),v(xt),v(qe),v(Te))};static \u0275cmp=k({type:i,selectors:[["app-mis-rallies"]],decls:22,vars:17,consts:[[1,"mis-rallies"],[1,"mis-rallies-header"],[1,"tabs"],[3,"click"],[3,"routerLink"],[1,"titulo-seccion"],[1,"rallies-container"],["class","rally-card",4,"ngFor","ngForOf"],["class","modal-overlay",4,"ngIf"],["class","popup-error",4,"ngIf"],[1,"button-container"],[1,"btn","volver",3,"click"],[1,"rally-card"],[1,"card-body"],[1,"d-flex","flex-column","flex-md-row","align-items-start","align-items-md-center","gap-3"],[1,"flex-grow-1"],[1,"fechas-rally"],[1,"label"],[4,"ngIf"],["class","image-modal",3,"click",4,"ngIf"],[1,"card-buttons"],[1,"btn",3,"click","disabled"],["class","miniaturas-container",4,"ngIf"],[1,"miniaturas-container"],[1,"miniaturas"],["class","foto-preview",4,"ngFor","ngForOf"],[1,"foto-preview"],["alt","Foto subida",2,"cursor","pointer",3,"click","src"],[2,"color","#5c3a1e"],[3,"ngClass"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"image-modal",3,"click"],[1,"close"],["alt","Imagen ampliada",1,"modal-content","modal-imagen-ampliada",3,"src"],[1,"modal-overlay"],[1,"subir-foto-modal"],["for","tituloFoto"],["id","tituloFoto","type","text","placeholder","Introduce un t\xEDtulo",3,"ngModelChange","ngModel"],["type","file",3,"change"],[1,"modal-buttons"],[1,"btn","btn-subir",3,"click"],[1,"btn","btn-cerrar",3,"click"],["alt","Vista previa",1,"preview-img",3,"src"],[1,"popup-error"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"header",1)(2,"nav",2)(3,"button",3),_("click",function(){return n.volverADashboard()}),c(4,"Perfil"),a(),s(5,"button",3),_("click",function(){return n.seleccionarTab("mis-rallies")}),c(6,"Mis Rallies"),a(),s(7,"button",4),c(8,"Mis Fotos"),a(),s(9,"button",3),_("click",function(){return n.entrarGaleria()}),c(10,"Galer\xEDa"),a(),s(11,"button",4),c(12,"FAQs"),a()()(),s(13,"h2",5),c(14,"Mis Rallies"),a(),s(15,"div",6),h(16,gs,20,13,"div",7),a(),h(17,_s,15,3,"div",8)(18,bs,2,1,"div",9),s(19,"div",10)(20,"button",11),_("click",function(){return n.goBackToUserPanel()}),c(21,"Volver"),a()()()),e&2&&(d(3),Z("active",n.tabActivo==="perfil"),d(2),Z("active",n.tabActivo==="misrallies"),d(2),Z("active",n.tabActivo==="misfotos"),p("routerLink",De(15,rs)),d(2),Z("active",n.tabActivo==="gallery"),d(2),Z("active",n.tabActivo==="faqs"),p("routerLink",De(16,as)),d(5),p("ngForOf",n.misRallies),d(),p("ngIf",n.isModalOpen),d(),p("ngIf",n.popupVisible))},dependencies:[U,Ne,K,j,en,tn,de,$,ve,Ce,Xe,Le,ht],styles:['@font-face{font-family:Merriweather;font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v32/u-4D0qyriQwlOrhSvowK_l5UcA6zuSYEqOzpPe3HOZJ5eX1WtLaQwmYiScCmDxhtNOKl8yDr3icaGV31GvU.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Merriweather;font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v32/u-4D0qyriQwlOrhSvowK_l5UcA6zuSYEqOzpPe3HOZJ5eX1WtLaQwmYiScCmDxhtNOKl8yDr3icaEF31GvU.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Merriweather;font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v32/u-4D0qyriQwlOrhSvowK_l5UcA6zuSYEqOzpPe3HOZJ5eX1WtLaQwmYiScCmDxhtNOKl8yDr3icaG131GvU.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Merriweather;font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v32/u-4D0qyriQwlOrhSvowK_l5UcA6zuSYEqOzpPe3HOZJ5eX1WtLaQwmYiScCmDxhtNOKl8yDr3icaGl31GvU.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Merriweather;font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v32/u-4D0qyriQwlOrhSvowK_l5UcA6zuSYEqOzpPe3HOZJ5eX1WtLaQwmYiScCmDxhtNOKl8yDr3icaFF31.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}[_nghost-%COMP%]{font-family:Merriweather,serif}*[_ngcontent-%COMP%]{box-sizing:border-box}img[_ngcontent-%COMP%]{max-width:100%;height:auto}.mis-rallies[_ngcontent-%COMP%]{background:url(/images/fondo3.jpg) no-repeat center top;background-size:cover;min-height:100vh;padding:1rem}h3[_ngcontent-%COMP%], .titulo-seccion[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{text-align:center;color:#4b2e05;text-shadow:1px 1px 1px #7b4f24}h3[_ngcontent-%COMP%]{font-size:2rem;margin-top:1rem;font-weight:700}.titulo-seccion[_ngcontent-%COMP%]{font-size:2rem;margin:1rem;font-weight:700;text-shadow:.0625rem .0625rem .125rem #d4a373;color:#4a2c14}h6[_ngcontent-%COMP%]{font-size:1.3rem;margin-bottom:1.5rem;color:#5c3a1e}.mis-rallies-header[_ngcontent-%COMP%]{background-color:#7b4f24;color:#f9f4e6;padding:1.5rem 2rem;border-radius:1rem;box-shadow:0 .25rem .625rem #7b4f2480;margin:0 1rem 2rem;-webkit-user-select:none;user-select:none}.mis-rallies-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 .8rem;font-weight:700;font-size:2rem;text-shadow:1px 1px 4px #3c2608}.tabs[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:none;color:#e0cda9;font-weight:600;font-size:1rem;padding:.5rem 1rem;border-bottom:.25rem solid transparent;cursor:pointer;transition:color .3s ease,border-bottom-color .3s ease;white-space:nowrap}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#fff6d6}.tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{border-bottom-color:#f2d388;color:#f9f4e6;font-weight:700}.rally-card[_ngcontent-%COMP%]{background-color:#f2d388;padding:3rem;border-radius:1.5rem;box-shadow:0 .5rem 1.5rem #8b45131a;border:.0625rem solid #e0c9a6;margin:2rem auto;max-width:95%}.fechas-rally[_ngcontent-%COMP%]{text-align:center;margin-top:1rem;font-size:1.2rem;font-weight:500}.fechas-rally[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .fechas-rally[_ngcontent-%COMP%]   .fecha[_ngcontent-%COMP%]{font-weight:700;color:#4b2e05}.card-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#5c3a1e;margin-bottom:2rem;text-align:center;text-shadow:.1rem .1rem .2rem #d4a373}.miniaturas-container[_ngcontent-%COMP%]{margin-top:2rem}.miniaturas[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1.5rem;justify-content:center}.foto-preview[_ngcontent-%COMP%]{text-align:center;max-width:25rem;flex:1 1 30%;position:relative}.foto-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-width:370px;aspect-ratio:370 / 300;object-fit:cover;border:.25rem solid #d4a373;border-radius:1rem;box-shadow:0 .25rem 1rem #00000026;cursor:pointer;transition:transform .3s ease,box-shadow .3s ease}.foto-preview[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0;font-size:1.2rem;font-weight:700}.estado-aprobada[_ngcontent-%COMP%]{color:#4caf50}.estado-pendiente[_ngcontent-%COMP%]{color:#ac8511}.estado-rechazada[_ngcontent-%COMP%]{color:#f44336}.estado-aprobada[_ngcontent-%COMP%], .estado-pendiente[_ngcontent-%COMP%], .estado-rechazada[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700}.btn[_ngcontent-%COMP%], .btn.volver[_ngcontent-%COMP%], .btn-subir[_ngcontent-%COMP%]{font-weight:700;border-radius:.5rem;border:none;cursor:pointer;box-sizing:border-box;text-align:center}.btn[_ngcontent-%COMP%], .btn.volver[_ngcontent-%COMP%], .btn-subir[_ngcontent-%COMP%]{background-color:sienna;color:#fff;padding:1rem 2rem;transition:background-color .3s ease;display:block;margin:2rem auto;font-size:1.25rem}.btn[_ngcontent-%COMP%]:hover, .btn.volver[_ngcontent-%COMP%]:hover, .btn-subir[_ngcontent-%COMP%]:hover{background-color:#918f8f}.btn-cerrar[_ngcontent-%COMP%]{background-color:#ddd;color:#333;padding:.75rem 1.5rem;margin-left:1rem}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#0009;display:flex;justify-content:center;align-items:center;z-index:9999;cursor:zoom-out}.subir-foto-modal[_ngcontent-%COMP%]{background-color:#f9f4e6;padding:2.5rem;border-radius:1rem;max-width:600px;width:95%;max-height:90vh;overflow-y:auto;box-shadow:0 .5rem 1.5rem #0000004d;position:relative;z-index:10000}.modal-imagen-ampliada[_ngcontent-%COMP%]{background-color:transparent;border-radius:10px;max-width:90%;max-height:90vh;object-fit:contain;-webkit-user-select:none;user-select:none;box-shadow:0 4px 20px #00000080}.modal-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin-bottom:1rem;color:#5c3a1e;text-align:center}.modal-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin:1rem 0 .5rem;font-weight:600;color:#5c3a1e}.modal-content[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{width:100%;padding:.5rem;font-size:1rem;border-radius:.5rem;border:1px solid #ccc}.modal-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:1.5rem;gap:.5rem}.modal-buttons[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%], .modal-buttons[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{flex:1;padding:.75rem 1.5rem}.preview-container[_ngcontent-%COMP%]{margin-top:1rem;text-align:center}.preview-img[_ngcontent-%COMP%]{max-width:100%;max-height:60vh;object-fit:contain;margin-top:1rem;border:2px solid #d4a373;border-radius:1rem;box-shadow:0 .25rem 1rem #00000026}.image-modal[_ngcontent-%COMP%]{position:fixed;z-index:9999;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:#000c;display:flex;justify-content:center;align-items:center;cursor:zoom-out}.image-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{max-width:90%;max-height:90vh;border-radius:10px;box-shadow:0 4px 20px #00000080;object-fit:contain;-webkit-user-select:none;user-select:none}.image-modal[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:fixed;top:20px;right:30px;color:#fff;font-size:3rem;font-weight:700;cursor:pointer;-webkit-user-select:none;user-select:none;transition:color .3s ease;z-index:10000}.image-modal[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover{color:#d4a373}.popup-error[_ngcontent-%COMP%]{position:fixed;top:1.25rem;right:1.25rem;background-color:#b22222;color:#fff;padding:1rem 1.5rem;border-radius:.5rem;z-index:10000;box-shadow:0 .25rem .5rem #0003;animation:_ngcontent-%COMP%_fadeInOut 3s ease-in-out}.disabled-note[_ngcontent-%COMP%]{font-size:.9rem;margin-top:.5rem;font-style:italic;color:#8b4513}@keyframes _ngcontent-%COMP%_fadeInOut{0%{opacity:0;transform:translateY(-.625rem)}10%,90%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-.625rem)}}@media (max-width: 900px){.rally-card[_ngcontent-%COMP%]{padding:2rem}.foto-preview[_ngcontent-%COMP%]{max-width:80%;flex:1 1 45%}}@media (max-width: 600px){.mis-rallies[_ngcontent-%COMP%]{padding:1rem .5rem}.mis-rallies-header[_ngcontent-%COMP%]{padding:1rem;margin:0 .5rem}.tabs[_ngcontent-%COMP%]{gap:.5rem}.btn[_ngcontent-%COMP%], .btn.volver[_ngcontent-%COMP%]{font-size:1rem;padding:.75rem 1.25rem}@media (max-width: 400px){.subir-foto-modal[_ngcontent-%COMP%]{padding:1.5rem 1rem;border-radius:.8rem}}.image-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{max-width:95%;max-height:80vh}.image-modal[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{font-size:2.5rem;top:10px;right:15px}.modal-content[_ngcontent-%COMP%]{padding:1.25rem}.modal-title[_ngcontent-%COMP%]{font-size:1.25rem}.btn-subir[_ngcontent-%COMP%], .btn-cerrar[_ngcontent-%COMP%]{font-size:.9rem;padding:.5rem 1rem}}']})};var ys=["editFileInput"],vs=()=>["/mis-rallies"],Cs=()=>["/faqs"],xs=(i,t,e)=>({"estado-aprobada":i,"estado-pendiente":t,"estado-rechazada":e});function ws(i,t){if(i&1){let e=V();s(0,"img",24),_("error",function(){x(e);let o=g().$implicit;return w(o.photo_url=null)}),a()}if(i&2){let e=g().$implicit,n=g(2);Hi("alt",e.title),p("src",n.getFullImageUrl(e.photo_url),Oe)}}function Ms(i,t){i&1&&(s(0,"span"),c(1," Aprobada \u2705"),a())}function Ss(i,t){i&1&&(s(0,"span"),c(1," Pendiente \u23F3"),a())}function Ps(i,t){i&1&&(s(0,"span"),c(1," Rechazada \u274C"),a())}function Es(i,t){if(i&1){let e=V();s(0,"div",15),h(1,ws,1,2,"img",16),s(2,"h3"),c(3),a(),s(4,"p",17)(5,"span",18),c(6,"Estado:"),a(),s(7,"span",19),he(8,20),h(9,Ms,2,0,"span",21)(10,Ss,2,0,"span",21)(11,Ps,2,0,"span",21),_e(),a()(),s(12,"button",22),_("click",function(){let o=x(e).$implicit,r=g(2);return w(r.editPhoto(o))}),c(13,"Editar"),a(),s(14,"button",23),_("click",function(){let o=x(e).$implicit,r=g(2);return w(r.deletePhoto(o.id))}),c(15,"Eliminar"),a()()}if(i&2){let e=t.$implicit;d(),p("ngIf",e.photo_url),d(2),A(e.title),d(4),p("ngClass",Jt(7,xs,e.status==="aprobada",e.status==="pendiente",e.status==="rechazada")),d(),p("ngSwitch",e.status),d(),p("ngSwitchCase","aprobada"),d(),p("ngSwitchCase","pendiente"),d(),p("ngSwitchCase","rechazada")}}function Os(i,t){if(i&1&&(s(0,"div",13),h(1,Es,16,11,"div",14),a()),i&2){let e=g();d(),p("ngForOf",e.fotos)}}function Ts(i,t){i&1&&(s(0,"div",25)(1,"p"),c(2,"No hay fotos para mostrar."),a()())}function Fs(i,t){i&1&&(s(0,"div",39),c(1," Solo se puede modificar el nombre. La imagen ya fue aprobada. "),a())}function As(i,t){i&1&&(s(0,"p",40),c(1," No se puede cambiar la imagen si la foto ya fue aprobada. "),a())}function Is(i,t){if(i&1&&(s(0,"div",41),P(1,"img",42),a()),i&2){let e=g(2);d(),p("src",e.imagePreview,Oe)}}function Ds(i,t){if(i&1){let e=V();s(0,"div",26)(1,"div",27)(2,"h4",28),c(3),a(),h(4,Fs,2,0,"div",29),s(5,"label",30),c(6,"Nuevo T\xEDtulo"),a(),s(7,"input",31),ce("ngModelChange",function(o){x(e);let r=g();return le(r.selectedPhoto.title,o)||(r.selectedPhoto.title=o),w(o)}),a(),s(8,"label",32),c(9,"Nueva Foto"),a(),s(10,"input",33,0),_("change",function(o){x(e);let r=g();return w(r.onFileSelected(o))}),a(),h(12,As,2,0,"p",34)(13,Is,2,1,"div",35),s(14,"div",36)(15,"button",37),_("click",function(){x(e);let o=g();return w(o.onSaveEdit())}),c(16,"Guardar cambios"),a(),s(17,"button",38),_("click",function(){x(e);let o=g();return w(o.closeEditModal())}),c(18,"Cerrar"),a()()()()}if(i&2){let e=g();d(3),R("Editar Foto: ",e.selectedPhoto==null?null:e.selectedPhoto.title,""),d(),p("ngIf",(e.selectedPhoto==null?null:e.selectedPhoto.status)==="aprobada"),d(3),se("ngModel",e.selectedPhoto.title),d(3),p("disabled",(e.selectedPhoto==null?null:e.selectedPhoto.status)==="aprobada"),d(2),p("ngIf",(e.selectedPhoto==null?null:e.selectedPhoto.status)==="aprobada"),d(),p("ngIf",e.imagePreview)}}var xn=class i{constructor(t,e,n,o){this.photoService=t;this.router=e;this.sweetAlert=n;this.fb=o}tabActivo="misfotos";usuario=null;fotos=[];rallySeleccionado=null;isModalOpen=!1;imagePreview;selectedFile=null;isEditModalOpen=!1;selectedPhoto=null;editForm;userId=0;fotosAprobadas={};editFileInput;ngOnInit(){let t=localStorage.getItem("userId");t?(this.userId=parseInt(t,10),this.loadPhotos(),this.loadAprobadas()):(this.sweetAlert.info("Usuario no encontrado."),this.router.navigate(["/login"]))}seleccionarTab(t){this.tabActivo=t}loadPhotos(){this.photoService.getFotosUsuarioActuales(this.userId).subscribe({next:t=>{this.fotos=(t?.photos||[]).map(e=>Se(q({},e),{photo_url:`${Pe.apiUrl}/${e.photo_url}?t=${Date.now()}`}))},error:t=>{console.error("Error al cargar las fotos:",t),this.sweetAlert.warning("Error al cargar las fotos.")}})}loadAprobadas(){this.photoService.getFotosAprobadasPorUsuario(this.userId).subscribe({next:t=>{t.forEach(e=>{this.photoService.getFotosAprobadas(e,this.userId).subscribe(n=>{this.fotosAprobadas[e]=n})})},error:t=>{console.error("Error al obtener rallies con fotos aprobadas:",t)}})}deletePhoto(t){let e=this.fotos.find(n=>n.id===t);if(!e)return this.sweetAlert.warning("Foto no encontrada");if(e.status==="aprobada"){this.sweetAlert.warning("No se puede eliminar una foto que ya fue aprobada.");return}this.sweetAlert.confirm("\xBFEst\xE1s seguro?","Esta acci\xF3n eliminar\xE1 la foto permanentemente.").then(n=>{n&&this.photoService.deletePhoto(t,this.userId).subscribe({next:()=>{this.fotos=this.fotos.filter(o=>o.id!==t),this.sweetAlert.success("\xA1Foto eliminada correctamente!")},error:o=>{console.error("Error al eliminar la foto:",o),this.sweetAlert.warning("Error al eliminar la foto.")}})})}editPhoto(t){this.selectedPhoto=q({},t),this.imagePreview=t.photo_url,this.selectedFile=null,this.isEditModalOpen=!0}closeEditModal(){this.isEditModalOpen=!1,this.selectedPhoto=null,this.imagePreview=void 0,this.selectedFile=null}onSaveEdit(){let t=this.editFileInput?.nativeElement,e;t&&t.files&&t.files.length>0&&(e=t.files[0]),this.photoService.editPhoto(this.userId,this.selectedPhoto.id,this.selectedPhoto.title.trim(),e).subscribe({next:n=>{let o=this.fotos.findIndex(r=>r.id===this.selectedPhoto.id);o!==-1&&(this.fotos[o]=Se(q({},this.fotos[o]),{title:this.selectedPhoto.title,status:this.fotos[o].status==="rechazada"?"pendiente":this.fotos[o].status,photo_url:`${n.photo_url}?t=${Date.now()}`}),this.selectedPhoto=q({},this.fotos[o]),this.imagePreview=this.selectedPhoto.photo_url),this.sweetAlert.success("Foto actualizada correctamente"),this.closeEditModal(),this.loadPhotos()},error:n=>{console.error("Error al editar:",n),this.sweetAlert.warning("Error al editar la foto")}})}onFileSelected(t){let e=t.target;if(e.files&&e.files.length>0){let n=e.files[0],o=n.name.replace(/\.[^/.]+$/,"");this.selectedPhoto.title=o;let r=new FileReader;r.onload=()=>{this.imagePreview=r.result},r.readAsDataURL(n)}}getFullImageUrl(t){return t.startsWith("http")?t:`${Pe.apiUrl}/${t}`}openEditModal(t){this.isModalOpen=!0,this.rallySeleccionado=t}closeModal(){this.isModalOpen=!1,this.imagePreview=void 0,this.selectedFile=null}onSubmit(){this.rallySeleccionado&&this.selectedFile?this.photoService.uploadPhoto(this.selectedFile,this.userId,this.rallySeleccionado.id,this.rallySeleccionado.title).subscribe({next:()=>{this.sweetAlert.success("Foto subida correctamente"),this.closeModal(),this.loadPhotos()},error:t=>{console.error("Error al subir la foto:",t),this.sweetAlert.warning("Error al subir la foto")}}):this.sweetAlert.info("Por favor selecciona una foto y un rally.")}volverADashboard(){this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigate(["/user/dashboard"])})}entrarGaleria(){this.router.navigate(["/gallery"],{queryParams:{from:"dashboard"}})}goBackToUserPanel(){this.router.navigate(["/user/dashboard"])}static \u0275fac=function(e){return new(e||i)(v(qe),v(I),v(Te),v(Je))};static \u0275cmp=k({type:i,selectors:[["app-mis-fotos"]],viewQuery:function(e,n){if(e&1&&Qi(ys,5),e&2){let o;$i(o=Wi())&&(n.editFileInput=o.first)}},decls:22,vars:17,consts:[["editFileInput",""],[1,"mis-fotos"],[1,"mis-fotos-header"],[1,"tabs"],[3,"click"],[3,"routerLink"],[1,"container"],[1,"section-title"],["class","photo-grid",4,"ngIf"],["class","no-photos",4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"button-container"],[1,"back-button",3,"click"],[1,"photo-grid"],["class","photo-card",4,"ngFor","ngForOf"],[1,"photo-card"],["class","photo-img",3,"src","alt","error",4,"ngIf"],[1,"status-text"],[2,"color","#5c3a1e"],[3,"ngClass"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"edit-btn",3,"click"],[1,"delete-btn",3,"click"],[1,"photo-img",3,"error","src","alt"],[1,"no-photos"],[1,"modal-overlay"],[1,"modal-content"],[1,"modal-title"],["class","alert alert-warning","style","margin-bottom: 10px;",4,"ngIf"],["for","title"],["type","text","placeholder","Nuevo t\xEDtulo",1,"form-control",3,"ngModelChange","ngModel"],["for","photo"],["type","file","id","photo",1,"photo-file-input",3,"change","disabled"],["class","disabled-note","style","color: #8b4513;",4,"ngIf"],["class","preview-container",4,"ngIf"],[1,"modal-buttons"],[1,"save-btn",3,"click"],[1,"close-btn",3,"click"],[1,"alert","alert-warning",2,"margin-bottom","10px"],[1,"disabled-note",2,"color","#8b4513"],[1,"preview-container"],["alt","Vista previa",1,"preview-img",3,"src"]],template:function(e,n){e&1&&(s(0,"div",1)(1,"header",2)(2,"nav",3)(3,"button",4),_("click",function(){return n.volverADashboard()}),c(4,"Perfil"),a(),s(5,"button",5),c(6,"Mis Rallies"),a(),s(7,"button",4),_("click",function(){return n.seleccionarTab("mis-fotos")}),c(8,"Mis Fotos"),a(),s(9,"button",4),_("click",function(){return n.entrarGaleria()}),c(10,"Galer\xEDa"),a(),s(11,"button",5),c(12,"FAQs"),a()()(),s(13,"div",6)(14,"h2",7),c(15,"Mis Fotos"),a(),h(16,Os,2,1,"div",8)(17,Ts,3,0,"div",9)(18,Ds,19,6,"div",10),s(19,"div",11)(20,"button",12),_("click",function(){return n.goBackToUserPanel()}),c(21,"Volver"),a()()()()),e&2&&(d(3),Z("active",n.tabActivo==="perfil"),d(2),Z("active",n.tabActivo==="misrallies"),p("routerLink",De(15,vs)),d(2),Z("active",n.tabActivo==="misfotos"),d(2),Z("active",n.tabActivo==="gallery"),d(2),Z("active",n.tabActivo==="faqs"),p("routerLink",De(16,Cs)),d(5),p("ngIf",n.fotos.length>0),d(),p("ngIf",n.fotos.length===0),d(),p("ngIf",n.isEditModalOpen))},dependencies:[U,Ne,K,j,en,tn,$,ve,Ce,Xe,Le,ht,et],styles:['@font-face{font-family:Merriweather;font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v32/u-4D0qyriQwlOrhSvowK_l5UcA6zuSYEqOzpPe3HOZJ5eX1WtLaQwmYiScCmDxhtNOKl8yDr3icaGV31GvU.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Merriweather;font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v32/u-4D0qyriQwlOrhSvowK_l5UcA6zuSYEqOzpPe3HOZJ5eX1WtLaQwmYiScCmDxhtNOKl8yDr3icaEF31GvU.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Merriweather;font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v32/u-4D0qyriQwlOrhSvowK_l5UcA6zuSYEqOzpPe3HOZJ5eX1WtLaQwmYiScCmDxhtNOKl8yDr3icaG131GvU.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Merriweather;font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v32/u-4D0qyriQwlOrhSvowK_l5UcA6zuSYEqOzpPe3HOZJ5eX1WtLaQwmYiScCmDxhtNOKl8yDr3icaGl31GvU.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Merriweather;font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v32/u-4D0qyriQwlOrhSvowK_l5UcA6zuSYEqOzpPe3HOZJ5eX1WtLaQwmYiScCmDxhtNOKl8yDr3icaFF31.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}[_nghost-%COMP%]{font-family:Merriweather,serif}.mis-fotos[_ngcontent-%COMP%]{background:url(/images/fondo3.jpg) no-repeat center top;background-size:cover;min-height:80vh;padding:1rem}.mis-fotos-header[_ngcontent-%COMP%]{background-color:#7b4f24;color:#f9f4e6;padding:1.5rem 2rem;border-radius:8px;box-shadow:0 4px 10px #7b4f2480;margin-bottom:1.5rem;-webkit-user-select:none;user-select:none}.mis-fotos-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 .8rem;font-weight:700;font-size:2rem;text-shadow:1px 1px 4px #3c2608}.tabs[_ngcontent-%COMP%]{display:flex;gap:1rem}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:none;color:#e0cda9;font-weight:600;font-size:1rem;padding:.5rem 1rem;border-bottom:3px solid transparent;cursor:pointer;transition:color .3s ease,border-bottom-color .3s ease}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#fff6d6}.tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{border-bottom-color:#f2d388;color:#f9f4e6;font-weight:700}.section-title[_ngcontent-%COMP%]{text-align:center;font-size:2rem;margin:1rem;color:#4a2c14;font-weight:700;text-shadow:1px 1px 2px #d4a373}.photo-grid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1.5rem;justify-content:center}.photo-card[_ngcontent-%COMP%]{background-color:#f2d388;border:1px solid #e0c9a6;padding:1rem;border-radius:10px;box-shadow:0 2px 8px #8b45131a;width:280px;text-align:center;transition:transform .3s ease}.photo-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 20px #8b45134d}.photo-img[_ngcontent-%COMP%]{width:100%;height:auto;border:2px solid #d4a373;border-radius:8px;box-shadow:0 2px 6px #0000001a;margin-bottom:.8rem}h3[_ngcontent-%COMP%]{font-size:1.1rem;color:#5c3a1e;margin:.5rem 0}.status-text[_ngcontent-%COMP%]{color:#5c3a1e;font-size:.95rem;font-weight:700;margin-bottom:.8rem}.edit-btn[_ngcontent-%COMP%], .delete-btn[_ngcontent-%COMP%]{padding:.5rem 1rem;margin:.3rem;border:none;border-radius:5px;font-weight:700;cursor:pointer;font-size:.95rem;transition:background-color .3s ease}.edit-btn[_ngcontent-%COMP%]{background-color:sienna;color:#fff}.edit-btn[_ngcontent-%COMP%]:hover{background-color:#8b4513}.delete-btn[_ngcontent-%COMP%]{background-color:#b22222;color:#fff}.delete-btn[_ngcontent-%COMP%]:hover{background-color:#992f2f}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#0009;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fffaf5;padding:2rem;border-radius:12px;border:1px solid #e0c9a6;box-shadow:0 6px 15px #8b451340;width:90%;max-width:500px;text-align:center}.modal-title[_ngcontent-%COMP%]{color:#5c3a1e;font-size:1.5rem;margin-bottom:1rem}.photo-title-input[_ngcontent-%COMP%]{width:100%;padding:.6rem;border-radius:8px;border:1px solid #d3c2a2;margin-bottom:1rem;background-color:#fdf7ed;font-family:Merriweather,serif}.disabled-note[_ngcontent-%COMP%]{color:#888;font-size:.85rem;margin-top:.5rem}.preview-container[_ngcontent-%COMP%]{margin:1rem 0;text-align:center}.preview-img[_ngcontent-%COMP%]{max-width:100%;border-radius:8px;border:2px solid #d4a373;box-shadow:0 2px 10px #7b4f2433}.modal-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1rem;margin-top:1.5rem}.save-btn[_ngcontent-%COMP%]{background-color:sienna;color:#fff;padding:.6rem 1.2rem;border-radius:5px;border:none;font-weight:700;cursor:pointer}.save-btn[_ngcontent-%COMP%]:hover{background-color:#8b4513}.close-btn[_ngcontent-%COMP%]{background-color:#ddd;color:#333;padding:.6rem 1.2rem;border-radius:5px;border:none;cursor:pointer;font-weight:700}.close-btn[_ngcontent-%COMP%]:hover{background-color:#bbb}.no-photos[_ngcontent-%COMP%]{text-align:center;font-size:1rem;color:#5c3a1e;margin-top:2rem;font-weight:700}.button-container[_ngcontent-%COMP%]{margin-top:2rem;text-align:center}.back-button[_ngcontent-%COMP%]{background-color:#8b4513;color:#fff;border:none;padding:.6rem 1.2rem;border-radius:5px;cursor:pointer;transition:background-color .3s ease;font-size:1rem;font-weight:700;text-align:center}.back-button[_ngcontent-%COMP%]:hover{background-color:sienna}.estado-aprobada[_ngcontent-%COMP%]{color:#4caf50;font-size:1rem;font-weight:700}.estado-pendiente[_ngcontent-%COMP%]{color:#ac8511;font-size:1rem;font-weight:700}.estado-rechazada[_ngcontent-%COMP%]{color:#f44336;font-size:1rem;font-weight:700}@media (max-width: 600px){.mis-fotos[_ngcontent-%COMP%]{padding:1rem .5rem}.mis-fotos-header[_ngcontent-%COMP%]{padding:1rem}.tabs[_ngcontent-%COMP%]{flex-wrap:nowrap;overflow-x:auto;-webkit-overflow-scrolling:touch}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:0 0 auto;padding:.5rem .8rem;font-size:.9rem}.section-title[_ngcontent-%COMP%]{font-size:2rem;margin:1rem .5rem}.photo-grid[_ngcontent-%COMP%]{gap:1rem}.photo-card[_ngcontent-%COMP%]{width:100%;max-width:100%;padding:.8rem}h3[_ngcontent-%COMP%]{font-size:1rem}.status-text[_ngcontent-%COMP%]{font-size:.9rem}.edit-btn[_ngcontent-%COMP%], .delete-btn[_ngcontent-%COMP%]{font-size:.85rem;padding:.4rem .8rem}.modal-content[_ngcontent-%COMP%]{width:95%;padding:1.5rem}.modal-title[_ngcontent-%COMP%]{font-size:1.3rem}.photo-title-input[_ngcontent-%COMP%]{font-size:.9rem;padding:.5rem}.save-btn[_ngcontent-%COMP%], .close-btn[_ngcontent-%COMP%]{font-size:.9rem;padding:.5rem 1rem}}@media (min-width: 601px) and (max-width: 900px){.mis-fotos[_ngcontent-%COMP%]{padding:1rem}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1rem;padding:.5rem 1rem}.section-title[_ngcontent-%COMP%]{font-size:2.5rem}.photo-grid[_ngcontent-%COMP%]{gap:1.2rem}.photo-card[_ngcontent-%COMP%]{width:calc(50% - 1.2rem)}}@media (min-width: 901px){.photo-card[_ngcontent-%COMP%]{width:280px}}.photo-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1.5rem;justify-content:center}.tabs[_ngcontent-%COMP%]{scrollbar-width:thin;scrollbar-color:#f2d388 transparent}.tabs[_ngcontent-%COMP%]::-webkit-scrollbar{height:6px}.tabs[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.tabs[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#f2d388;border-radius:3px}input[type=file][_ngcontent-%COMP%]{max-width:100%}.button-container[_ngcontent-%COMP%]{padding:0 .5rem}.back-button[_ngcontent-%COMP%]{width:100%;max-width:300px;font-size:1rem}']})};var ks=()=>["/mis-rallies"],Rs=()=>["/mis-fotos"];function Us(i,t){if(i&1){let e=V();s(0,"div",9)(1,"div",10),_("click",function(){let o=x(e).index,r=g();return w(r.toggle(o))}),s(2,"span"),c(3),a(),s(4,"span",11),c(5),a()(),P(6,"div",12),a()}if(i&2){let e=t.$implicit;d(3),A(e.pregunta),d(2),A(e.abierta?"\u25B2":"\u25BC"),d(),Z("abierto",e.abierta),p("innerHTML",e.respuesta,kt)}}var wn=class i{constructor(t,e){this.photoService=t;this.router=e}tabActivo="faqs";preguntasRespuestas=[{pregunta:"\xBFQuieres saber c\xF3mo moverte por toda la App?",respuesta:'Aqu\xED puedes descargar nuestro <a href="/docs/manual_usuario.pdf" download target="_blank" class="btn-descarga">manual de usuario (PDF)</a>.',abierta:!1},{pregunta:"\xBFCu\xE1ntas fotos puedo subir por rally?",respuesta:"Puedes subir hasta 3 fotos por cada rally<br> !Mientras m\xE1s fotos subas m\xE1s posibiliades de ganar!",abierta:!1},{pregunta:"\xBFQu\xE9 requisitos deben cumplir las fotos?",respuesta:"Las fotos deben seguir la tem\xE1tica del rally para ser aceptadas.<br>\u2022 Deben ser originales y no haber sido publicadas anteriormente en ning\xFAn otro lugar.<br>\u2022 Deben ser tomadas por el participante y no pueden ser editadas con programas de edici\xF3n de im\xE1genes.<br>\u2022 Deben ser enviadas en formato digital (JPG o PNG) y no superar los 5 MB.",abierta:!1},{pregunta:"\xBFQu\xE9 estados puede tener mi foto?",respuesta:`
        El administrador revisar\xE1 las fotos y cambiar\xE1 su estado a:<br>
        \u2022 <strong>Admitida</strong>: \xA1Tu foto participa oficialmente!<br>
        \u2022 <strong>Pendiente</strong>: Est\xE1 en revisi\xF3n.<br>
        \u2022 <strong>Rechazada</strong>: No cumple con los requisitos.
      `,abierta:!1},{pregunta:"\xBFPuedo editar o eliminar mis fotos?",respuesta:"Puedes eliminar o reemplazar tus fotos mientras el rally est\xE9 activo.",abierta:!1},{pregunta:"\xBFPuedo modificar mis fotos tras finalizar el rally?",respuesta:"No. Una vez finalizado el rally, no podr\xE1s modificar tus fotos.",abierta:!1},{pregunta:"\xBFC\xF3mo funciona la votaci\xF3n?",respuesta:"Puedes votar por tus fotos favoritas en la galer\xEDa mientras est\xE9 activo el rally.",abierta:!1},{pregunta:"\xBFQu\xE9 pasa con las fotos ganadoras?",respuesta:"Las fotos ganadoras se anunciar\xE1n en la galer\xEDa.",abierta:!1},{pregunta:"\xBFTienes m\xE1s dudas o necesitas ayuda?",respuesta:"Puedes ponerte en contacto a gtraves de nuestro correo el\xE9ctronico: expresscapturesvz.admin@gmail.com.",abierta:!1}];ngOnInit(){}toggle(t){this.preguntasRespuestas[t].abierta=!this.preguntasRespuestas[t].abierta}seleccionarTab(t){this.tabActivo=t}volverADashboard(){this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigate(["/user/dashboard"])})}entrarGaleria(){this.router.navigate(["/gallery"],{queryParams:{from:"dashboard"}})}goBackToUserPanel(){this.router.navigate(["/user/dashboard"])}static \u0275fac=function(e){return new(e||i)(v(qe),v(I))};static \u0275cmp=k({type:i,selectors:[["app-faqs"]],decls:20,vars:15,consts:[[1,"faqs"],[1,"faqs-header"],[1,"tabs"],[3,"click"],[3,"routerLink"],[1,"acordeon-card"],["class","acordeon",4,"ngFor","ngForOf"],[1,"button-container"],[1,"back-button",3,"click"],[1,"acordeon"],[1,"acordeon-header",3,"click"],[1,"flecha"],[1,"acordeon-body",3,"innerHTML"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"header",1)(2,"nav",2)(3,"button",3),_("click",function(){return n.volverADashboard()}),c(4,"Perfil"),a(),s(5,"button",4),c(6,"Mis Rallies"),a(),s(7,"button",4),c(8,"Mis Fotos"),a(),s(9,"button",3),_("click",function(){return n.entrarGaleria()}),c(10,"Galer\xEDa"),a(),s(11,"button",3),_("click",function(){return n.seleccionarTab("faqs")}),c(12,"FAQs"),a()()(),s(13,"div",5)(14,"h2"),c(15,"Preguntas Frecuentes"),a(),h(16,Us,7,5,"div",6),a(),s(17,"div",7)(18,"button",8),_("click",function(){return n.goBackToUserPanel()}),c(19,"Volver"),a()()()),e&2&&(d(3),Z("active",n.tabActivo==="perfil"),d(2),Z("active",n.tabActivo==="misrallies"),p("routerLink",De(13,ks)),d(2),Z("active",n.tabActivo==="misfotos"),p("routerLink",De(14,Rs)),d(2),Z("active",n.tabActivo==="gallery"),d(2),Z("active",n.tabActivo==="faqs"),d(5),p("ngForOf",n.preguntasRespuestas))},dependencies:[U,K,$,Le,ht],styles:['@font-face{font-family:Merriweather;font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v32/u-4D0qyriQwlOrhSvowK_l5UcA6zuSYEqOzpPe3HOZJ5eX1WtLaQwmYiScCmDxhtNOKl8yDr3icaGV31GvU.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Merriweather;font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v32/u-4D0qyriQwlOrhSvowK_l5UcA6zuSYEqOzpPe3HOZJ5eX1WtLaQwmYiScCmDxhtNOKl8yDr3icaEF31GvU.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Merriweather;font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v32/u-4D0qyriQwlOrhSvowK_l5UcA6zuSYEqOzpPe3HOZJ5eX1WtLaQwmYiScCmDxhtNOKl8yDr3icaG131GvU.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Merriweather;font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v32/u-4D0qyriQwlOrhSvowK_l5UcA6zuSYEqOzpPe3HOZJ5eX1WtLaQwmYiScCmDxhtNOKl8yDr3icaGl31GvU.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Merriweather;font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/merriweather/v32/u-4D0qyriQwlOrhSvowK_l5UcA6zuSYEqOzpPe3HOZJ5eX1WtLaQwmYiScCmDxhtNOKl8yDr3icaFF31.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}.faqs[_ngcontent-%COMP%]{background:url(/images/fondo3.jpg) no-repeat center top;background-size:cover;min-height:100vh;padding:1rem 1rem 1rem 0rem}[_nghost-%COMP%]{font-family:Merriweather,serif}.faqs-header[_ngcontent-%COMP%]{background-color:#7b4f24;color:#f9f4e6;padding:1.5rem 2rem;border-radius:8px;box-shadow:0 4px 10px #7b4f2480;margin-bottom:1.5rem;-webkit-user-select:none;user-select:none}.faqs-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 .8rem;font-weight:700;font-size:2rem;text-shadow:1px 1px 4px #3c2608}.tabs[_ngcontent-%COMP%]{display:flex;gap:1rem}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:none;color:#e0cda9;font-weight:600;font-size:1rem;padding:.5rem 1rem;border-bottom:3px solid transparent;cursor:pointer;transition:color .3s ease,border-bottom-color .3s ease}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#fff6d6}.tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{border-bottom-color:#f2d388;color:#f9f4e6;font-weight:700}.acordeon-card[_ngcontent-%COMP%]{background:#fff9ec;border-radius:16px;padding:2rem;box-shadow:0 6px 14px #d2a04666;color:#4b2e05;transition:box-shadow .3s ease;margin:2rem auto;max-width:800px}.acordeon-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin-bottom:1.5rem;color:#4b2e05;text-shadow:1px 1px 3px #7b4f24;display:flex;align-items:center;gap:.5rem}.acordeon[_ngcontent-%COMP%]{border-top:1px solid #ddb67d}.acordeon-header[_ngcontent-%COMP%]{padding:1rem;font-weight:700;font-size:1.1rem;cursor:pointer;display:flex;justify-content:space-between;color:#5e3c10;transition:background-color .3s ease}.acordeon-header[_ngcontent-%COMP%]:hover{background-color:#f5e2c4}.acordeon-body[_ngcontent-%COMP%]{max-height:0;overflow:hidden;transition:max-height .4s ease,padding .3s ease;background-color:#fff5dc;padding:0 1rem;color:#5e3c10;font-size:1rem}.acordeon-body.abierto[_ngcontent-%COMP%]{padding:1rem;max-height:300px}.flecha[_ngcontent-%COMP%]{font-size:1.2rem;color:#b3813a}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:2rem}.back-button[_ngcontent-%COMP%]{background-color:#a1744f;color:#fff;padding:.8rem 1.6rem;border:none;border-radius:8px;font-weight:700;cursor:pointer;transition:background-color .3s ease}.back-button[_ngcontent-%COMP%]:hover{background-color:#8d5f38}.btn-descarga[_ngcontent-%COMP%]{display:inline-block;margin-top:10px;padding:8px 16px;background-color:#8b4513;color:#fff;border-radius:8px;text-decoration:none;font-weight:700;transition:background-color .3s}.btn-descarga[_ngcontent-%COMP%]:hover{background-color:#5c3a1e}@media (max-width: 1024px){.tabs[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.acordeon-card[_ngcontent-%COMP%]{padding:1.5rem;margin:1.5rem auto}.faqs-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8rem;text-align:center}}@media (max-width: 768px){.tabs[_ngcontent-%COMP%]{flex-direction:column;align-items:center;gap:.5rem}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1rem;padding:.6rem 1rem;width:100%;max-width:300px;text-align:center}.acordeon-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.6rem;text-align:center;flex-direction:column}.acordeon-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.flecha[_ngcontent-%COMP%]{align-self:flex-end}.back-button[_ngcontent-%COMP%]{width:100%;max-width:200px;font-size:1rem}}@media (max-width: 480px){.faqs[_ngcontent-%COMP%], .faqs-header[_ngcontent-%COMP%]{padding:1rem}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:.95rem}.acordeon-card[_ngcontent-%COMP%]{padding:1rem}.acordeon-body[_ngcontent-%COMP%]{font-size:.95rem}.back-button[_ngcontent-%COMP%]{padding:.6rem 1.2rem}.btn-descarga[_ngcontent-%COMP%]{padding:6px 12px;font-size:.9rem}}']})};var xo=[{path:"",component:ln},{path:"login",component:Mt},{path:"register",component:dn},{path:"gallery",component:mn},{path:"user/dashboard",loadComponent:()=>import("./chunk-XEZMMLIL.js").then(i=>i.DashboardComponent),canActivate:[oe,Ge]},{path:"mis-rallies",component:Cn,canActivate:[oe,Ge]},{path:"mis-fotos",component:xn,canActivate:[oe,Ge]},{path:"faqs",component:wn,canActivate:[oe,Ge]},{path:"proximos-rallies",component:pn,canActivate:[oe,Ge]},{path:"rallies-actuales",component:un,canActivate:[oe,Ge]},{path:"rallies-pasados",component:fn,canActivate:[oe,Ge]},{path:"admin/edit-user/:id",component:hn,canActivate:[oe,je]},{path:"admin/gestion-rallies",component:_n,canActivate:[oe,je]},{path:"admin/create-rallies",component:yn,canActivate:[oe,je]},{path:"admin/edit-rallies/:id",component:bn,canActivate:[oe,je]},{path:"admin/user-control",loadComponent:()=>import("./chunk-VE5HFIYX.js").then(i=>i.UserControlComponent),canActivate:[oe,je]},{path:"admin/user-photos",loadComponent:()=>import("./chunk-7GOTFNNH.js").then(i=>i.UserPhotosComponent),canActivate:[oe,je]},{path:"admin",component:gn,canActivate:[oe,je]},{path:"**",redirectTo:"",pathMatch:"full"}];var wo=(i,t)=>{let n=Ye(me).getToken();if(n){let o=i.clone({setHeaders:{Authorization:`Bearer ${n}`}});return t(o)}return t(i)};var F=function(i){return i[i.State=0]="State",i[i.Transition=1]="Transition",i[i.Sequence=2]="Sequence",i[i.Group=3]="Group",i[i.Animate=4]="Animate",i[i.Keyframes=5]="Keyframes",i[i.Style=6]="Style",i[i.Trigger=7]="Trigger",i[i.Reference=8]="Reference",i[i.AnimateChild=9]="AnimateChild",i[i.AnimateRef=10]="AnimateRef",i[i.Query=11]="Query",i[i.Stagger=12]="Stagger",i}(F||{}),Ae="*";function Yn(i,t){return{type:F.Trigger,name:i,definitions:t,options:{}}}function Mn(i,t=null){return{type:F.Animate,styles:t,timings:i}}function Mo(i,t=null){return{type:F.Sequence,steps:i,options:t}}function tt(i){return{type:F.Style,styles:i,offset:null}}function Vt(i,t,e){return{type:F.State,name:i,styles:t,options:e}}function Sn(i,t,e=null){return{type:F.Transition,expr:i,animation:t,options:e}}var Ke=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(t=0,e=0){this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){let e=t=="start"?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}},at=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(t){this.players=t;let e=0,n=0,o=0,r=this.players.length;r==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(l=>{l.onDone(()=>{++e==r&&this._onFinish()}),l.onDestroy(()=>{++n==r&&this._onDestroy()}),l.onStart(()=>{++o==r&&this._onStart()})}),this.totalTime=this.players.reduce((l,m)=>Math.max(l,m.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){let e=t*this.totalTime;this.players.forEach(n=>{let o=n.totalTime?Math.min(1,e/n.totalTime):1;n.setPosition(o)})}getPosition(){let t=this.players.reduce((e,n)=>e===null||n.totalTime>e.totalTime?n:e,null);return t!=null?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){let e=t=="start"?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}},Pt="!";var So=["toast-component",""];function Ls(i,t){if(i&1){let e=V();s(0,"button",5),_("click",function(){x(e);let o=g();return w(o.remove())}),s(1,"span",6),c(2,"\xD7"),a()()}}function Vs(i,t){if(i&1&&(he(0),c(1),_e()),i&2){let e=g(2);d(),R("[",e.duplicatesCount+1,"]")}}function Bs(i,t){if(i&1&&(s(0,"div"),c(1),h(2,Vs,2,1,"ng-container",4),a()),i&2){let e=g();ge(e.options.titleClass),Rt("aria-label",e.title),d(),R(" ",e.title," "),d(),p("ngIf",e.duplicatesCount)}}function qs(i,t){if(i&1&&P(0,"div",7),i&2){let e=g();ge(e.options.messageClass),p("innerHTML",e.message,kt)}}function js(i,t){if(i&1&&(s(0,"div",8),c(1),a()),i&2){let e=g();ge(e.options.messageClass),Rt("aria-label",e.message),d(),R(" ",e.message," ")}}function Gs(i,t){if(i&1&&(s(0,"div"),P(1,"div",9),a()),i&2){let e=g();d(),Ut("width",e.width()+"%")}}function Ks(i,t){if(i&1){let e=V();s(0,"button",5),_("click",function(){x(e);let o=g();return w(o.remove())}),s(1,"span",6),c(2,"\xD7"),a()()}}function Hs(i,t){if(i&1&&(he(0),c(1),_e()),i&2){let e=g(2);d(),R("[",e.duplicatesCount+1,"]")}}function Qs(i,t){if(i&1&&(s(0,"div"),c(1),h(2,Hs,2,1,"ng-container",4),a()),i&2){let e=g();ge(e.options.titleClass),Rt("aria-label",e.title),d(),R(" ",e.title," "),d(),p("ngIf",e.duplicatesCount)}}function $s(i,t){if(i&1&&P(0,"div",7),i&2){let e=g();ge(e.options.messageClass),p("innerHTML",e.message,kt)}}function Ws(i,t){if(i&1&&(s(0,"div",8),c(1),a()),i&2){let e=g();ge(e.options.messageClass),Rt("aria-label",e.message),d(),R(" ",e.message," ")}}function Ys(i,t){if(i&1&&(s(0,"div"),P(1,"div",9),a()),i&2){let e=g();d(),Ut("width",e.width()+"%")}}var Zn=class{_attachedHost;component;viewContainerRef;injector;constructor(t,e){this.component=t,this.injector=e}attach(t,e){return this._attachedHost=t,t.attach(this,e)}detach(){let t=this._attachedHost;if(t)return this._attachedHost=void 0,t.detach()}get isAttached(){return this._attachedHost!=null}setAttachedHost(t){this._attachedHost=t}},Xn=class{_attachedPortal;_disposeFn;attach(t,e){return this._attachedPortal=t,this.attachComponentPortal(t,e)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(t){this._disposeFn=t}},Jn=class{_overlayRef;componentInstance;duplicatesCount=0;_afterClosed=new We;_activate=new We;_manualClose=new We;_resetTimeout=new We;_countDuplicate=new We;constructor(t){this._overlayRef=t}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(t,e){t&&this._resetTimeout.next(),e&&this._countDuplicate.next(++this.duplicatesCount)}},Et=class{toastId;config;message;title;toastType;toastRef;_onTap=new We;_onAction=new We;constructor(t,e,n,o,r,l){this.toastId=t,this.config=e,this.message=n,this.title=o,this.toastType=r,this.toastRef=l,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(t){this._onAction.next(t)}onAction(){return this._onAction.asObservable()}},Po={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing"},Eo=new zi("ToastConfig"),ei=class extends Xn{_hostDomElement;_componentFactoryResolver;_appRef;constructor(t,e,n){super(),this._hostDomElement=t,this._componentFactoryResolver=e,this._appRef=n}attachComponentPortal(t,e){let n=this._componentFactoryResolver.resolveComponentFactory(t.component),o;return o=n.create(t.injector),this._appRef.attachView(o.hostView),this.setDisposeFn(()=>{this._appRef.detachView(o.hostView),o.destroy()}),e?this._hostDomElement.insertBefore(this._getComponentRootNode(o),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(o)),o}_getComponentRootNode(t){return t.hostView.rootNodes[0]}},Zs=(()=>{class i{_document=Ye(zt);_containerElement;ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let e=this._document.createElement("div");e.classList.add("overlay-container"),e.setAttribute("aria-live","polite"),this._document.body.appendChild(e),this._containerElement=e}static \u0275fac=function(n){return new(n||i)};static \u0275prov=ae({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),ti=class{_portalHost;constructor(t){this._portalHost=t}attach(t,e=!0){return this._portalHost.attach(t,e)}detach(){return this._portalHost.detach()}},Xs=(()=>{class i{_overlayContainer=Ye(Zs);_componentFactoryResolver=Ye(ji);_appRef=Ye(Zt);_document=Ye(zt);_paneElements=new Map;create(e,n){return this._createOverlayRef(this.getPaneElement(e,n))}getPaneElement(e="",n){return this._paneElements.get(n)||this._paneElements.set(n,{}),this._paneElements.get(n)[e]||(this._paneElements.get(n)[e]=this._createPaneElement(e,n)),this._paneElements.get(n)[e]}_createPaneElement(e,n){let o=this._document.createElement("div");return o.id="toast-container",o.classList.add(e),o.classList.add("toast-container"),n?n.getContainerElement().appendChild(o):this._overlayContainer.getContainerElement().appendChild(o),o}_createPortalHost(e){return new ei(e,this._componentFactoryResolver,this._appRef)}_createOverlayRef(e){return new ti(this._createPortalHost(e))}static \u0275fac=function(n){return new(n||i)};static \u0275prov=ae({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Oo=(()=>{class i{overlay;_injector;sanitizer;ngZone;toastrConfig;currentlyActive=0;toasts=[];overlayContainer;previousToastMessage;index=0;constructor(e,n,o,r,l){this.overlay=n,this._injector=o,this.sanitizer=r,this.ngZone=l,this.toastrConfig=q(q({},e.default),e.config),e.config.iconClasses&&(this.toastrConfig.iconClasses=q(q({},e.default.iconClasses),e.config.iconClasses))}show(e,n,o={},r=""){return this._preBuildNotification(r,e,n,this.applyConfig(o))}success(e,n,o={}){let r=this.toastrConfig.iconClasses.success||"";return this._preBuildNotification(r,e,n,this.applyConfig(o))}error(e,n,o={}){let r=this.toastrConfig.iconClasses.error||"";return this._preBuildNotification(r,e,n,this.applyConfig(o))}info(e,n,o={}){let r=this.toastrConfig.iconClasses.info||"";return this._preBuildNotification(r,e,n,this.applyConfig(o))}warning(e,n,o={}){let r=this.toastrConfig.iconClasses.warning||"";return this._preBuildNotification(r,e,n,this.applyConfig(o))}clear(e){for(let n of this.toasts)if(e!==void 0){if(n.toastId===e){n.toastRef.manualClose();return}}else n.toastRef.manualClose()}remove(e){let n=this._findToast(e);if(!n||(n.activeToast.toastRef.close(),this.toasts.splice(n.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){let o=this.toasts[this.currentlyActive].toastRef;o.isInactive()||(this.currentlyActive=this.currentlyActive+1,o.activate())}return!0}findDuplicate(e="",n="",o,r){let{includeTitleDuplicates:l}=this.toastrConfig;for(let m of this.toasts){let u=l&&m.title===e;if((!l||u)&&m.message===n)return m.toastRef.onDuplicate(o,r),m}return null}applyConfig(e={}){return q(q({},this.toastrConfig),e)}_findToast(e){for(let n=0;n<this.toasts.length;n++)if(this.toasts[n].toastId===e)return{index:n,activeToast:this.toasts[n]};return null}_preBuildNotification(e,n,o,r){return r.onActivateTick?this.ngZone.run(()=>this._buildNotification(e,n,o,r)):this._buildNotification(e,n,o,r)}_buildNotification(e,n,o,r){if(!r.toastComponent)throw new Error("toastComponent required");let l=this.findDuplicate(o,n,this.toastrConfig.resetTimeoutOnDuplicate&&r.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&o||n)&&this.toastrConfig.preventDuplicates&&l!==null)return l;this.previousToastMessage=n;let m=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(m=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));let u=this.overlay.create(r.positionClass,this.overlayContainer);this.index=this.index+1;let f=n;n&&r.enableHtml&&(f=this.sanitizer.sanitize(qi.HTML,n));let b=new Jn(u),y=new Et(this.index,r,f,o,e,b),D=[{provide:Et,useValue:y}],T=Wt.create({providers:D,parent:this._injector}),M=new Zn(r.toastComponent,T),O=u.attach(M,r.newestOnTop);b.componentInstance=O.instance;let B={toastId:this.index,title:o||"",message:n||"",toastRef:b,onShown:b.afterActivate(),onHidden:b.afterClosed(),onTap:y.onTap(),onAction:y.onAction(),portal:O};return m||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{B.toastRef.activate()})),this.toasts.push(B),B}static \u0275fac=function(n){return new(n||i)(W(Eo),W(Xs),W(Wt),W(to),W(It))};static \u0275prov=ae({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Js=(()=>{class i{toastrService;toastPackage;ngZone;message;title;options;duplicatesCount;originalTimeout;width=Dt(-1);toastClasses="";state;get _state(){return this.state()}get displayStyle(){if(this.state().value==="inactive")return"none"}timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(e,n,o){this.toastrService=e,this.toastPackage=n,this.ngZone=o,this.message=n.message,this.title=n.title,this.options=n.config,this.originalTimeout=n.config.timeOut,this.toastClasses=`${n.toastType} ${n.config.toastClass}`,this.sub=n.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=n.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=n.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=n.toastRef.countDuplicate().subscribe(r=>{this.duplicatesCount=r}),this.state=Dt({value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state.update(e=>Se(q({},e),{value:"active"})),!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(this.width()===0||this.width()===100||!this.options.timeOut)return;let e=new Date().getTime(),n=this.hideTime-e;this.width.set(n/this.options.timeOut*100),this.options.progressAnimation==="increasing"&&this.width.update(o=>100-o),this.width()<=0&&this.width.set(0),this.width()>=100&&this.width.set(100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state.update(e=>Se(q({},e),{value:"active"})),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){this.state().value!=="removed"&&(clearTimeout(this.timeout),this.state.update(e=>Se(q({},e),{value:"removed"})),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){this.state().value!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state().value!=="removed"&&this.options.disableTimeOut!=="extendedTimeOut"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width.set(0))}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state().value==="removed"||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(e,n){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(e),n)):this.timeout=setTimeout(()=>e(),n)}outsideInterval(e,n){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(e),n)):this.intervalId=setInterval(()=>e(),n)}runInsideAngular(e){this.ngZone?this.ngZone.run(()=>e()):e()}static \u0275fac=function(n){return new(n||i)(v(Oo),v(Et),v(It))};static \u0275cmp=k({type:i,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(n,o){n&1&&_("click",function(){return o.tapToast()})("mouseenter",function(){return o.stickAround()})("mouseleave",function(){return o.delayedHideToast()}),n&2&&(Ki("@flyInOut",o._state),ge(o.toastClasses),Ut("display",o.displayStyle))},attrs:So,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(n,o){n&1&&h(0,Ls,3,0,"button",0)(1,Bs,3,5,"div",1)(2,qs,1,3,"div",2)(3,js,2,4,"div",3)(4,Gs,2,2,"div",4),n&2&&(p("ngIf",o.options.closeButton),d(),p("ngIf",o.title),d(),p("ngIf",o.message&&o.options.enableHtml),d(),p("ngIf",o.message&&!o.options.enableHtml),d(),p("ngIf",o.options.progressBar))},dependencies:[j],encapsulation:2,data:{animation:[Yn("flyInOut",[Vt("inactive",tt({opacity:0})),Vt("active",tt({opacity:1})),Vt("removed",tt({opacity:0})),Sn("inactive => active",Mn("{{ easeTime }}ms {{ easing }}")),Sn("active => removed",Mn("{{ easeTime }}ms {{ easing }}"))])]},changeDetection:0})}return i})(),el=Se(q({},Po),{toastComponent:Js}),To=(i={})=>Ni([{provide:Eo,useValue:{default:el,config:i}}]);var tl=(()=>{class i{toastrService;toastPackage;appRef;message;title;options;duplicatesCount;originalTimeout;width=Dt(-1);toastClasses="";get displayStyle(){return this.state()==="inactive"?"none":null}state=Dt("inactive");timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(e,n,o){this.toastrService=e,this.toastPackage=n,this.appRef=o,this.message=n.message,this.title=n.title,this.options=n.config,this.originalTimeout=n.config.timeOut,this.toastClasses=`${n.toastType} ${n.config.toastClass}`,this.sub=n.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=n.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=n.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=n.toastRef.countDuplicate().subscribe(r=>{this.duplicatesCount=r})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state.set("active"),!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(this.width()===0||this.width()===100||!this.options.timeOut)return;let e=new Date().getTime(),n=this.hideTime-e;this.width.set(n/this.options.timeOut*100),this.options.progressAnimation==="increasing"&&this.width.update(o=>100-o),this.width()<=0&&this.width.set(0),this.width()>=100&&this.width.set(100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state.set("active"),this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=new Date().getTime()+(this.originalTimeout||0),this.width.set(-1),this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){this.state()!=="removed"&&(clearTimeout(this.timeout),this.state.set("removed"),this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){this.state()!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state()!=="removed"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width.set(0))}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state()==="removed"||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}static \u0275fac=function(n){return new(n||i)(v(Oo),v(Et),v(Zt))};static \u0275cmp=k({type:i,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(n,o){n&1&&_("click",function(){return o.tapToast()})("mouseenter",function(){return o.stickAround()})("mouseleave",function(){return o.delayedHideToast()}),n&2&&(ge(o.toastClasses),Ut("display",o.displayStyle))},attrs:So,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(n,o){n&1&&h(0,Ks,3,0,"button",0)(1,Qs,3,5,"div",1)(2,$s,1,3,"div",2)(3,Ws,2,4,"div",3)(4,Ys,2,2,"div",4),n&2&&(p("ngIf",o.options.closeButton),d(),p("ngIf",o.title),d(),p("ngIf",o.message&&o.options.enableHtml),d(),p("ngIf",o.message&&!o.options.enableHtml),d(),p("ngIf",o.options.progressBar))},dependencies:[j],encapsulation:2,changeDetection:0})}return i})(),km=Se(q({},Po),{toastComponent:tl});function Fo(i){return new N(3e3,!1)}function nl(){return new N(3100,!1)}function il(){return new N(3101,!1)}function ol(i){return new N(3001,!1)}function rl(i){return new N(3003,!1)}function al(i){return new N(3004,!1)}function Io(i,t){return new N(3005,!1)}function Do(){return new N(3006,!1)}function ko(){return new N(3007,!1)}function Ro(i,t){return new N(3008,!1)}function Uo(i){return new N(3002,!1)}function zo(i,t,e,n,o){return new N(3010,!1)}function No(){return new N(3011,!1)}function Lo(){return new N(3012,!1)}function Vo(){return new N(3200,!1)}function Bo(){return new N(3202,!1)}function qo(){return new N(3013,!1)}function jo(i){return new N(3014,!1)}function Go(i){return new N(3015,!1)}function Ko(i){return new N(3016,!1)}function Ho(i,t){return new N(3404,!1)}function sl(i){return new N(3502,!1)}function Qo(i){return new N(3503,!1)}function $o(){return new N(3300,!1)}function Wo(i){return new N(3504,!1)}function Yo(i){return new N(3301,!1)}function Zo(i,t){return new N(3302,!1)}function Xo(i){return new N(3303,!1)}function Jo(i,t){return new N(3400,!1)}function er(i){return new N(3401,!1)}function tr(i){return new N(3402,!1)}function nr(i,t){return new N(3505,!1)}function Qe(i){switch(i.length){case 0:return new Ke;case 1:return i[0];default:return new at(i)}}function ri(i,t,e=new Map,n=new Map){let o=[],r=[],l=-1,m=null;if(t.forEach(u=>{let f=u.get("offset"),b=f==l,y=b&&m||new Map;u.forEach((D,T)=>{let M=T,O=D;if(T!=="offset")switch(M=i.normalizePropertyName(M,o),O){case Pt:O=e.get(T);break;case Ae:O=n.get(T);break;default:O=i.normalizeStyleValue(T,M,O,o);break}y.set(M,O)}),b||r.push(y),m=y,l=f}),o.length)throw sl(o);return r}function Pn(i,t,e,n){switch(t){case"start":i.onStart(()=>n(e&&ni(e,"start",i)));break;case"done":i.onDone(()=>n(e&&ni(e,"done",i)));break;case"destroy":i.onDestroy(()=>n(e&&ni(e,"destroy",i)));break}}function ni(i,t,e){let n=e.totalTime,o=!!e.disabled,r=En(i.element,i.triggerName,i.fromState,i.toState,t||i.phaseName,n??i.totalTime,o),l=i._data;return l!=null&&(r._data=l),r}function En(i,t,e,n,o="",r=0,l){return{element:i,triggerName:t,fromState:e,toState:n,phaseName:o,totalTime:r,disabled:!!l}}function xe(i,t,e){let n=i.get(t);return n||i.set(t,n=e),n}function ai(i){let t=i.indexOf(":"),e=i.substring(1,t),n=i.slice(t+1);return[e,n]}var ll=typeof document>"u"?null:document.documentElement;function On(i){let t=i.parentNode||i.host||null;return t===ll?null:t}function cl(i){return i.substring(1,6)=="ebkit"}var st=null,Ao=!1;function ir(i){st||(st=dl()||{},Ao=st.style?"WebkitAppearance"in st.style:!1);let t=!0;return st.style&&!cl(i)&&(t=i in st.style,!t&&Ao&&(t="Webkit"+i.charAt(0).toUpperCase()+i.slice(1)in st.style)),t}function dl(){return typeof document<"u"?document.body:null}function si(i,t){for(;t;){if(t===i)return!0;t=On(t)}return!1}function li(i,t,e){if(e)return Array.from(i.querySelectorAll(t));let n=i.querySelector(t);return n?[n]:[]}var ml=1e3,ci="{{",pl="}}",di="ng-enter",Tn="ng-leave",Bt="ng-trigger",qt=".ng-trigger",mi="ng-animating",Fn=".ng-animating";function He(i){if(typeof i=="number")return i;let t=i.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:ii(parseFloat(t[1]),t[2])}function ii(i,t){switch(t){case"s":return i*ml;default:return i}}function jt(i,t,e){return i.hasOwnProperty("duration")?i:ul(i,t,e)}function ul(i,t,e){let n=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,o,r=0,l="";if(typeof i=="string"){let m=i.match(n);if(m===null)return t.push(Fo(i)),{duration:0,delay:0,easing:""};o=ii(parseFloat(m[1]),m[2]);let u=m[3];u!=null&&(r=ii(parseFloat(u),m[4]));let f=m[5];f&&(l=f)}else o=i;if(!e){let m=!1,u=t.length;o<0&&(t.push(nl()),m=!0),r<0&&(t.push(il()),m=!0),m&&t.splice(u,0,Fo(i))}return{duration:o,delay:r,easing:l}}function or(i){return i.length?i[0]instanceof Map?i:i.map(t=>new Map(Object.entries(t))):[]}function ke(i,t,e){t.forEach((n,o)=>{let r=An(o);e&&!e.has(o)&&e.set(o,i.style[r]),i.style[r]=n})}function nt(i,t){t.forEach((e,n)=>{let o=An(n);i.style[o]=""})}function Ot(i){return Array.isArray(i)?i.length==1?i[0]:Mo(i):i}function rr(i,t,e){let n=t.params||{},o=pi(i);o.length&&o.forEach(r=>{n.hasOwnProperty(r)||e.push(ol(r))})}var oi=new RegExp(`${ci}\\s*(.+?)\\s*${pl}`,"g");function pi(i){let t=[];if(typeof i=="string"){let e;for(;e=oi.exec(i);)t.push(e[1]);oi.lastIndex=0}return t}function Tt(i,t,e){let n=`${i}`,o=n.replace(oi,(r,l)=>{let m=t[l];return m==null&&(e.push(rl(l)),m=""),m.toString()});return o==n?i:o}var fl=/-+([a-z0-9])/g;function An(i){return i.replace(fl,(...t)=>t[1].toUpperCase())}function ar(i,t){return i===0||t===0}function sr(i,t,e){if(e.size&&t.length){let n=t[0],o=[];if(e.forEach((r,l)=>{n.has(l)||o.push(l),n.set(l,r)}),o.length)for(let r=1;r<t.length;r++){let l=t[r];o.forEach(m=>l.set(m,In(i,m)))}}return t}function we(i,t,e){switch(t.type){case F.Trigger:return i.visitTrigger(t,e);case F.State:return i.visitState(t,e);case F.Transition:return i.visitTransition(t,e);case F.Sequence:return i.visitSequence(t,e);case F.Group:return i.visitGroup(t,e);case F.Animate:return i.visitAnimate(t,e);case F.Keyframes:return i.visitKeyframes(t,e);case F.Style:return i.visitStyle(t,e);case F.Reference:return i.visitReference(t,e);case F.AnimateChild:return i.visitAnimateChild(t,e);case F.AnimateRef:return i.visitAnimateRef(t,e);case F.Query:return i.visitQuery(t,e);case F.Stagger:return i.visitStagger(t,e);default:throw al(t.type)}}function In(i,t){return window.getComputedStyle(i)[t]}var Ti=(()=>{class i{validateStyleProperty(e){return ir(e)}containsElement(e,n){return si(e,n)}getParentElement(e){return On(e)}query(e,n,o){return li(e,n,o)}computeStyle(e,n,o){return o||""}animate(e,n,o,r,l,m=[],u){return new Ke(o,r)}static \u0275fac=function(n){return new(n||i)};static \u0275prov=ae({token:i,factory:i.\u0275fac})}return i})(),ct=class{static NOOP=new Ti},dt=class{};var gl=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),zn=class extends dt{normalizePropertyName(t,e){return An(t)}normalizeStyleValue(t,e,n,o){let r="",l=n.toString().trim();if(gl.has(e)&&n!==0&&n!=="0")if(typeof n=="number")r="px";else{let m=n.match(/^[+-]?[\d\.]+([a-z]*)$/);m&&m[1].length==0&&o.push(Io(t,n))}return l+r}};var Nn="*";function hl(i,t){let e=[];return typeof i=="string"?i.split(/\s*,\s*/).forEach(n=>_l(n,e,t)):e.push(i),e}function _l(i,t,e){if(i[0]==":"){let u=bl(i,e);if(typeof u=="function"){t.push(u);return}i=u}let n=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(n==null||n.length<4)return e.push(Go(i)),t;let o=n[1],r=n[2],l=n[3];t.push(lr(o,l));let m=o==Nn&&l==Nn;r[0]=="<"&&!m&&t.push(lr(l,o))}function bl(i,t){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,n)=>parseFloat(n)>parseFloat(e);case":decrement":return(e,n)=>parseFloat(n)<parseFloat(e);default:return t.push(Ko(i)),"* => *"}}var Dn=new Set(["true","1"]),kn=new Set(["false","0"]);function lr(i,t){let e=Dn.has(i)||kn.has(i),n=Dn.has(t)||kn.has(t);return(o,r)=>{let l=i==Nn||i==o,m=t==Nn||t==r;return!l&&e&&typeof o=="boolean"&&(l=o?Dn.has(i):kn.has(i)),!m&&n&&typeof r=="boolean"&&(m=r?Dn.has(t):kn.has(t)),l&&m}}var br=":self",yl=new RegExp(`s*${br}s*,?`,"g");function yr(i,t,e,n){return new bi(i).build(t,e,n)}var cr="",bi=class{_driver;constructor(t){this._driver=t}build(t,e,n){let o=new yi(e);return this._resetContextStyleTimingState(o),we(this,Ot(t),o)}_resetContextStyleTimingState(t){t.currentQuerySelector=cr,t.collectedStyles=new Map,t.collectedStyles.set(cr,new Map),t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,o=e.depCount=0,r=[],l=[];return t.name.charAt(0)=="@"&&e.errors.push(Do()),t.definitions.forEach(m=>{if(this._resetContextStyleTimingState(e),m.type==F.State){let u=m,f=u.name;f.toString().split(/\s*,\s*/).forEach(b=>{u.name=b,r.push(this.visitState(u,e))}),u.name=f}else if(m.type==F.Transition){let u=this.visitTransition(m,e);n+=u.queryCount,o+=u.depCount,l.push(u)}else e.errors.push(ko())}),{type:F.Trigger,name:t.name,states:r,transitions:l,queryCount:n,depCount:o,options:null}}visitState(t,e){let n=this.visitStyle(t.styles,e),o=t.options&&t.options.params||null;if(n.containsDynamicStyles){let r=new Set,l=o||{};n.styles.forEach(m=>{m instanceof Map&&m.forEach(u=>{pi(u).forEach(f=>{l.hasOwnProperty(f)||r.add(f)})})}),r.size&&e.errors.push(Ro(t.name,[...r.values()]))}return{type:F.State,name:t.name,style:n,options:o?{params:o}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;let n=we(this,Ot(t.animation),e),o=hl(t.expr,e.errors);return{type:F.Transition,matchers:o,animation:n,queryCount:e.queryCount,depCount:e.depCount,options:lt(t.options)}}visitSequence(t,e){return{type:F.Sequence,steps:t.steps.map(n=>we(this,n,e)),options:lt(t.options)}}visitGroup(t,e){let n=e.currentTime,o=0,r=t.steps.map(l=>{e.currentTime=n;let m=we(this,l,e);return o=Math.max(o,e.currentTime),m});return e.currentTime=o,{type:F.Group,steps:r,options:lt(t.options)}}visitAnimate(t,e){let n=wl(t.timings,e.errors);e.currentAnimateTimings=n;let o,r=t.styles?t.styles:tt({});if(r.type==F.Keyframes)o=this.visitKeyframes(r,e);else{let l=t.styles,m=!1;if(!l){m=!0;let f={};n.easing&&(f.easing=n.easing),l=tt(f)}e.currentTime+=n.duration+n.delay;let u=this.visitStyle(l,e);u.isEmptyStep=m,o=u}return e.currentAnimateTimings=null,{type:F.Animate,timings:n,style:o,options:null}}visitStyle(t,e){let n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){let n=[],o=Array.isArray(t.styles)?t.styles:[t.styles];for(let m of o)typeof m=="string"?m===Ae?n.push(m):e.errors.push(Uo(m)):n.push(new Map(Object.entries(m)));let r=!1,l=null;return n.forEach(m=>{if(m instanceof Map&&(m.has("easing")&&(l=m.get("easing"),m.delete("easing")),!r)){for(let u of m.values())if(u.toString().indexOf(ci)>=0){r=!0;break}}}),{type:F.Style,styles:n,easing:l,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){let n=e.currentAnimateTimings,o=e.currentTime,r=e.currentTime;n&&r>0&&(r-=n.duration+n.delay),t.styles.forEach(l=>{typeof l!="string"&&l.forEach((m,u)=>{let f=e.collectedStyles.get(e.currentQuerySelector),b=f.get(u),y=!0;b&&(r!=o&&r>=b.startTime&&o<=b.endTime&&(e.errors.push(zo(u,b.startTime,b.endTime,r,o)),y=!1),r=b.startTime),y&&f.set(u,{startTime:r,endTime:o}),e.options&&rr(m,e.options,e.errors)})})}visitKeyframes(t,e){let n={type:F.Keyframes,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(No()),n;let o=1,r=0,l=[],m=!1,u=!1,f=0,b=t.steps.map(Y=>{let J=this._makeStyleAst(Y,e),ue=J.offset!=null?J.offset:xl(J.styles),ne=0;return ue!=null&&(r++,ne=J.offset=ue),u=u||ne<0||ne>1,m=m||ne<f,f=ne,l.push(ne),J});u&&e.errors.push(Lo()),m&&e.errors.push(Vo());let y=t.steps.length,D=0;r>0&&r<y?e.errors.push(Bo()):r==0&&(D=o/(y-1));let T=y-1,M=e.currentTime,O=e.currentAnimateTimings,B=O.duration;return b.forEach((Y,J)=>{let ue=D>0?J==T?1:D*J:l[J],ne=ue*B;e.currentTime=M+O.delay+ne,O.duration=ne,this._validateStyleAst(Y,e),Y.offset=ue,n.styles.push(Y)}),n}visitReference(t,e){return{type:F.Reference,animation:we(this,Ot(t.animation),e),options:lt(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:F.AnimateChild,options:lt(t.options)}}visitAnimateRef(t,e){return{type:F.AnimateRef,animation:this.visitReference(t.animation,e),options:lt(t.options)}}visitQuery(t,e){let n=e.currentQuerySelector,o=t.options||{};e.queryCount++,e.currentQuery=t;let[r,l]=vl(t.selector);e.currentQuerySelector=n.length?n+" "+r:r,xe(e.collectedStyles,e.currentQuerySelector,new Map);let m=we(this,Ot(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:F.Query,selector:r,limit:o.limit||0,optional:!!o.optional,includeSelf:l,animation:m,originalSelector:t.selector,options:lt(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(qo());let n=t.timings==="full"?{duration:0,delay:0,easing:"full"}:jt(t.timings,e.errors,!0);return{type:F.Stagger,animation:we(this,Ot(t.animation),e),timings:n,options:null}}};function vl(i){let t=!!i.split(/\s*,\s*/).find(e=>e==br);return t&&(i=i.replace(yl,"")),i=i.replace(/@\*/g,qt).replace(/@\w+/g,e=>qt+"-"+e.slice(1)).replace(/:animating/g,Fn),[i,t]}function Cl(i){return i?q({},i):null}var yi=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(t){this.errors=t}};function xl(i){if(typeof i=="string")return null;let t=null;if(Array.isArray(i))i.forEach(e=>{if(e instanceof Map&&e.has("offset")){let n=e;t=parseFloat(n.get("offset")),n.delete("offset")}});else if(i instanceof Map&&i.has("offset")){let e=i;t=parseFloat(e.get("offset")),e.delete("offset")}return t}function wl(i,t){if(i.hasOwnProperty("duration"))return i;if(typeof i=="number"){let r=jt(i,t).duration;return ui(r,0,"")}let e=i;if(e.split(/\s+/).some(r=>r.charAt(0)=="{"&&r.charAt(1)=="{")){let r=ui(0,0,"");return r.dynamic=!0,r.strValue=e,r}let o=jt(e,t);return ui(o.duration,o.delay,o.easing)}function lt(i){return i?(i=q({},i),i.params&&(i.params=Cl(i.params))):i={},i}function ui(i,t,e){return{duration:i,delay:t,easing:e}}function Fi(i,t,e,n,o,r,l=null,m=!1){return{type:1,element:i,keyframes:t,preStyleProps:e,postStyleProps:n,duration:o,delay:r,totalTime:o+r,easing:l,subTimeline:m}}var Kt=class{_map=new Map;get(t){return this._map.get(t)||[]}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}},Ml=1,Sl=":enter",Pl=new RegExp(Sl,"g"),El=":leave",Ol=new RegExp(El,"g");function vr(i,t,e,n,o,r=new Map,l=new Map,m,u,f=[]){return new vi().buildKeyframes(i,t,e,n,o,r,l,m,u,f)}var vi=class{buildKeyframes(t,e,n,o,r,l,m,u,f,b=[]){f=f||new Kt;let y=new Ci(t,e,f,o,r,b,[]);y.options=u;let D=u.delay?He(u.delay):0;y.currentTimeline.delayNextStep(D),y.currentTimeline.setStyles([l],null,y.errors,u),we(this,n,y);let T=y.timelines.filter(M=>M.containsAnimation());if(T.length&&m.size){let M;for(let O=T.length-1;O>=0;O--){let B=T[O];if(B.element===e){M=B;break}}M&&!M.allowOnlyTimelineStyles()&&M.setStyles([m],null,y.errors,u)}return T.length?T.map(M=>M.buildKeyframes()):[Fi(e,[],[],[],0,D,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){let n=e.subInstructions.get(e.element);if(n){let o=e.createSubContext(t.options),r=e.currentTimeline.currentTime,l=this._visitSubInstructions(n,o,o.options);r!=l&&e.transformIntoNewTimeline(l)}e.previousNode=t}visitAnimateRef(t,e){let n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,n),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,n){for(let o of t){let r=o?.delay;if(r){let l=typeof r=="number"?r:He(Tt(r,o?.params??{},e.errors));n.delayNextStep(l)}}}_visitSubInstructions(t,e,n){let r=e.currentTimeline.currentTime,l=n.duration!=null?He(n.duration):null,m=n.delay!=null?He(n.delay):null;return l!==0&&t.forEach(u=>{let f=e.appendInstructionToTimeline(u,l,m);r=Math.max(r,f.duration+f.delay)}),r}visitReference(t,e){e.updateOptions(t.options,!0),we(this,t.animation,e),e.previousNode=t}visitSequence(t,e){let n=e.subContextCount,o=e,r=t.options;if(r&&(r.params||r.delay)&&(o=e.createSubContext(r),o.transformIntoNewTimeline(),r.delay!=null)){o.previousNode.type==F.Style&&(o.currentTimeline.snapshotCurrentStyles(),o.previousNode=Ln);let l=He(r.delay);o.delayNextStep(l)}t.steps.length&&(t.steps.forEach(l=>we(this,l,o)),o.currentTimeline.applyStylesToKeyframe(),o.subContextCount>n&&o.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){let n=[],o=e.currentTimeline.currentTime,r=t.options&&t.options.delay?He(t.options.delay):0;t.steps.forEach(l=>{let m=e.createSubContext(t.options);r&&m.delayNextStep(r),we(this,l,m),o=Math.max(o,m.currentTimeline.currentTime),n.push(m.currentTimeline)}),n.forEach(l=>e.currentTimeline.mergeTimelineCollectedStyles(l)),e.transformIntoNewTimeline(o),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){let n=t.strValue,o=e.params?Tt(n,e.params,e.errors):n;return jt(o,e.errors)}else return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){let n=e.currentAnimateTimings=this._visitTiming(t.timings,e),o=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),o.snapshotCurrentStyles());let r=t.style;r.type==F.Keyframes?this.visitKeyframes(r,e):(e.incrementTime(n.duration),this.visitStyle(r,e),o.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){let n=e.currentTimeline,o=e.currentAnimateTimings;!o&&n.hasCurrentStyleProperties()&&n.forwardFrame();let r=o&&o.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(r):n.setStyles(t.styles,r,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){let n=e.currentAnimateTimings,o=e.currentTimeline.duration,r=n.duration,m=e.createSubContext().currentTimeline;m.easing=n.easing,t.styles.forEach(u=>{let f=u.offset||0;m.forwardTime(f*r),m.setStyles(u.styles,u.easing,e.errors,e.options),m.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(m),e.transformIntoNewTimeline(o+r),e.previousNode=t}visitQuery(t,e){let n=e.currentTimeline.currentTime,o=t.options||{},r=o.delay?He(o.delay):0;r&&(e.previousNode.type===F.Style||n==0&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Ln);let l=n,m=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!o.optional,e.errors);e.currentQueryTotal=m.length;let u=null;m.forEach((f,b)=>{e.currentQueryIndex=b;let y=e.createSubContext(t.options,f);r&&y.delayNextStep(r),f===e.element&&(u=y.currentTimeline),we(this,t.animation,y),y.currentTimeline.applyStylesToKeyframe();let D=y.currentTimeline.currentTime;l=Math.max(l,D)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(l),u&&(e.currentTimeline.mergeTimelineCollectedStyles(u),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){let n=e.parentContext,o=e.currentTimeline,r=t.timings,l=Math.abs(r.duration),m=l*(e.currentQueryTotal-1),u=l*e.currentQueryIndex;switch(r.duration<0?"reverse":r.easing){case"reverse":u=m-u;break;case"full":u=n.currentStaggerTime;break}let b=e.currentTimeline;u&&b.delayNextStep(u);let y=b.currentTime;we(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=o.currentTime-y+(o.startTime-n.currentTimeline.startTime)}},Ln={},Ci=class i{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=Ln;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(t,e,n,o,r,l,m,u){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=o,this._leaveClassName=r,this.errors=l,this.timelines=m,this.currentTimeline=u||new Vn(this._driver,e,0),m.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;let n=t,o=this.options;n.duration!=null&&(o.duration=He(n.duration)),n.delay!=null&&(o.delay=He(n.delay));let r=n.params;if(r){let l=o.params;l||(l=this.options.params={}),Object.keys(r).forEach(m=>{(!e||!l.hasOwnProperty(m))&&(l[m]=Tt(r[m],l,this.errors))})}}_copyOptions(){let t={};if(this.options){let e=this.options.params;if(e){let n=t.params={};Object.keys(e).forEach(o=>{n[o]=e[o]})}}return t}createSubContext(t=null,e,n){let o=e||this.element,r=new i(this._driver,o,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(o,n||0));return r.previousNode=this.previousNode,r.currentAnimateTimings=this.currentAnimateTimings,r.options=this._copyOptions(),r.updateOptions(t),r.currentQueryIndex=this.currentQueryIndex,r.currentQueryTotal=this.currentQueryTotal,r.parentContext=this,this.subContextCount++,r}transformIntoNewTimeline(t){return this.previousNode=Ln,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){let o={duration:e??t.duration,delay:this.currentTimeline.currentTime+(n??0)+t.delay,easing:""},r=new xi(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,o,t.stretchStartingKeyframe);return this.timelines.push(r),o}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,o,r,l){let m=[];if(o&&m.push(this.element),t.length>0){t=t.replace(Pl,"."+this._enterClassName),t=t.replace(Ol,"."+this._leaveClassName);let u=n!=1,f=this._driver.query(this.element,t,u);n!==0&&(f=n<0?f.slice(f.length+n,f.length):f.slice(0,n)),m.push(...f)}return!r&&m.length==0&&l.push(jo(e)),m}},Vn=class i{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(t,e,n,o){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=o,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){let e=this._keyframes.size===1&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new i(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=Ml,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,n]of this._globalTimelineStyles)this._backFill.set(e,n||Ae),this._currentKeyframe.set(e,Ae);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,o){e&&this._previousKeyframe.set("easing",e);let r=o&&o.params||{},l=Tl(t,this._globalTimelineStyles);for(let[m,u]of l){let f=Tt(u,r,n);this._pendingStyles.set(m,f),this._localTimelineStyles.has(m)||this._backFill.set(m,this._globalTimelineStyles.get(m)??Ae),this._updateStyle(m,f)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,n)=>{let o=this._styleSummary.get(n);(!o||e.time>o.time)&&this._updateStyle(n,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();let t=new Set,e=new Set,n=this._keyframes.size===1&&this.duration===0,o=[];this._keyframes.forEach((m,u)=>{let f=new Map([...this._backFill,...m]);f.forEach((b,y)=>{b===Pt?t.add(y):b===Ae&&e.add(y)}),n||f.set("offset",u/this.duration),o.push(f)});let r=[...t.values()],l=[...e.values()];if(n){let m=o[0],u=new Map(m);m.set("offset",0),u.set("offset",1),o=[m,u]}return Fi(this.element,o,r,l,this.duration,this.startTime,this.easing,!1)}},xi=class extends Vn{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(t,e,n,o,r,l,m=!1){super(t,e,l.delay),this.keyframes=n,this.preStyleProps=o,this.postStyleProps=r,this._stretchStartingKeyframe=m,this.timings={duration:l.duration,delay:l.delay,easing:l.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:o}=this.timings;if(this._stretchStartingKeyframe&&e){let r=[],l=n+e,m=e/l,u=new Map(t[0]);u.set("offset",0),r.push(u);let f=new Map(t[0]);f.set("offset",dr(m)),r.push(f);let b=t.length-1;for(let y=1;y<=b;y++){let D=new Map(t[y]),T=D.get("offset"),M=e+T*n;D.set("offset",dr(M/l)),r.push(D)}n=l,e=0,o="",t=r}return Fi(this.element,t,this.preStyleProps,this.postStyleProps,n,e,o,!0)}};function dr(i,t=3){let e=Math.pow(10,t-1);return Math.round(i*e)/e}function Tl(i,t){let e=new Map,n;return i.forEach(o=>{if(o==="*"){n??=t.keys();for(let r of n)e.set(r,Ae)}else for(let[r,l]of o)e.set(r,l)}),e}function mr(i,t,e,n,o,r,l,m,u,f,b,y,D){return{type:0,element:i,triggerName:t,isRemovalTransition:o,fromState:e,fromStyles:r,toState:n,toStyles:l,timelines:m,queriedElements:u,preStyleProps:f,postStyleProps:b,totalTime:y,errors:D}}var fi={},Bn=class{_triggerName;ast;_stateStyles;constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,o){return Fl(this.ast.matchers,t,e,n,o)}buildStyles(t,e,n){let o=this._stateStyles.get("*");return t!==void 0&&(o=this._stateStyles.get(t?.toString())||o),o?o.buildStyles(e,n):new Map}build(t,e,n,o,r,l,m,u,f,b){let y=[],D=this.ast.options&&this.ast.options.params||fi,T=m&&m.params||fi,M=this.buildStyles(n,T,y),O=u&&u.params||fi,B=this.buildStyles(o,O,y),Y=new Set,J=new Map,ue=new Map,ne=o==="void",mt={params:Cr(O,D),delay:this.ast.options?.delay},Ue=b?[]:vr(t,e,this.ast.animation,r,l,M,B,mt,f,y),fe=0;return Ue.forEach(ye=>{fe=Math.max(ye.duration+ye.delay,fe)}),y.length?mr(e,this._triggerName,n,o,ne,M,B,[],[],J,ue,fe,y):(Ue.forEach(ye=>{let it=ye.element,pt=xe(J,it,new Set);ye.preStyleProps.forEach(ot=>pt.add(ot));let Ai=xe(ue,it,new Set);ye.postStyleProps.forEach(ot=>Ai.add(ot)),it!==e&&Y.add(it)}),mr(e,this._triggerName,n,o,ne,M,B,Ue,[...Y.values()],J,ue,fe))}};function Fl(i,t,e,n,o){return i.some(r=>r(t,e,n,o))}function Cr(i,t){let e=q({},t);return Object.entries(i).forEach(([n,o])=>{o!=null&&(e[n]=o)}),e}var wi=class{styles;defaultParams;normalizer;constructor(t,e,n){this.styles=t,this.defaultParams=e,this.normalizer=n}buildStyles(t,e){let n=new Map,o=Cr(t,this.defaultParams);return this.styles.styles.forEach(r=>{typeof r!="string"&&r.forEach((l,m)=>{l&&(l=Tt(l,o,e));let u=this.normalizer.normalizePropertyName(m,e);l=this.normalizer.normalizeStyleValue(m,u,l,e),n.set(m,l)})}),n}};function Al(i,t,e){return new Mi(i,t,e)}var Mi=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(t,e,n){this.name=t,this.ast=e,this._normalizer=n,e.states.forEach(o=>{let r=o.options&&o.options.params||{};this.states.set(o.name,new wi(o.style,r,n))}),pr(this.states,"true","1"),pr(this.states,"false","0"),e.transitions.forEach(o=>{this.transitionFactories.push(new Bn(t,o,this.states))}),this.fallbackTransition=Il(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,o){return this.transitionFactories.find(l=>l.match(t,e,n,o))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}};function Il(i,t,e){let n=[(l,m)=>!0],o={type:F.Sequence,steps:[],options:null},r={type:F.Transition,animation:o,matchers:n,options:null,queryCount:0,depCount:0};return new Bn(i,r,t)}function pr(i,t,e){i.has(t)?i.has(e)||i.set(e,i.get(t)):i.has(e)&&i.set(t,i.get(e))}var Dl=new Kt,Si=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n}register(t,e){let n=[],o=[],r=yr(this._driver,e,n,o);if(n.length)throw Qo(n);this._animations.set(t,r)}_buildPlayer(t,e,n){let o=t.element,r=ri(this._normalizer,t.keyframes,e,n);return this._driver.animate(o,r,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){let o=[],r=this._animations.get(t),l,m=new Map;if(r?(l=vr(this._driver,e,r,di,Tn,new Map,new Map,n,Dl,o),l.forEach(b=>{let y=xe(m,b.element,new Map);b.postStyleProps.forEach(D=>y.set(D,null))})):(o.push($o()),l=[]),o.length)throw Wo(o);m.forEach((b,y)=>{b.forEach((D,T)=>{b.set(T,this._driver.computeStyle(y,T,Ae))})});let u=l.map(b=>{let y=m.get(b.element);return this._buildPlayer(b,new Map,y)}),f=Qe(u);return this._playersById.set(t,f),f.onDestroy(()=>this.destroy(t)),this.players.push(f),f}destroy(t){let e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);let n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){let e=this._playersById.get(t);if(!e)throw Yo(t);return e}listen(t,e,n,o){let r=En(e,"","","");return Pn(this._getPlayer(t),n,r,o),()=>{}}command(t,e,n,o){if(n=="register"){this.register(t,o[0]);return}if(n=="create"){let l=o[0]||{};this.create(t,e,l);return}let r=this._getPlayer(t);switch(n){case"play":r.play();break;case"pause":r.pause();break;case"reset":r.reset();break;case"restart":r.restart();break;case"finish":r.finish();break;case"init":r.init();break;case"setPosition":r.setPosition(parseFloat(o[0]));break;case"destroy":this.destroy(t);break}}},ur="ng-animate-queued",kl=".ng-animate-queued",gi="ng-animate-disabled",Rl=".ng-animate-disabled",Ul="ng-star-inserted",zl=".ng-star-inserted",Nl=[],xr={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Ll={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Re="__ng_removed",Ht=class{namespaceId;value;options;get params(){return this.options.params}constructor(t,e=""){this.namespaceId=e;let n=t&&t.hasOwnProperty("value"),o=n?t.value:t;if(this.value=Bl(o),n){let r=t,{value:l}=r,m=Ri(r,["value"]);this.options=m}else this.options={};this.options.params||(this.options.params={})}absorbOptions(t){let e=t.params;if(e){let n=this.options.params;Object.keys(e).forEach(o=>{n[o]==null&&(n[o]=e[o])})}}},Gt="void",hi=new Ht(Gt),Pi=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this._hostClassName="ng-tns-"+t,Ie(e,this._hostClassName)}listen(t,e,n,o){if(!this._triggers.has(e))throw Zo(n,e);if(n==null||n.length==0)throw Xo(e);if(!ql(n))throw Jo(n,e);let r=xe(this._elementListeners,t,[]),l={name:e,phase:n,callback:o};r.push(l);let m=xe(this._engine.statesByElement,t,new Map);return m.has(e)||(Ie(t,Bt),Ie(t,Bt+"-"+e),m.set(e,hi)),()=>{this._engine.afterFlush(()=>{let u=r.indexOf(l);u>=0&&r.splice(u,1),this._triggers.has(e)||m.delete(e)})}}register(t,e){return this._triggers.has(t)?!1:(this._triggers.set(t,e),!0)}_getTrigger(t){let e=this._triggers.get(t);if(!e)throw er(t);return e}trigger(t,e,n,o=!0){let r=this._getTrigger(e),l=new Qt(this.id,e,t),m=this._engine.statesByElement.get(t);m||(Ie(t,Bt),Ie(t,Bt+"-"+e),this._engine.statesByElement.set(t,m=new Map));let u=m.get(e),f=new Ht(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&u&&f.absorbOptions(u.options),m.set(e,f),u||(u=hi),!(f.value===Gt)&&u.value===f.value){if(!Kl(u.params,f.params)){let O=[],B=r.matchStyles(u.value,u.params,O),Y=r.matchStyles(f.value,f.params,O);O.length?this._engine.reportError(O):this._engine.afterFlush(()=>{nt(t,B),ke(t,Y)})}return}let D=xe(this._engine.playersByElement,t,[]);D.forEach(O=>{O.namespaceId==this.id&&O.triggerName==e&&O.queued&&O.destroy()});let T=r.matchTransition(u.value,f.value,t,f.params),M=!1;if(!T){if(!o)return;T=r.fallbackTransition,M=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:T,fromState:u,toState:f,player:l,isFallbackTransition:M}),M||(Ie(t,ur),l.onStart(()=>{Ft(t,ur)})),l.onDone(()=>{let O=this.players.indexOf(l);O>=0&&this.players.splice(O,1);let B=this._engine.playersByElement.get(t);if(B){let Y=B.indexOf(l);Y>=0&&B.splice(Y,1)}}),this.players.push(l),D.push(l),l}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(o=>o.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);let e=this._engine.playersByElement.get(t);e&&(e.forEach(n=>n.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){let n=this._engine.driver.query(t,qt,!0);n.forEach(o=>{if(o[Re])return;let r=this._engine.fetchNamespacesByElement(o);r.size?r.forEach(l=>l.triggerLeaveAnimation(o,e,!1,!0)):this.clearElementCache(o)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(o=>this.clearElementCache(o)))}triggerLeaveAnimation(t,e,n,o){let r=this._engine.statesByElement.get(t),l=new Map;if(r){let m=[];if(r.forEach((u,f)=>{if(l.set(f,u.value),this._triggers.has(f)){let b=this.trigger(t,f,Gt,o);b&&m.push(b)}}),m.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,l),n&&Qe(m).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){let e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){let o=new Set;e.forEach(r=>{let l=r.name;if(o.has(l))return;o.add(l);let u=this._triggers.get(l).fallbackTransition,f=n.get(l)||hi,b=new Ht(Gt),y=new Qt(this.id,l,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:l,transition:u,fromState:f,toState:b,player:y,isFallbackTransition:!0})})}}removeNode(t,e){let n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let o=!1;if(n.totalAnimations){let r=n.players.length?n.playersByQueriedElement.get(t):[];if(r&&r.length)o=!0;else{let l=t;for(;l=l.parentNode;)if(n.statesByElement.get(l)){o=!0;break}}}if(this.prepareLeaveAnimationListeners(t),o)n.markElementAsRemoved(this.id,t,!1,e);else{let r=t[Re];(!r||r===xr)&&(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){Ie(t,this._hostClassName)}drainQueuedTransitions(t){let e=[];return this._queue.forEach(n=>{let o=n.player;if(o.destroyed)return;let r=n.element,l=this._elementListeners.get(r);l&&l.forEach(m=>{if(m.name==n.triggerName){let u=En(r,n.triggerName,n.fromState.value,n.toState.value);u._data=t,Pn(n.player,m.phase,u,m.callback)}}),o.markedForDestroy?this._engine.afterFlush(()=>{o.destroy()}):e.push(n)}),this._queue=[],e.sort((n,o)=>{let r=n.transition.ast.depCount,l=o.transition.ast.depCount;return r==0||l==0?r-l:this._engine.driver.containsElement(n.element,o.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}},Ei=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(t,e)=>{};_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n}get queuedPlayers(){let t=[];return this._namespaceList.forEach(e=>{e.players.forEach(n=>{n.queued&&t.push(n)})}),t}createNamespace(t,e){let n=new Pi(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){let n=this._namespaceList,o=this.namespacesByHostElement;if(n.length-1>=0){let l=!1,m=this.driver.getParentElement(e);for(;m;){let u=o.get(m);if(u){let f=n.indexOf(u);n.splice(f+1,0,t),l=!0;break}m=this.driver.getParentElement(m)}l||n.unshift(t)}else n.push(t);return o.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let o=this._namespaceLookup[t];o&&o.register(e,n)&&this.totalAnimations++}destroy(t,e){t&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let n=this._fetchNamespace(t);this.namespacesByHostElement.delete(n.hostElement);let o=this._namespaceList.indexOf(n);o>=0&&this._namespaceList.splice(o,1),n.destroy(e),delete this._namespaceLookup[t]}))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){let e=new Set,n=this.statesByElement.get(t);if(n){for(let o of n.values())if(o.namespaceId){let r=this._fetchNamespace(o.namespaceId);r&&e.add(r)}}return e}trigger(t,e,n,o){if(Rn(e)){let r=this._fetchNamespace(t);if(r)return r.trigger(e,n,o),!0}return!1}insertNode(t,e,n,o){if(!Rn(e))return;let r=e[Re];if(r&&r.setForRemoval){r.setForRemoval=!1,r.setForMove=!0;let l=this.collectedLeaveElements.indexOf(e);l>=0&&this.collectedLeaveElements.splice(l,1)}if(t){let l=this._fetchNamespace(t);l&&l.insertNode(e,n)}o&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Ie(t,gi)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Ft(t,gi))}removeNode(t,e,n){if(Rn(e)){let o=t?this._fetchNamespace(t):null;o?o.removeNode(e,n):this.markElementAsRemoved(t,e,!1,n);let r=this.namespacesByHostElement.get(e);r&&r.id!==t&&r.removeNode(e,n)}else this._onRemovalComplete(e,n)}markElementAsRemoved(t,e,n,o,r){this.collectedLeaveElements.push(e),e[Re]={namespaceId:t,setForRemoval:o,hasAnimation:n,removedBeforeQueried:!1,previousTriggersValues:r}}listen(t,e,n,o,r){return Rn(e)?this._fetchNamespace(t).listen(e,n,o,r):()=>{}}_buildInstruction(t,e,n,o,r){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,o,t.fromState.options,t.toState.options,e,r)}destroyInnerAnimations(t){let e=this.driver.query(t,qt,!0);e.forEach(n=>this.destroyActiveAnimationsForElement(n)),this.playersByQueriedElement.size!=0&&(e=this.driver.query(t,Fn,!0),e.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(t){let e=this.playersByElement.get(t);e&&e.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(t){let e=this.playersByQueriedElement.get(t);e&&e.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Qe(this.players).onDone(()=>t());t()})}processLeaveNode(t){let e=t[Re];if(e&&e.setForRemoval){if(t[Re]=xr,e.namespaceId){this.destroyInnerAnimations(t);let n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(gi)&&this.markElementAsDisabled(t,!1),this.driver.query(t,Rl,!0).forEach(n=>{this.markElementAsDisabled(n,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,o)=>this._balanceNamespaceList(n,o)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++){let o=this.collectedEnterElements[n];Ie(o,Ul)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let n=[];try{e=this._flushAnimations(n,t)}finally{for(let o=0;o<n.length;o++)n[o]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++){let o=this.collectedLeaveElements[n];this.processLeaveNode(o)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){let n=this._whenQuietFns;this._whenQuietFns=[],e.length?Qe(e).onDone(()=>{n.forEach(o=>o())}):n.forEach(o=>o())}}reportError(t){throw tr(t)}_flushAnimations(t,e){let n=new Kt,o=[],r=new Map,l=[],m=new Map,u=new Map,f=new Map,b=new Set;this.disabledNodes.forEach(C=>{b.add(C);let S=this.driver.query(C,kl,!0);for(let E=0;E<S.length;E++)b.add(S[E])});let y=this.bodyNode,D=Array.from(this.statesByElement.keys()),T=hr(D,this.collectedEnterElements),M=new Map,O=0;T.forEach((C,S)=>{let E=di+O++;M.set(S,E),C.forEach(z=>Ie(z,E))});let B=[],Y=new Set,J=new Set;for(let C=0;C<this.collectedLeaveElements.length;C++){let S=this.collectedLeaveElements[C],E=S[Re];E&&E.setForRemoval&&(B.push(S),Y.add(S),E.hasAnimation?this.driver.query(S,zl,!0).forEach(z=>Y.add(z)):J.add(S))}let ue=new Map,ne=hr(D,Array.from(Y));ne.forEach((C,S)=>{let E=Tn+O++;ue.set(S,E),C.forEach(z=>Ie(z,E))}),t.push(()=>{T.forEach((C,S)=>{let E=M.get(S);C.forEach(z=>Ft(z,E))}),ne.forEach((C,S)=>{let E=ue.get(S);C.forEach(z=>Ft(z,E))}),B.forEach(C=>{this.processLeaveNode(C)})});let mt=[],Ue=[];for(let C=this._namespaceList.length-1;C>=0;C--)this._namespaceList[C].drainQueuedTransitions(e).forEach(E=>{let z=E.player,ee=E.element;if(mt.push(z),this.collectedEnterElements.length){let re=ee[Re];if(re&&re.setForMove){if(re.previousTriggersValues&&re.previousTriggersValues.has(E.triggerName)){let rt=re.previousTriggersValues.get(E.triggerName),Ee=this.statesByElement.get(E.element);if(Ee&&Ee.has(E.triggerName)){let $t=Ee.get(E.triggerName);$t.value=rt,Ee.set(E.triggerName,$t)}}z.destroy();return}}let ze=!y||!this.driver.containsElement(y,ee),Me=ue.get(ee),$e=M.get(ee),H=this._buildInstruction(E,n,$e,Me,ze);if(H.errors&&H.errors.length){Ue.push(H);return}if(ze){z.onStart(()=>nt(ee,H.fromStyles)),z.onDestroy(()=>ke(ee,H.toStyles)),o.push(z);return}if(E.isFallbackTransition){z.onStart(()=>nt(ee,H.fromStyles)),z.onDestroy(()=>ke(ee,H.toStyles)),o.push(z);return}let ki=[];H.timelines.forEach(re=>{re.stretchStartingKeyframe=!0,this.disabledNodes.has(re.element)||ki.push(re)}),H.timelines=ki,n.append(ee,H.timelines);let Er={instruction:H,player:z,element:ee};l.push(Er),H.queriedElements.forEach(re=>xe(m,re,[]).push(z)),H.preStyleProps.forEach((re,rt)=>{if(re.size){let Ee=u.get(rt);Ee||u.set(rt,Ee=new Set),re.forEach(($t,Qn)=>Ee.add(Qn))}}),H.postStyleProps.forEach((re,rt)=>{let Ee=f.get(rt);Ee||f.set(rt,Ee=new Set),re.forEach(($t,Qn)=>Ee.add(Qn))})});if(Ue.length){let C=[];Ue.forEach(S=>{C.push(nr(S.triggerName,S.errors))}),mt.forEach(S=>S.destroy()),this.reportError(C)}let fe=new Map,ye=new Map;l.forEach(C=>{let S=C.element;n.has(S)&&(ye.set(S,S),this._beforeAnimationBuild(C.player.namespaceId,C.instruction,fe))}),o.forEach(C=>{let S=C.element;this._getPreviousPlayers(S,!1,C.namespaceId,C.triggerName,null).forEach(z=>{xe(fe,S,[]).push(z),z.destroy()})});let it=B.filter(C=>_r(C,u,f)),pt=new Map;gr(pt,this.driver,J,f,Ae).forEach(C=>{_r(C,u,f)&&it.push(C)});let ot=new Map;T.forEach((C,S)=>{gr(ot,this.driver,new Set(C),u,Pt)}),it.forEach(C=>{let S=pt.get(C),E=ot.get(C);pt.set(C,new Map([...S?.entries()??[],...E?.entries()??[]]))});let Hn=[],Ii=[],Di={};l.forEach(C=>{let{element:S,player:E,instruction:z}=C;if(n.has(S)){if(b.has(S)){E.onDestroy(()=>ke(S,z.toStyles)),E.disabled=!0,E.overrideTotalTime(z.totalTime),o.push(E);return}let ee=Di;if(ye.size>1){let Me=S,$e=[];for(;Me=Me.parentNode;){let H=ye.get(Me);if(H){ee=H;break}$e.push(Me)}$e.forEach(H=>ye.set(H,ee))}let ze=this._buildAnimation(E.namespaceId,z,fe,r,ot,pt);if(E.setRealPlayer(ze),ee===Di)Hn.push(E);else{let Me=this.playersByElement.get(ee);Me&&Me.length&&(E.parentPlayer=Qe(Me)),o.push(E)}}else nt(S,z.fromStyles),E.onDestroy(()=>ke(S,z.toStyles)),Ii.push(E),b.has(S)&&o.push(E)}),Ii.forEach(C=>{let S=r.get(C.element);if(S&&S.length){let E=Qe(S);C.setRealPlayer(E)}}),o.forEach(C=>{C.parentPlayer?C.syncPlayerEvents(C.parentPlayer):C.destroy()});for(let C=0;C<B.length;C++){let S=B[C],E=S[Re];if(Ft(S,Tn),E&&E.hasAnimation)continue;let z=[];if(m.size){let ze=m.get(S);ze&&ze.length&&z.push(...ze);let Me=this.driver.query(S,Fn,!0);for(let $e=0;$e<Me.length;$e++){let H=m.get(Me[$e]);H&&H.length&&z.push(...H)}}let ee=z.filter(ze=>!ze.destroyed);ee.length?jl(this,S,ee):this.processLeaveNode(S)}return B.length=0,Hn.forEach(C=>{this.players.push(C),C.onDone(()=>{C.destroy();let S=this.players.indexOf(C);this.players.splice(S,1)}),C.play()}),Hn}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,o,r){let l=[];if(e){let m=this.playersByQueriedElement.get(t);m&&(l=m)}else{let m=this.playersByElement.get(t);if(m){let u=!r||r==Gt;m.forEach(f=>{f.queued||!u&&f.triggerName!=o||l.push(f)})}}return(n||o)&&(l=l.filter(m=>!(n&&n!=m.namespaceId||o&&o!=m.triggerName))),l}_beforeAnimationBuild(t,e,n){let o=e.triggerName,r=e.element,l=e.isRemovalTransition?void 0:t,m=e.isRemovalTransition?void 0:o;for(let u of e.timelines){let f=u.element,b=f!==r,y=xe(n,f,[]);this._getPreviousPlayers(f,b,l,m,e.toState).forEach(T=>{let M=T.getRealPlayer();M.beforeDestroy&&M.beforeDestroy(),T.destroy(),y.push(T)})}nt(r,e.fromStyles)}_buildAnimation(t,e,n,o,r,l){let m=e.triggerName,u=e.element,f=[],b=new Set,y=new Set,D=e.timelines.map(M=>{let O=M.element;b.add(O);let B=O[Re];if(B&&B.removedBeforeQueried)return new Ke(M.duration,M.delay);let Y=O!==u,J=Gl((n.get(O)||Nl).map(fe=>fe.getRealPlayer())).filter(fe=>{let ye=fe;return ye.element?ye.element===O:!1}),ue=r.get(O),ne=l.get(O),mt=ri(this._normalizer,M.keyframes,ue,ne),Ue=this._buildPlayer(M,mt,J);if(M.subTimeline&&o&&y.add(O),Y){let fe=new Qt(t,m,O);fe.setRealPlayer(Ue),f.push(fe)}return Ue});f.forEach(M=>{xe(this.playersByQueriedElement,M.element,[]).push(M),M.onDone(()=>Vl(this.playersByQueriedElement,M.element,M))}),b.forEach(M=>Ie(M,mi));let T=Qe(D);return T.onDestroy(()=>{b.forEach(M=>Ft(M,mi)),ke(u,e.toStyles)}),y.forEach(M=>{xe(o,M,[]).push(T)}),T}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new Ke(t.duration,t.delay)}},Qt=class{namespaceId;triggerName;element;_player=new Ke;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,n)=>{e.forEach(o=>Pn(t,n,void 0,o))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){let e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){xe(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){let e=this._player;e.triggerCallback&&e.triggerCallback(t)}};function Vl(i,t,e){let n=i.get(t);if(n){if(n.length){let o=n.indexOf(e);n.splice(o,1)}n.length==0&&i.delete(t)}return n}function Bl(i){return i??null}function Rn(i){return i&&i.nodeType===1}function ql(i){return i=="start"||i=="done"}function fr(i,t){let e=i.style.display;return i.style.display=t??"none",e}function gr(i,t,e,n,o){let r=[];e.forEach(u=>r.push(fr(u)));let l=[];n.forEach((u,f)=>{let b=new Map;u.forEach(y=>{let D=t.computeStyle(f,y,o);b.set(y,D),(!D||D.length==0)&&(f[Re]=Ll,l.push(f))}),i.set(f,b)});let m=0;return e.forEach(u=>fr(u,r[m++])),l}function hr(i,t){let e=new Map;if(i.forEach(m=>e.set(m,[])),t.length==0)return e;let n=1,o=new Set(t),r=new Map;function l(m){if(!m)return n;let u=r.get(m);if(u)return u;let f=m.parentNode;return e.has(f)?u=f:o.has(f)?u=n:u=l(f),r.set(m,u),u}return t.forEach(m=>{let u=l(m);u!==n&&e.get(u).push(m)}),e}function Ie(i,t){i.classList?.add(t)}function Ft(i,t){i.classList?.remove(t)}function jl(i,t,e){Qe(e).onDone(()=>i.processLeaveNode(t))}function Gl(i){let t=[];return wr(i,t),t}function wr(i,t){for(let e=0;e<i.length;e++){let n=i[e];n instanceof at?wr(n.players,t):t.push(n)}}function Kl(i,t){let e=Object.keys(i),n=Object.keys(t);if(e.length!=n.length)return!1;for(let o=0;o<e.length;o++){let r=e[o];if(!t.hasOwnProperty(r)||i[r]!==t[r])return!1}return!0}function _r(i,t,e){let n=e.get(i);if(!n)return!1;let o=t.get(i);return o?n.forEach(r=>o.add(r)):t.set(i,n),e.delete(i),!0}var At=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(t,e)=>{};constructor(t,e,n){this._driver=e,this._normalizer=n,this._transitionEngine=new Ei(t.body,e,n),this._timelineEngine=new Si(t.body,e,n),this._transitionEngine.onRemovalComplete=(o,r)=>this.onRemovalComplete(o,r)}registerTrigger(t,e,n,o,r){let l=t+"-"+o,m=this._triggerCache[l];if(!m){let u=[],f=[],b=yr(this._driver,r,u,f);if(u.length)throw Ho(o,u);m=Al(o,b,this._normalizer),this._triggerCache[l]=m}this._transitionEngine.registerTrigger(e,o,m)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,o){this._transitionEngine.insertNode(t,e,n,o)}onRemove(t,e,n){this._transitionEngine.removeNode(t,e,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,o){if(n.charAt(0)=="@"){let[r,l]=ai(n),m=o;this._timelineEngine.command(r,e,l,m)}else this._transitionEngine.trigger(t,e,n,o)}listen(t,e,n,o,r){if(n.charAt(0)=="@"){let[l,m]=ai(n);return this._timelineEngine.listen(l,e,m,r)}return this._transitionEngine.listen(t,e,n,o,r)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(t){this._transitionEngine.afterFlushAnimationsDone(t)}};function Hl(i,t){let e=null,n=null;return Array.isArray(t)&&t.length?(e=_i(t[0]),t.length>1&&(n=_i(t[t.length-1]))):t instanceof Map&&(e=_i(t)),e||n?new Ql(i,e,n):null}var Ql=(()=>{class i{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(e,n,o){this._element=e,this._startStyles=n,this._endStyles=o;let r=i.initialStylesByElement.get(e);r||i.initialStylesByElement.set(e,r=new Map),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&ke(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ke(this._element,this._initialStyles),this._endStyles&&(ke(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(i.initialStylesByElement.delete(this._element),this._startStyles&&(nt(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(nt(this._element,this._endStyles),this._endStyles=null),ke(this._element,this._initialStyles),this._state=3)}}return i})();function _i(i){let t=null;return i.forEach((e,n)=>{$l(n)&&(t=t||new Map,t.set(n,e))}),t}function $l(i){return i==="display"||i==="position"}var qn=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(t,e,n,o){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=o,this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map;let e=()=>this._onFinish();this.domPlayer.addEventListener("finish",e),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",e)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){let e=[];return t.forEach(n=>{e.push(Object.fromEntries(n))}),e}_triggerWebAnimation(t,e,n){return t.animate(this._convertKeyframesToObject(e),n)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((n,o)=>{o!=="offset"&&t.set(o,this._finished?n:In(this.element,o))}),this.currentSnapshot=t}triggerCallback(t){let e=t==="start"?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}},jn=class{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}containsElement(t,e){return si(t,e)}getParentElement(t){return On(t)}query(t,e,n){return li(t,e,n)}computeStyle(t,e,n){return In(t,e)}animate(t,e,n,o,r,l=[]){let m=o==0?"both":"forwards",u={duration:n,delay:o,fill:m};r&&(u.easing=r);let f=new Map,b=l.filter(T=>T instanceof qn);ar(n,o)&&b.forEach(T=>{T.currentSnapshot.forEach((M,O)=>f.set(O,M))});let y=or(e).map(T=>new Map(T));y=sr(t,y,f);let D=Hl(t,y);return new qn(t,y,u,D)}};var Un="@",Mr="@.disabled",Gn=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(t,e,n,o){this.namespaceId=t,this.delegate=e,this.engine=n,this._onDestroy=o}get data(){return this.delegate.data}destroyNode(t){this.delegate.destroyNode?.(t)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,o=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,o)}removeChild(t,e,n){this.parentNode(e)&&this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,o){this.delegate.setAttribute(t,e,n,o)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,o){this.delegate.setStyle(t,e,n,o)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){e.charAt(0)==Un&&e==Mr?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n,o){return this.delegate.listen(t,e,n,o)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}},Oi=class extends Gn{factory;constructor(t,e,n,o,r){super(e,n,o,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){e.charAt(0)==Un?e.charAt(1)=="."&&e==Mr?(n=n===void 0?!0:!!n,this.disableAnimations(t,n)):this.engine.process(this.namespaceId,t,e.slice(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n,o){if(e.charAt(0)==Un){let r=Wl(t),l=e.slice(1),m="";return l.charAt(0)!=Un&&([l,m]=Yl(l)),this.engine.listen(this.namespaceId,r,l,m,u=>{let f=u._data||-1;this.factory.scheduleListenerCallback(f,n,u)})}return this.delegate.listen(t,e,n,o)}};function Wl(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}function Yl(i){let t=i.indexOf("."),e=i.substring(0,t),n=i.slice(t+1);return[e,n]}var Kn=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,e.onRemovalComplete=(o,r)=>{r?.removeChild(null,o)}}createRenderer(t,e){let n="",o=this.delegate.createRenderer(t,e);if(!t||!e?.data?.animation){let f=this._rendererCache,b=f.get(o);if(!b){let y=()=>f.delete(o);b=new Gn(n,o,this.engine,y),f.set(o,b)}return b}let r=e.id,l=e.id+"-"+this._currentId;this._currentId++,this.engine.register(l,t);let m=f=>{Array.isArray(f)?f.forEach(m):this.engine.registerTrigger(r,l,t,f.name,f)};return e.data.animation.forEach(m),new Oi(this,l,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){if(t>=0&&t<this._microtaskId){this._zone.run(()=>e(n));return}let o=this._animationCallbacksBuffer;o.length==0&&queueMicrotask(()=>{this._zone.run(()=>{o.forEach(r=>{let[l,m]=r;l(m)}),this._animationCallbacksBuffer=[]})}),o.push([e,n])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(t){this.engine.flush(),this.delegate.componentReplaced?.(t)}};var Xl=(()=>{class i extends At{constructor(e,n,o){super(e,n,o)}ngOnDestroy(){this.flush()}static \u0275fac=function(n){return new(n||i)(W(zt),W(ct),W(dt))};static \u0275prov=ae({token:i,factory:i.\u0275fac})}return i})();function Jl(){return new zn}function ec(i,t,e){return new Kn(i,t,e)}var Sr=[{provide:dt,useFactory:Jl},{provide:At,useClass:Xl},{provide:Gi,useFactory:ec,deps:[Zi,At,It]}],tp=[{provide:ct,useClass:Ti},{provide:$n,useValue:"NoopAnimations"},...Sr],tc=[{provide:ct,useFactory:()=>new jn},{provide:$n,useFactory:()=>"BrowserAnimations"},...Sr];function Pr(){return Bi("NgEagerAnimations"),[...tc]}Xi(sn,{providers:[io(xo),Li(nn),Ji(eo([wo])),Pr(),To({positionClass:"toast-top-right",timeOut:5e3,closeButton:!0,progressBar:!0,newestOnTop:!0,preventDuplicates:!0})]}).catch(i=>console.error(i));
