import{a as v}from"./chunk-A32AXAJB.js";import{$a as M,A as g,Ma as h,N as a,R as p,Ra as O,S as u,W as f,_,ca as t,da as n,eb as P,ha as C,ja as m,ka as x,qa as o,ra as s,z as b}from"./chunk-BWXDRC3P.js";function S(l,i){if(l&1){let e=C();t(0,"tr")(1,"td"),o(2),n(),t(3,"td"),o(4),n(),t(5,"td"),o(6),n(),t(7,"td"),o(8),n(),t(9,"td"),o(10),n(),t(11,"td",6)(12,"button",7),m("click",function(){let c=b(e).$implicit,d=x();return g(d.editUser(c.id))}),o(13,"Editar"),n(),t(14,"button",8),m("click",function(){let c=b(e).$implicit,d=x();return g(d.deleteUser(c.id))}),o(15,"Eliminar"),n()()()}if(l&2){let e=i.$implicit;a(2),s(e.name),a(2),s(e.lastName),a(2),s(e.email),a(2),s(e.username),a(2),s(e.role)}}var w=class l{constructor(i,e,r){this.userService=i;this.router=e;this.sweetAlert=r}users=[];loading=!0;ngOnInit(){this.userService.getAllUsers().subscribe({next:i=>{console.log("Usuarios recibidos:",i),this.users=i,this.loading=!1},error:i=>{console.error("Error al obtener los usuarios",i),this.loading=!1}})}deleteUser(i){this.userService.getUserById(i).subscribe(e=>{if(e){let r=`${e.name} ${e.lastName}`;this.sweetAlert.confirm(`\xBFEst\xE1s seguro de que quieres eliminar al usuario: ${r}?`,"Esta acci\xF3n no se puede deshacer.").then(c=>{c&&this.userService.deleteUser(i).subscribe(()=>{this.sweetAlert.success("Usuario eliminado correctamente"),this.users=this.users.filter(d=>d.id!==i)})})}else console.error("Usuario no encontrado")})}editUser(i){this.router.navigate(["/admin/edit-user",i])}goBackToAdminPanel(){this.router.navigate(["admin"])}static \u0275fac=function(e){return new(e||l)(p(P),p(M),p(v))};static \u0275cmp=u({type:l,selectors:[["app-user-control"]],decls:24,vars:1,consts:[[1,"table-container"],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],[1,"button-container"],[1,"back-button",3,"click"],[1,"actions"],[1,"action-btn","edit-btn",3,"click"],[1,"action-btn","delete-btn",3,"click"]],template:function(e,r){e&1&&(t(0,"h2"),o(1,"Listado de usuarios"),n(),t(2,"div",0)(3,"div",1)(4,"table",2)(5,"thead")(6,"tr")(7,"th"),o(8,"Nombre"),n(),t(9,"th"),o(10,"Apellidos"),n(),t(11,"th"),o(12,"Email"),n(),t(13,"th"),o(14,"Usuario"),n(),t(15,"th"),o(16,"Rol"),n(),t(17,"th"),o(18,"Acciones"),n()()(),t(19,"tbody"),f(20,S,16,5,"tr",3),n()()(),t(21,"div",4)(22,"button",5),m("click",function(){return r.goBackToAdminPanel()}),o(23,"Volver"),n()()()),e&2&&(a(20),_("ngForOf",r.users))},dependencies:[O,h],styles:[".table-container[_ngcontent-%COMP%]{max-width:900px;margin:40px auto;background-color:#f2d388;border:2px solid #7b4f24;border-radius:12px;padding:20px 30px;box-shadow:0 6px 14px #d2a04673;font-family:Georgia,serif;color:#4b2e05}h2[_ngcontent-%COMP%]{font-size:2.5rem;margin-top:1rem;margin-bottom:1rem;color:#7b4f24;text-align:center;text-shadow:1px 1px 2px #7b4f24}.table-responsive[_ngcontent-%COMP%]{overflow-x:auto}.table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0 12px;min-width:600px}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center;padding:12px 15px;font-size:1.1rem;border-bottom:2px solid #a06937;color:#4b2e05;text-shadow:1px 1px 2px #7b4f24}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background-color:#f9e3b0;transition:background-color .3s ease;border-radius:8px;box-shadow:0 2px 5px #d2a0464d}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ebcb80}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 15px;vertical-align:middle;font-size:1rem;color:#4b2e05}.table[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border:none!important;box-shadow:none!important}.actions[_ngcontent-%COMP%]{display:flex;gap:10px;flex-wrap:wrap}.action-btn[_ngcontent-%COMP%]{font-family:Georgia,serif;font-weight:700;padding:6px 14px;border-radius:8px;border:none;cursor:pointer;font-size:.95rem;transition:background-color .3s ease;color:#f9f4e6;min-width:70px;text-align:center;-webkit-user-select:none;user-select:none;box-shadow:0 2px 5px #7b4f2466;white-space:nowrap}.edit-btn[_ngcontent-%COMP%]{background-color:#7b4f24}.edit-btn[_ngcontent-%COMP%]:hover{background-color:#a06937;box-shadow:0 4px 10px #a0693799}.delete-btn[_ngcontent-%COMP%]{background-color:#c55e25;box-shadow:0 2px 5px #c55e2566}.delete-btn[_ngcontent-%COMP%]:hover{background-color:#a04a1b;box-shadow:0 4px 10px #a04a1b99}.button-container[_ngcontent-%COMP%]{margin-top:25px;text-align:center}.back-button[_ngcontent-%COMP%]{font-family:Georgia,serif;font-weight:700;background-color:#7b4f24;color:#f9f4e6;border:none;padding:10px 28px;border-radius:12px;cursor:pointer;font-size:1.1rem;box-shadow:0 4px 10px #7b4f2499;transition:background-color .3s ease}.back-button[_ngcontent-%COMP%]:hover{background-color:#a06937;color:#fff;box-shadow:0 6px 14px #a06937cc}@media (max-width: 768px){.table-container[_ngcontent-%COMP%]{padding:15px;margin:20px auto}.table[_ngcontent-%COMP%]{min-width:unset}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 12px;font-size:.9rem}.actions[_ngcontent-%COMP%]{gap:8px}.action-btn[_ngcontent-%COMP%]{font-size:.85rem;padding:6px 10px;min-width:60px}.button-container[_ngcontent-%COMP%]{margin-top:20px}.back-button[_ngcontent-%COMP%]{font-size:1rem;padding:10px 22px}}"]})};export{w as UserControlComponent};
