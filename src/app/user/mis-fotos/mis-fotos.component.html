<div class="mis-fotos">
    <!-- ENCABEZADO -->
  <header class="mis-fotos-header">
    <nav class="tabs">
     <button (click)="volverADashboard()" [class.active]="tabActivo === 'perfil'">Perfil</button>
      <button [routerLink]="['/mis-rallies']" [class.active]="tabActivo === 'misrallies'">Mis Rallies</button>
      <button (click)="seleccionarTab('mis-fotos')" [class.active]="tabActivo === 'misfotos'">Mis Fotos</button>
     <button (click)="entrarGaleria()" [class.active]="tabActivo === 'gallery'">Galería</button>

    </nav>
  </header>

<div class="container">
  <h2 class="section-title">Mis Fotos</h2>

  <div *ngIf="fotos.length > 0" class="photo-grid">
    <div *ngFor="let photo of fotos" class="photo-card">
      <img [src]="photo.photo_url" alt="{{ photo.title }}" class="photo-img" />
      <h3>{{ photo.title }}</h3>
      <p class="status-text">
  <span style="color: #5c3a1e;">Estado:</span>
  <span [ngClass]="{
    'estado-aprobada': photo.status === 'aprobada',
    'estado-pendiente': photo.status === 'pendiente',
    'estado-rechazada': photo.status === 'rechazada'
  }">
    <ng-container [ngSwitch]="photo.status">
      <span *ngSwitchCase="'aprobada'"> Aprobada ✅</span>
      <span *ngSwitchCase="'pendiente'"> Pendiente ⏳</span>
      <span *ngSwitchCase="'rechazada'"> Rechazada ❌</span>
    </ng-container>
  </span>
</p>

      <button class="edit-btn" (click)="editPhoto(photo)">Editar</button>
      <button class="delete-btn" (click)="deletePhoto(photo.id)">Eliminar</button>
    </div>
  </div>

  <div *ngIf="fotos.length === 0" class="no-photos">
    <p>No hay fotos para mostrar.</p>
  </div>

  <!-- Modal de edición -->
  <div *ngIf="isEditModalOpen" class="modal-overlay">
    <div class="modal-content">
      <h4 class="modal-title">Editar Foto: {{ selectedPhoto?.title }}</h4>

      <label for="title">Nuevo Título</label>
      <input [(ngModel)]="selectedPhoto.title" id="title" type="text" class="photo-title-input" placeholder="Nuevo título" />

      <label for="photo">Nueva Foto</label>
      <input #editFileInput type="file" (change)="onFileSelected($event)" id="photo"
        [disabled]="selectedPhoto?.status === 'approved'" />

      <p *ngIf="selectedPhoto?.status === 'approved'" class="disabled-note">
        No se puede cambiar la imagen si la foto está aprobada.
      </p>

      <div *ngIf="imagePreview" class="preview-container">
        <img [src]="imagePreview" alt="Vista previa" class="preview-img" />
      </div>

      <div class="modal-buttons">
        <button class="save-btn" (click)="onSaveEdit()">Guardar cambios</button>
        <button class="close-btn" (click)="closeEditModal()">Cerrar</button>
      </div>
    </div>
  </div>
</div>

<!-- Botón volver -->
<div class="button-container">
  <button (click)="goBackToUserPanel()" class="back-button">Volver</button>
</div>
</div>